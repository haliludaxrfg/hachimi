[2025-10-12 21:53:39][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-12 21:53:40][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 21:53:40][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 21:53:40][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":10292.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":155,"subtotal":10292.0}],"shipping_address":"","total_amount":10292.0,"user_phone":"17708659389"}
[2025-10-12 21:53:40][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-12 21:53:40][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=155, subtotal=10292.000000
[2025-10-12 21:53:40][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-12 21:53:40][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=155, subtotal=10292.000000
[2025-10-12 21:53:45][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=5, name=ikun, price=2.500000, qty=99
[2025-10-12 21:53:45][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-12 21:53:46][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 21:53:46][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 21:53:47][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":10539.5,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":155,"subtotal":10292.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":99,"subtotal":247.5}],"shipping_address":"","total_amount":10539.5,"user_phone":"17708659389"}
[2025-10-12 21:53:47][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=2
[2025-10-12 21:53:47][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=155, subtotal=10292.000000
[2025-10-12 21:53:47][INFO] CLTgetCartForUser: item[1] good_id=5, name=ikun, price=2.500000, qty=99, subtotal=247.500000
[2025-10-12 21:53:47][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=2
[2025-10-12 21:53:47][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=155, subtotal=10292.000000
[2025-10-12 21:53:47][INFO] UserWindow::refreshCart: item 1 good_id=5, name=ikun, qty=99, subtotal=247.500000
[2025-10-12 21:53:51][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=4, name=dingdongji, price=8.110000, qty=250
[2025-10-12 21:53:51][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-12 21:53:52][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 21:53:52][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 21:53:53][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":12567.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":155,"subtotal":10292.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":99,"subtotal":247.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":250,"subtotal":2027.5}],"shipping_address":"","total_amount":12567.0,"user_phone":"17708659389"}
[2025-10-12 21:53:53][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=3
[2025-10-12 21:53:53][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=155, subtotal=10292.000000
[2025-10-12 21:53:53][INFO] CLTgetCartForUser: item[1] good_id=5, name=ikun, price=2.500000, qty=99, subtotal=247.500000
[2025-10-12 21:53:53][INFO] CLTgetCartForUser: item[2] good_id=4, name=dingdongji, price=8.110000, qty=250, subtotal=2027.500000
[2025-10-12 21:53:53][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=3
[2025-10-12 21:53:53][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=155, subtotal=10292.000000
[2025-10-12 21:53:53][INFO] UserWindow::refreshCart: item 1 good_id=5, name=ikun, qty=99, subtotal=247.500000
[2025-10-12 21:53:53][INFO] UserWindow::refreshCart: item 2 good_id=4, name=dingdongji, qty=250, subtotal=2027.500000
[2025-10-12 21:53:54][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 21:53:55][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":12567.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":155,"subtotal":10292.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":99,"subtotal":247.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":250,"subtotal":2027.5}],"shipping_address":"","total_amount":12567.0,"user_phone":"17708659389"}
[2025-10-12 21:53:55][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=3
[2025-10-12 21:53:55][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=155, subtotal=10292.000000
[2025-10-12 21:53:55][INFO] CLTgetCartForUser: item[1] good_id=5, name=ikun, price=2.500000, qty=99, subtotal=247.500000
[2025-10-12 21:53:55][INFO] CLTgetCartForUser: item[2] good_id=4, name=dingdongji, price=8.110000, qty=250, subtotal=2027.500000
[2025-10-12 21:53:55][INFO] UserWindow::onCheckout: sending ADD_SETTLED_ORDER for orderId=o1760277235089_ed70cb3d userPhone=17708659389
[2025-10-12 21:53:55][INFO] CLTaddSettledOrder: request: ADD_SETTLED_ORDER {"discountPolicy":"","items":[{"price":66.4,"productId":6,"productName":"野火哈基米","quantity":155,"subtotal":10292.0},{"price":2.5,"productId":5,"productName":"ikun","quantity":99,"subtotal":247.5[2025-10-12 22:02:06][INFO] 应用启动
[2025-10-12 22:02:06][INFO] Server: DatabaseManager 已连接。
[2025-10-12 22:02:06][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-12 22:02:06][INFO] Client 已连接到 Server
[2025-10-12 22:02:07][INFO] DatabaseManager::connect() called.

[2025-10-12 22:02:07][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-12 22:02:16][INFO] 用户登录成功，手机号: 17708659389
[2025-10-12 22:02:17][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-12 22:02:17][INFO] Server SERgetAllGoods: dbManager ptr = 1422161420272, DTBisConnected=true
[2025-10-12 22:02:17][INFO] DTBloadAllGoods: this=0000014B1F6D1FF0 connection_=0000014B1F7593F0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-12 22:02:17][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-12 22:02:17][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":1075},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114514},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":289},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":181}]
[2025-10-12 22:02:17][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-12 22:02:17][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 22:02:17][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:02:17][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-12 22:02:17][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=0
[2025-10-12 22:02:17][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=0
[2025-10-12 22:02:18][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-12 22:02:31][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=7, name=ハチミ, price=78.000000, qty=13
[2025-10-12 22:02:31][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-12 22:02:32][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 22:02:32][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:02:33][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":1014.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":13,"subtotal":1014.0}],"shipping_address":"","total_amount":1014.0,"user_phone":"17708659389"}
[2025-10-12 22:02:33][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-12 22:02:33][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=13, subtotal=1014.000000
[2025-10-12 22:02:33][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-12 22:02:33][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=13, subtotal=1014.000000
[2025-10-12 22:02:36][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=6, name=野火哈基米, price=66.400000, qty=2
[2025-10-12 22:02:37][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-12 22:02:37][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 22:02:37][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:02:38][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":1146.8,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":13,"subtotal":1014.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":2,"subtotal":132.8}],"shipping_address":"","total_amount":1146.8,"user_phone":"17708659389"}
[2025-10-12 22:02:38][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=2
[2025-10-12 22:02:38][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=13, subtotal=1014.000000
[2025-10-12 22:02:38][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=2, subtotal=132.800000
[2025-10-12 22:02:38][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=2
[2025-10-12 22:02:38][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=13, subtotal=1014.000000
[2025-10-12 22:02:38][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=2, subtotal=132.800000
[2025-10-12 22:02:42][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=1, name=hyw, price=9.990000, qty=91
[2025-10-12 22:02:43][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-12 22:02:44][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 22:02:44][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:02:44][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":2055.89,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":13,"subtotal":1014.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":2,"subtotal":132.8},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":91,"subtotal":909.09}],"shipping_address":"","total_amount":2055.89,"user_phone":"17708659389"}
[2025-10-12 22:02:44][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=3
[2025-10-12 22:02:44][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=13, subtotal=1014.000000
[2025-10-12 22:02:44][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=2, subtotal=132.800000
[2025-10-12 22:02:44][INFO] CLTgetCartForUser: item[2] good_id=1, name=hyw, price=9.990000, qty=91, subtotal=909.090000
[2025-10-12 22:02:44][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=3
[2025-10-12 22:02:44][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=13, subtotal=1014.000000
[2025-10-12 22:02:44][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=2, subtotal=132.800000
[2025-10-12 22:02:44][INFO] UserWindow::refreshCart: item 2 good_id=1, name=hyw, qty=91, subtotal=909.090000
[2025-10-12 22:02:48][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=2, name=manbo, price=28.880000, qty=141
[2025-10-12 22:02:48][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-12 22:02:49][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 22:02:49][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:02:50][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":6127.97,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":13,"subtotal":1014.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":2,"subtotal":132.8},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":91,"subtotal":909.09},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":141,"subtotal":4072.08}],"shipping_address":"","total_amount":6127.97,"user_phone":"17708659389"}
[2025-10-12 22:02:50][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=4
[2025-10-12 22:02:50][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=13, subtotal=1014.000000
[2025-10-12 22:02:50][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=2, subtotal=132.800000
[2025-10-12 22:02:50][INFO] CLTgetCartForUser: item[2] good_id=1, name=hyw, price=9.990000, qty=91, subtotal=909.090000
[2025-10-12 22:02:50][INFO] CLTgetCartForUser: item[3] good_id=2, name=manbo, price=28.880000, qty=141, subtotal=4072.080000
[2025-10-12 22:02:50][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=4
[2025-10-12 22:02:50][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=13, subtotal=1014.000000
[2025-10-12 22:02:50][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=2, subtotal=132.800000
[2025-10-12 22:02:50][INFO] UserWindow::refreshCart: item 2 good_id=1, name=hyw, qty=91, subtotal=909.090000
[2025-10-12 22:02:50][INFO] UserWindow::refreshCart: item 3 good_id=2, name=manbo, qty=141, subtotal=4072.080000
[2025-10-12 22:02:53][INFO] UserWindow::onModifyCartItem called
[2025-10-12 22:02:53][INFO] UserWindow::onModifyCartItem: selected productId=6, currentQty=2
[2025-10-12 22:02:55][INFO] UserWindow::onModifyCartItem: requested newQty=3
[2025-10-12 22:02:55][INFO] UserWindow::onModifyCartItem: attempt update productId=6, newQty=3, attempt=1
[2025-10-12 22:02:55][INFO] Server SERupdateCartItem: request userPhone=17708659389, productId=6, quantity=3
[2025-10-12 22:02:56][INFO] UserWindow::onModifyCartItem CLTupdateCartItem returned true
[2025-10-12 22:02:56][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 22:02:56][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:02:57][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":6194.37,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":13,"subtotal":1014.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":3,"subtotal":199.2},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":91,"subtotal":909.09},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":141,"subtotal":4072.08}],"shipping_address":"","total_amount":6194.37,"user_phone":"17708659389"}
[2025-10-12 22:02:57][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=4
[2025-10-12 22:02:57][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=13, subtotal=1014.000000
[2025-10-12 22:02:57][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=3, subtotal=199.200000
[2025-10-12 22:02:57][INFO] CLTgetCartForUser: item[2] good_id=1, name=hyw, price=9.990000, qty=91, subtotal=909.090000
[2025-10-12 22:02:57][INFO] CLTgetCartForUser: item[3] good_id=2, name=manbo, price=28.880000, qty=141, subtotal=4072.080000
[2025-10-12 22:02:57][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=4
[2025-10-12 22:02:57][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=13, subtotal=1014.000000
[2025-10-12 22:02:57][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=3, subtotal=199.200000
[2025-10-12 22:02:57][INFO] UserWindow::refreshCart: item 2 good_id=1, name=hyw, qty=91, subtotal=909.090000
[2025-10-12 22:02:57][INFO] UserWindow::refreshCart: item 3 good_id=2, name=manbo, qty=141, subtotal=4072.080000
[2025-10-12 22:02:58][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:02:58][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":6194.37,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":13,"subtotal":1014.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":3,"subtotal":199.2},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":91,"subtotal":909.09},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":141,"subtotal":4072.08}],"shipping_address":"","total_amount":6194.37,"user_phone":"17708659389"}
[2025-10-12 22:02:58][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=4
[2025-10-12 22:02:58][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=13, subtotal=1014.000000
[2025-10-12 22:02:58][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=3, subtotal=199.200000
[2025-10-12 22:02:58][INFO] CLTgetCartForUser: item[2] good_id=1, name=hyw, price=9.990000, qty=91, subtotal=909.090000
[2025-10-12 22:02:58][INFO] CLTgetCartForUser: item[3] good_id=2, name=manbo, price=28.880000, qty=141, subtotal=4072.080000
[2025-10-12 22:02:58][INFO] UserWindow::onCheckout: sending ADD_SETTLED_ORDER for orderId=o1760277778542_7cd3258d userPhone=17708659389
[2025-10-12 22:02:58][INFO] CLTaddSettledOrder: request: ADD_SETTLED_ORDER {"discountPolicy":"","items":[{"price":78.0,"productId":7,"productName":"ハチミ","quantity":13,"subtotal":1014.0},{"price":66.4,"productId":6,"productName":"野火哈基米","quantity":3,"subtotal":199.2},{"price":9.99,"productId":1,"productName":"hyw","quantity":91,"subtotal":909.09},{"price":28.88,"productId":2,"productName":"manbo","quantity":141,"subtotal":4072.08}],"orderId":"o1760277778542_7cd3258d","status":1,"userPhone":"17708659389"}
[2025-10-12 22:02:58][INFO] Server SERaddSettledOrder: 减库存 good_id=7 -> 168
[2025-10-12 22:02:58][INFO] Server SERaddSettledOrder: 减库存 good_id=6 -> 286
[2025-10-12 22:02:58][INFO] Server SERaddSettledOrder: 减库存 good_id=1 -> 984
[2025-10-12 22:02:58][INFO] Server SERaddSettledOrder: 减库存 good_id=2 -> 114373
[2025-10-12 22:02:58][INFO] CLTaddSettledOrder: raw response: {"order_id":"o1760277778542_7cd3258d","result":"added"}
[2025-10-12 22:02:58][INFO] UserWindow::onCheckout: CLTaddSettledOrder returned true
[2025-10-12 22:03:00][INFO] Server SERremoveFromCart: request userPhone=17708659389, productId=7
[2025-10-12 22:03:00][INFO] Server SERremoveFromCart: removed productId=7
[2025-10-12 22:03:00][INFO] Server SERremoveFromCart: request userPhone=17708659389, productId=6
[2025-10-12 22:03:00][INFO] Server SERremoveFromCart: removed productId=6
[2025-10-12 22:03:00][INFO] Server SERremoveFromCart: request userPhone=17708659389, productId=1
[2025-10-12 22:03:00][INFO] Server SERremoveFromCart: removed productId=1
[2025-10-12 22:03:01][INFO] Server SERremoveFromCart: request userPhone=17708659389, productId=2
[2025-10-12 22:03:01][INFO] Server SERremoveFromCart: removed productId=2
[2025-10-12 22:03:01][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 22:03:01][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:03:01][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-12 22:03:01][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=0
[2025-10-12 22:03:01][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=0
[2025-10-12 22:03:54][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-12 22:03:54][INFO] Server SERgetAllGoods: dbManager ptr = 1422161420272, DTBisConnected=true
[2025-10-12 22:03:54][INFO] DTBloadAllGoods: this=0000014B1F6D1FF0 connection_=0000014B1F7593F0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-12 22:03:54][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-12 22:03:54][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":286},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":168}]
[2025-10-12 22:03:54][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-12 22:04:01][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=7, name=ハチミ, price=78.000000, qty=168
[2025-10-12 22:04:02][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-12 22:04:02][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 22:04:02][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:04:03][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":13104.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":168,"subtotal":13104.0}],"shipping_address":"","total_amount":13104.0,"user_phone":"17708659389"}
[2025-10-12 22:04:03][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-12 22:04:03][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=168, subtotal=13104.000000
[2025-10-12 22:04:03][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-12 22:04:03][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=168, subtotal=13104.000000
[2025-10-12 22:04:04][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:04:05][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":13104.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":168,"subtotal":13104.0}],"shipping_address":"","total_amount":13104.0,"user_phone":"17708659389"}
[2025-10-12 22:04:05][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-12 22:04:05][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=168, subtotal=13104.000000
[2025-10-12 22:04:05][INFO] UserWindow::onCheckout: sending ADD_SETTLED_ORDER for orderId=o1760277845018_4d6f7f80 userPhone=17708659389
[2025-10-12 22:04:05][INFO] CLTaddSettledOrder: request: ADD_SETTLED_ORDER {"discountPolicy":"","items":[{"price":78.0,"productId":7,"productName":"ハチミ","quantity":168,"subtotal":13104.0}],"orderId":"o1760277845018_4d6f7f80","status":1,"userPhone":"17708659389"}
[2025-10-12 22:04:05][INFO] Server SERaddSettledOrder: 减库存 good_id=7 -> 0
[2025-10-12 22:04:05][INFO] CLTaddSettledOrder: raw response: {"order_id":"o1760277845018_4d6f7f80","result":"added"}
[2025-10-12 22:04:05][INFO] UserWindow::onCheckout: CLTaddSettledOrder returned true
[2025-10-12 22:04:09][INFO] Server SERremoveFromCart: request userPhone=17708659389, productId=7
[2025-10-12 22:04:09][INFO] Server SERremoveFromCart: removed productId=7
[2025-10-12 22:04:09][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 22:04:09][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:04:10][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-12 22:04:10][INFO] Server SERgetAllGoods: dbManager ptr = 1422161420272, DTBisConnected=true
[2025-10-12 22:04:10][INFO] DTBloadAllGoods: this=0000014B1F6D1FF0 connection_=0000014B1F7593F0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-12 22:04:10][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-12 22:04:10][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":286},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":0}]
[2025-10-12 22:04:10][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-12 22:04:10][INFO] CLTgetCartForUser: raw response: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":286},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":0}]
[2025-10-12 22:04:10][FAIL] CLTgetCartForUser 解析失败: [json.exception.type_error.306] cannot use value() with array
[2025-10-12 22:04:[2025-10-12 22:12:46][INFO] 应用启动
[2025-10-12 22:12:46][INFO] Server: DatabaseManager 已连接。
[2025-10-12 22:12:46][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-12 22:12:46][INFO] Client 已连接到 Server
[2025-10-12 22:12:46][INFO] DatabaseManager::connect() called.

[2025-10-12 22:12:46][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-12 22:12:58][FAIL] LOGIN 返回错误: {"error":"密码错误"}
[2025-10-12 22:13:02][FAIL] LOGIN 返回错误: {"error":"密码错误"}
[2025-10-12 22:13:04][FAIL] LOGIN 返回错误: {"error":"密码错误"}
[2025-10-12 22:13:09][INFO] 用户登录成功，手机号: 17708659389
[2025-10-12 22:13:09][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-12 22:13:09][INFO] Server SERgetAllGoods: dbManager ptr = 1765537337536, DTBisConnected=true
[2025-10-12 22:13:09][INFO] DTBloadAllGoods: this=0000019B1239D0C0 connection_=0000019B1241B5C0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-12 22:13:09][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-12 22:13:09][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":286},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":0}]
[2025-10-12 22:13:09][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-12 22:13:09][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 22:13:09][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:13:10][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-12 22:13:10][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=0
[2025-10-12 22:13:10][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=0
[2025-10-12 22:13:10][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-12 22:13:37][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=6, name=野火哈基米, price=66.400000, qty=8
[2025-10-12 22:13:38][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-12 22:13:39][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 22:13:39][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:13:39][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":531.2,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":8,"subtotal":531.2}],"shipping_address":"","total_amount":531.2,"user_phone":"17708659389"}
[2025-10-12 22:13:39][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-12 22:13:39][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=8, subtotal=531.200000
[2025-10-12 22:13:39][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-12 22:13:39][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=8, subtotal=531.200000
[2025-10-12 22:13:41][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:13:41][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":531.2,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":8,"subtotal":531.2}],"shipping_address":"","total_amount":531.2,"user_phone":"17708659389"}
[2025-10-12 22:13:41][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-12 22:13:41][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=8, subtotal=531.200000
[2025-10-12 22:13:41][INFO] UserWindow::onCheckout: sending ADD_SETTLED_ORDER for orderId=o1760278421449_8022398a userPhone=17708659389
[2025-10-12 22:13:41][INFO] CLTaddSettledOrder: request: ADD_SETTLED_ORDER {"discountPolicy":"","items":[{"price":66.4,"productId":6,"productName":"野火哈基米","quantity":8,"subtotal":531.2}],"orderId":"o1760278421449_8022398a","status":1,"userPhone":"17708659389"}
[2025-10-12 22:13:41][INFO] Server SERaddSettledOrder: 减库存 good_id=6 -> 278
[2025-10-12 22:13:41][INFO] CLTaddSettledOrder: raw response: {"order_id":"o1760278421449_8022398a","result":"added"}
[2025-10-12 22:13:41][INFO] UserWindow::onCheckout: CLTaddSettledOrder returned true
[2025-10-12 22:13:43][INFO] Server SERremoveFromCart: request userPhone=17708659389, productId=6
[2025-10-12 22:13:43][INFO] Server SERremoveFromCart: removed productId=6
[2025-10-12 22:13:43][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 22:13:43][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:13:43][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-12 22:13:43][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=0
[2025-10-12 22:13:43][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=0
[2025-10-12 22:14:06][INFO] Server SERdeleteSettledOrder: deleted order c1760229692248_44fe7ebe71b0aabe
[2025-10-12 22:14:11][INFO] Server SERrepairSettledOrder: set status to REPAIR for order o1760276630056_16d52686
[2025-10-12 22:14:15][INFO] Server SERreturnSettledOrder: 恢复库存 good_id=7 -> 100
[2025-10-12 22:14:15][INFO] Server SERreturnSettledOrder: set status to RETURNED for order o1760276650335_be1040b6
[2025-10-12 22:14:22][INFO] UserWindow::onReturnToIdentitySelection called
[2025-10-12 22:14:22][INFO] 收到 UserWindow::backRequested，返回登录界面
[2025-10-12 22:14:22][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-12 22:14:27][INFO] 管理员登录成功，打开管理员窗口
[2025-10-12 22:14:27][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-12 22:14:28][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-12 22:14:28][INFO] Server SERgetAllGoods: dbManager ptr = 1765537337536, DTBisConnected=true
[2025-10-12 22:14:28][INFO] DTBloadAllGoods: this=0000019B1239D0C0 connection_=0000019B1241B5C0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-12 22:14:28][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-12 22:14:28][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":100}]
[2025-10-12 22:14:28][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-12 22:14:42][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-12 22:14:42][INFO] Server SERgetAllGoods: dbManager ptr = 1765537337536, DTBisConnected=true
[2025-10-12 22:14:42][INFO] DTBloadAllGoods: this=0000019B1239D0C0 connection_=0000019B1241B5C0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-12 22:14:42][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-12 22:14:42][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","[2025-10-12 22:43:48][INFO] 应用启动
[2025-10-12 22:43:49][INFO] Server: DatabaseManager 已连接。
[2025-10-12 22:43:49][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-12 22:43:49][INFO] Client 已连接到 Server
[2025-10-12 22:43:49][INFO] DatabaseManager::connect() called.

[2025-10-12 22:43:49][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-12 22:43:59][INFO] 管理员登录成功，打开管理员窗口
[2025-10-12 22:43:59][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-12 22:43:59][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-12 22:43:59][INFO] Server SERgetAllGoods: dbManager ptr = 2302921988912, DTBisConnected=true
[2025-10-12 22:43:59][INFO] DTBloadAllGoods: this=0000021830D8DB30 connection_=0000021830E2B440 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-12 22:43:59][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-12 22:43:59][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-12 22:43:59][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-12 22:44:33][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-12 22:44:33][INFO] Server SERgetAllGoods: dbManager ptr = 2302921988912, DTBisConnected=true
[2025-10-12 22:44:33][INFO] DTBloadAllGoods: this=0000021830D8DB30 connection_=0000021830E2B440 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-12 22:44:33][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-12 22:44:33][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-12 22:44:33][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-12 22:48:47][INFO] 应用启动
[2025-10-12 22:48:47][INFO] Server: DatabaseManager 已连接。
[2025-10-12 22:48:47][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-12 22:48:47][INFO] Client 已连接到 Server
[2025-10-12 22:48:47][INFO] DatabaseManager::connect() called.

[2025-10-12 22:48:47][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-12 22:48:52][INFO] 管理员登录成功，打开管理员窗口
[2025-10-12 22:48:52][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-12 22:48:52][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-12 22:48:52][INFO] Server SERgetAllGoods: dbManager ptr = 2132505459424, DTBisConnected=true
[2025-10-12 22:48:52][INFO] DTBloadAllGoods: this=000001F0833AFAE0 connection_=000001F0834335B0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-12 22:48:52][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-12 22:48:52][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-12 22:48:52][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-12 22:50:09][INFO] AdminWindow::onReturnToIdentitySelection called
[2025-10-12 22:50:09][INFO] 收到 AdminWindow::backRequested，返回登录界面
[2025-10-12 22:50:09][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-12 22:50:18][INFO] 用户登录成功，手机号: 17708659389
[2025-10-12 22:50:18][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-12 22:50:18][INFO] Server SERgetAllGoods: dbManager ptr = 2132505459424, DTBisConnected=true
[2025-10-12 22:50:18][INFO] DTBloadAllGoods: this=000001F0833AFAE0 connection_=000001F0834335B0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-12 22:50:18][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-12 22:50:18][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-12 22:50:18][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-12 22:50:18][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 22:50:18][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 22:50:18][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-12 22:50:18][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=0
[2025-10-12 22:50:18][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=0
[2025-10-12 22:50:19][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-12 23:01:31][INFO] 应用启动
[2025-10-12 23:01:31][INFO] Server: DatabaseManager 已连接。
[2025-10-12 23:01:31][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-12 23:01:31][INFO] Client 已连接到 Server
[2025-10-12 23:01:31][INFO] DatabaseManager::connect() called.

[2025-10-12 23:01:31][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-12 23:01:42][INFO] 管理员登录成功，打开管理员窗口
[2025-10-12 23:01:42][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-12 23:01:42][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-12 23:01:42][INFO] Server SERgetAllGoods: dbManager ptr = 2017349453760, DTBisConnected=true
[2025-10-12 23:01:42][INFO] DTBloadAllGoods: this=000001D5B365C7C0 connection_=000001D5B36E28F0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-12 23:01:42][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-12 23:01:42][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-12 23:01:42][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-12 23:02:00][INFO] AdminWindow::onReturnToIdentitySelection called
[2025-10-12 23:02:00][INFO] 收到 AdminWindow::backRequested，返回登录界面
[2025-10-12 23:02:00][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-12 23:02:13][INFO] 用户登录成功，手机号: 17708659389
[2025-10-12 23:02:13][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-12 23:02:13][INFO] Server SERgetAllGoods: dbManager ptr = 2017349453760, DTBisConnected=true
[2025-10-12 23:02:13][INFO] DTBloadAllGoods: this=000001D5B365C7C0 connection_=000001D5B36E28F0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-12 23:02:13][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-12 23:02:13][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-12 23:02:13][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-12 23:02:13][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-12 23:02:13][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-12 23:02:13][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-12 23:02:13][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=0
[2025-10-12 23:02:13][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=0
[2025-10-12 23:02:14][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-12 23:02:27][INFO] DatabaseManager::disconnect() called.

[2025-10-12 23:02:27][INFO] 应用退出

[2025-10-12 23:02:27][INFO] DatabaseManager::disconnect() called.

[2025-10-12 23:05:02][INFO] 应用启动
[2025-10-12 23:05:02][INFO] Server: DatabaseManager 已连接。
[2025-10-12 23:05:02][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-12 23:05:02][INFO] Client 已连接到 Server
[2025-10-12 23:05:02][INFO] DatabaseManager::connect() called.

[2025-10-12 23:05:02][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-12 23:05:08][INFO] 管理员登录成功，打开管理员窗口
[2025-10-12 23:05:09][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-12 23:05:09][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-12 23:05:09][INFO] Server SERgetAllGoods: dbManager ptr = 1835314326752, DTBisConnected=true
[2025-10-12 23:05:09][INFO] DTBloadAllGoods: this=000001AB51422CE0 connection_=000001AB514C6570 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-12 23:05:09][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-12 23:05:09][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-12 23:05:09][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-12 23:05:19][INFO] AdminWindow::onReturnToIdentitySelection called
[2025-10-12 23:05:19][INFO] 收到 AdminWindow::backRequested，返回登录界面
[2025-10-12 23:05:19][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-12 23:05:21][INFO] 用户取消登录，退出应用
[2025-10-12 23:05:21][INFO] DatabaseManager::disconnect() called.

[2025-10-12 23:05:21][INFO] DatabaseManager::disconnect() called.

[2025-10-13 08:54:17][INFO] 应用启动
[2025-10-13 08:54:18][INFO] Server: DatabaseManager 已连接。
[2025-10-13 08:54:18][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 08:54:18][INFO] Client 已连接到 Server
[2025-10-13 08:54:18][INFO] DatabaseManager::connect() called.

[2025-10-13 08:54:18][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 08:54:32][INFO] 管理员登录成功，打开管理员窗口
[2025-10-13 08:54:32][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 08:54:32][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 08:54:32][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 08:54:32][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 08:54:33][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 08:54:33][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 08:54:33][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 08:54:33][INFO] Server SERgetAllGoods: dbManager ptr = 2790267881504, DTBisConnected=true
[2025-10-13 08:54:33][INFO] DTBloadAllGoods: this=00000289A8ED0820 connection_=00000289A8F63950 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 08:54:33][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 08:54:33][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 08:54:33][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 08:54:33][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 08:54:33][INFO] Server received request: GET_ALL_ORDERS {}
[2025-10-13 08:54:33][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={}
[2025-10-13 08:54:33][INFO] Server sending response (len=698): [{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"}]
[2025-10-13 08:54:34][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 08:54:34][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 08:54:34][INFO] Server sending response (len=2): []
[2025-10-13 08:54:34][INFO] CLTgetAllPromotionsRaw: loaded 0 promotions
[2025-10-13 08:54:34][INFO] AdminWindow::refreshPromotions loaded 0 promotions
[2025-10-13 08:54:42][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"o1760278421449_8022398a","userPhone":"17708659389"}
[2025-10-13 08:54:42][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"o1760278421449_8022398a","userPhone":"17708659389"}
[2025-10-13 08:54:42][INFO] Server sending response (len=167): {"final_amount":531.2,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":8,"subtotal":531.2}],"order_id":"o1760278421449_8022398a","status":1}
[2025-10-13 08:54:47][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 08:54:47][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 08:54:47][INFO] Server sending response (len=2): []
[2025-10-13 08:54:47][INFO] CLTgetAllPromotionsRaw: loaded 0 promotions
[2025-10-13 08:54:47][INFO] AdminWindow::refreshPromotions loaded 0 promotions
[2025-10-13 08:55:09][INFO] Server received request: ADD_PROMOTION {"name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"},"type":"discount"}
[2025-10-13 08:55:09][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"},"type":"discount"}
[2025-10-13 08:55:09][INFO] Server sending response (len=34): {"name":"95%off","result":"added"}
[2025-10-13 08:55:10][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 08:55:10][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 08:55:11][INFO] Server sending response (len=90): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}}]
[2025-10-13 08:55:11][INFO] CLTgetAllPromotionsRaw: loaded 1 promotions
[2025-10-13 08:55:11][INFO] AdminWindow::refreshPromotions loaded 1 promotions
[2025-10-13 08:55:31][INFO] Server received request: ADD_PROMOTION {"name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"},"type":"discount"}
[2025-10-13 08:55:31][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"},"type":"discount"}
[2025-10-13 08:55:31][INFO] Server sending response (len=34): {"name":"90%off","result":"added"}
[2025-10-13 08:55:32][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 08:55:32][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 08:55:32][INFO] Server sending response (len=178): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}}]
[2025-10-13 08:55:33][INFO] CLTgetAllPromotionsRaw: loaded 2 promotions
[2025-10-13 08:55:33][INFO] AdminWindow::refreshPromotions loaded 2 promotions
[2025-10-13 08:56:07][INFO] Server received request: ADD_PROMOTION {"name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 08:56:07][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 08:56:07][INFO] Server sending response (len=39): {"name":"满200减30","result":"added"}
[2025-10-13 08:56:09][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 08:56:09][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 08:56:09][INFO] Server sending response (len=294): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}}]
[2025-10-13 08:56:09][INFO] CLTgetAllPromotionsRaw: loaded 3 promotions
[2025-10-13 08:56:09][INFO] AdminWindow::refreshPromotions loaded 3 promotions
[2025-10-13 08:57:18][INFO] Server received request: ADD_PROMOTION {"name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 08:57:18][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 08:57:18][INFO] Server sending response (len=41): {"name":"满1999减288","result":"added"}
[2025-10-13 08:57:20][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 08:57:20][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 08:57:20][INFO] Server sending response (len=414): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}}]
[2025-10-13 08:57:20][INFO] CLTgetAllPromotionsRaw: loaded 4 promotions
[2025-10-13 08:57:20][INFO] AdminWindow::refreshPromotions loaded 4 promotions
[2025-10-13 08:57:22][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 08:57:22][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 08:57:22][INFO] Server sending response (len=414): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}}]
[2025-10-13 08:57:22][INFO] CLTgetAllPromotionsRaw: loaded 4 promotions
[2025-10-13 08:57:22][INFO] AdminWindow::refreshPromotions loaded 4 promotions
[2025-10-13 09:10:00][INFO] 应用启动
[2025-10-13 09:10:00][INFO] Server: DatabaseManager 已连接。
[2025-10-13 09:10:00][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 09:10:00][INFO] Client 已连接到 Server
[2025-10-13 09:10:00][INFO] DatabaseManager::connect() called.

[2025-10-13 09:10:00][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 09:10:05][INFO] 管理员登录成功，打开管理员窗口
[2025-10-13 09:10:06][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 09:10:06][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 09:10:06][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 09:10:06][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 09:10:06][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 09:10:06][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 09:10:06][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 09:10:06][INFO] Server SERgetAllGoods: dbManager ptr = 1354004325744, DTBisConnected=true
[2025-10-13 09:10:06][INFO] DTBloadAllGoods: this=0000013B40F26570 connection_=0000013B40FBB010 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 09:10:06][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 09:10:06][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 09:10:06][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 09:10:06][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 09:10:06][INFO] Server received request: GET_ALL_ORDERS {}
[2025-10-13 09:10:06][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={}
[2025-10-13 09:10:07][INFO] Server sending response (len=698): [{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"}]
[2025-10-13 09:10:07][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 09:10:07][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 09:10:07][INFO] Server sending response (len=414): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}}]
[2025-10-13 09:10:07][INFO] CLTgetAllPromotionsRaw: loaded 4 promotions
[2025-10-13 09:10:07][INFO] AdminWindow::refreshPromotions loaded 4 promotions
[2025-10-13 09:11:01][INFO] Server received request: ADD_PROMOTION {"name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":1}],"type":"tiered"},"type":"tiered"}
[2025-10-13 09:11:01][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":1}],"type":"tiered"},"type":"tiered"}
[2025-10-13 09:11:01][INFO] Server sending response (len=37): {"name":"98?95?88!","result":"added"}
[2025-10-13 09:11:03][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 09:11:03][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 09:11:03][INFO] Server sending response (len=588): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":1}],"type":"tiered"}}]
[2025-10-13 09:11:03][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 09:11:03][INFO] AdminWindow::refreshPromotions loaded 5 promotions
[2025-10-13 09:11:12][INFO] Server received request: UPDATE_PROMOTION {"name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"type":"tiered"}
[2025-10-13 09:11:12][INFO] Server::SERprocessRequest: cmd=UPDATE_PROMOTION payload={"name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"type":"tiered"}
[2025-10-13 09:11:12][INFO] Server sending response (len=39): {"name":"98?95?88!","result":"updated"}
[2025-10-13 09:11:14][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 09:11:14][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 09:11:14][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 09:11:14][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 09:11:14][INFO] AdminWindow::refreshPromotions loaded 5 promotions
[2025-10-13 09:33:36][INFO] 应用启动
[2025-10-13 09:33:36][INFO] Server: DatabaseManager 已连接。
[2025-10-13 09:33:36][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 09:33:36][INFO] Client 已连接到 Server
[2025-10-13 09:33:36][INFO] DatabaseManager::connect() called.

[2025-10-13 09:33:36][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 09:33:49][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 09:33:49][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 09:33:49][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 09:33:49][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 09:33:50][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 09:33:50][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 09:33:50][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 09:33:50][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 09:33:50][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 09:33:50][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 09:33:50][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 09:33:50][INFO] Server SERgetAllGoods: dbManager ptr = 2340752957568, DTBisConnected=true
[2025-10-13 09:33:50][INFO] DTBloadAllGoods: this=00000220FFBFA080 connection_=00000220FFC81000 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 09:33:50][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 09:33:50][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 09:33:50][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 09:33:50][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":984},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 09:33:50][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 09:33:50][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 09:33:51][INFO] Server received request: GET_CART 17708659389
[2025-10-13 09:33:51][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 09:33:51][INFO] Server sending response (len=207): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 09:33:51][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 09:33:51][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=0
[2025-10-13 09:33:51][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=0
[2025-10-13 09:33:51][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 09:33:51][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 09:33:51][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 09:33:51][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 09:33:51][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 09:33:51][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 09:33:51][INFO] Server sending response (len=698): [{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 09:33:52][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 09:33:52][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 09:33:52][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 09:33:52][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 09:34:15][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=1, name=hyw, price=9.990000, qty=99
[2025-10-13 09:34:16][INFO] Server received request: ADD_TO_CART {"price":9.99,"productId":1,"productName":"hyw","quantity":99,"userPhone":"17708659389"}
[2025-10-13 09:34:16][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":9.99,"productId":1,"productName":"hyw","quantity":99,"userPhone":"17708659389"}
[2025-10-13 09:34:16][INFO] Server sending response (len=59): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","result":"ok"}
[2025-10-13 09:34:16][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 09:34:17][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 09:34:17][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 09:34:18][INFO] Server received request: GET_CART 17708659389
[2025-10-13 09:34:18][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 09:34:18][INFO] Server sending response (len=289): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:34:18][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:34:18][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-13 09:34:18][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=99, subtotal=989.010000
[2025-10-13 09:34:18][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-13 09:34:18][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=99, subtotal=989.010000
[2025-10-13 09:34:18][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 09:34:18][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 09:34:18][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 09:34:18][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 09:34:31][INFO] UserWindow::onCheckout called
[2025-10-13 09:34:31][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 09:34:32][INFO] Server received request: GET_CART 17708659389
[2025-10-13 09:34:32][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 09:34:32][INFO] Server sending response (len=289): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:34:32][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:34:32][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-13 09:34:32][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=99, subtotal=989.010000
[2025-10-13 09:34:37][INFO] UserWindow::onCheckout: user cancelled checkout
[2025-10-13 09:34:45][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 09:34:45][INFO] Server received request: GET_CART 17708659389
[2025-10-13 09:34:45][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 09:34:45][INFO] Server sending response (len=289): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:34:46][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:34:46][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-13 09:34:46][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=99, subtotal=989.010000
[2025-10-13 09:34:46][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":30.0,"discount_policy":"满200减30","final_amount":959.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 09:34:46][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":30.0,"discount_policy":"满200减30","final_amount":959.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 09:34:46][INFO] Server sending response (len=62): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","result":"saved"}
[2025-10-13 09:34:47][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 09:34:47][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 09:34:48][INFO] Server received request: GET_CART 17708659389
[2025-10-13 09:34:48][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 09:34:48][INFO] Server sending response (len=300): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"满200减30","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:34:48][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"满200减30","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:34:48][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-13 09:34:48][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=99, subtotal=989.010000
[2025-10-13 09:34:48][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-13 09:34:48][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=99, subtotal=989.010000
[2025-10-13 09:34:48][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 09:34:48][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 09:34:48][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 09:34:48][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 09:34:50][INFO] UserWindow::onCheckout called
[2025-10-13 09:34:50][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 09:34:50][INFO] Server received request: GET_CART 17708659389
[2025-10-13 09:34:50][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 09:34:50][INFO] Server sending response (len=300): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"满200减30","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:34:50][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"满200减30","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:34:50][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-13 09:34:50][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=99, subtotal=989.010000
[2025-10-13 09:34:52][INFO] UserWindow::onCheckout: user cancelled checkout
[2025-10-13 09:34:54][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 09:34:54][INFO] Server received request: GET_CART 17708659389
[2025-10-13 09:34:54][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 09:34:54][INFO] Server sending response (len=300): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"满200减30","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:34:55][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"满200减30","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:34:55][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-13 09:34:55][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=99, subtotal=989.010000
[2025-10-13 09:34:55][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 09:34:55][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 09:34:55][INFO] Server sending response (len=62): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","result":"saved"}
[2025-10-13 09:34:56][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 09:34:56][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 09:34:57][INFO] Server received request: GET_CART 17708659389
[2025-10-13 09:34:57][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 09:34:57][INFO] Server sending response (len=289): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:34:57][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:34:57][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-13 09:34:57][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=99, subtotal=989.010000
[2025-10-13 09:34:57][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-13 09:34:57][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=99, subtotal=989.010000
[2025-10-13 09:34:57][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 09:34:57][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 09:34:57][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 09:34:57][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 09:35:01][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 09:35:01][INFO] Server received request: GET_CART 17708659389
[2025-10-13 09:35:01][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 09:35:01][INFO] Server sending response (len=289): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:35:01][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:35:01][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-13 09:35:01][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=99, subtotal=989.010000
[2025-10-13 09:35:02][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":30.0,"discount_policy":"满200减30","final_amount":959.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 09:35:02][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":30.0,"discount_policy":"满200减30","final_amount":959.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 09:35:02][INFO] Server sending response (len=62): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","result":"saved"}
[2025-10-13 09:35:03][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 09:35:03][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 09:35:04][INFO] Server received request: GET_CART 17708659389
[2025-10-13 09:35:04][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 09:35:04][INFO] Server sending response (len=300): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"满200减30","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:35:04][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"满200减30","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:35:04][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-13 09:35:04][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=99, subtotal=989.010000
[2025-10-13 09:35:04][INFO] UserWindow::refreshCart: got cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-13 09:35:04][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=99, subtotal=989.010000
[2025-10-13 09:35:04][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 09:35:04][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 09:35:04][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 09:35:04][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 09:35:11][INFO] UserWindow::onCheckout called
[2025-10-13 09:35:11][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 09:35:11][INFO] Server received request: GET_CART 17708659389
[2025-10-13 09:35:11][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 09:35:11][INFO] Server sending response (len=300): {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"满200减30","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:35:11][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760229692248_44fe7ebe71b0aabe","discount_amount":0.0,"discount_policy":"满200减30","final_amount":989.01,"is_converted":false,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"shipping_address":"","total_amount":989.01,"user_phone":"17708659389"}
[2025-10-13 09:35:11][INFO] CLTgetCartForUser: parsed cart_id=c1760229692248_44fe7ebe71b0aabe, items=1
[2025-10-13 09:35:11][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=99, subtotal=989.010000
[2025-10-13 09:35:14][INFO] UserWindow::onCheckout: using cart.cart_id as order id: c1760229692248_44fe7ebe71b0aabe
[2025-10-13 09:35:14][INFO] UserWindow::onCheckout: sending order c1760229692248_44fe7ebe71b0aabe for user 17708659389
[2025-10-13 09:35:14][INFO] CLTaddSettledOrder: request: ADD_SETTLED_ORDER {"discountPolicy":"满200减30","items":[{"price":9.99,"productId":1,"productName":"hyw","quantity":99,"subtotal":989.01}],"orderId":"c1760229692248_44fe7ebe71b0aabe","status":1,"userPhone":"17708659389"}
[2025-10-13 09:35:15][INFO] Server received request: ADD_SETTLED_ORDER {"discountPolicy":"满200减30","items":[{"price":9.99,"productId":1,"productName":"hyw","quantity":99,"subtotal":989.01}],"orderId":"c1760229692248_44fe7ebe71b0aabe","status":1,"userPhone":"17708659389"}
[2025-10-13 09:35:15][INFO] Server::SERprocessRequest: cmd=ADD_SETTLED_ORDER payload={"discountPolicy":"满200减30","items":[{"price":9.99,"productId":1,"productName":"hyw","quantity":99,"subtotal":989.01}],"orderId":"c1760229692248_44fe7ebe71b0aabe","status":1,"userPhone":"17708659389"}
[2025-10-13 09:35:15][INFO] Server SERaddSettledOrder: 减库存 good_id=1 -> 885
[2025-10-13 09:35:15][INFO] Server sending response (len=63): {"order_id":"c1760229692248_44fe7ebe71b0aabe","result":"added"}
[2025-10-13 09:35:15][INFO] CLTaddSettledOrder: raw response: {"order_id":"c1760229692248_44fe7ebe71b0aabe","result":"added"}
[2025-10-13 09:35:15][INFO] UserWindow::onCheckout CLTaddSettledOrder returned true
[2025-10-13 09:35:15][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 09:35:15][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 09:35:15][INFO] Server sending response (len=62): {"cart_id":"c1760319315429_5051e99c4fbbf86c","result":"saved"}
[2025-10-13 09:35:15][INFO] UserWindow::onCheckout CLTsaveCartForUser returned true
[2025-10-13 09:35:19][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 09:35:19][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 09:35:19][INFO] Server received request: GET_CART 17708659389
[2025-10-13 09:35:19][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 09:35:19][INFO] Server sending response (len=206): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 09:35:20][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 09:35:20][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=0
[2025-10-13 09:35:20][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=0
[2025-10-13 09:35:20][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 09:35:20][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 09:35:20][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 09:35:20][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 09:35:20][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 09:35:20][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 09:35:20][INFO] Server sending response (len=805): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 09:35:26][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 09:35:26][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 09:35:26][INFO] Server sending response (len=805): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 09:35:32][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760229692248_44fe7ebe71b0aabe","userPhone":"17708659389"}
[2025-10-13 09:35:32][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760229692248_44fe7ebe71b0aabe","userPhone":"17708659389"}
[2025-10-13 09:35:32][INFO] Server sending response (len=166): {"final_amount":989.01,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1}
[2025-10-13 09:36:01][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 09:36:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 09:36:01][INFO] Server sending response (len=805): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 09:36:04][INFO] DatabaseManager::disconnect() called.

[2025-10-13 09:36:04][INFO] 应用退出

[2025-10-13 09:36:04][INFO] DatabaseManager::disconnect() called.

[2025-10-13 17:52:28][INFO] 应用启动
[2025-10-13 17:52:28][INFO] Server: DatabaseManager 已连接。
[2025-10-13 17:52:28][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 17:52:28][INFO] Client 已连接到 Server
[2025-10-13 17:52:28][INFO] DatabaseManager::connect() called.

[2025-10-13 17:52:28][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 17:52:36][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 17:52:36][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 17:52:36][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 17:52:37][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 17:52:37][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 17:52:37][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 17:52:37][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 17:52:37][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 17:52:37][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 17:52:37][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 17:52:37][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 17:52:37][INFO] Server SERgetAllGoods: dbManager ptr = 1485889325552, DTBisConnected=true
[2025-10-13 17:52:37][INFO] DTBloadAllGoods: this=00000159F5E7C9F0 connection_=00000159F5F1AEB0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 17:52:37][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 17:52:37][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":885},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 17:52:37][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 17:52:37][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":885},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 17:52:37][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 17:52:37][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 17:52:37][INFO] Server received request: GET_CART 17708659389
[2025-10-13 17:52:37][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 17:52:37][INFO] Server sending response (len=206): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 17:52:38][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 17:52:38][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=0
[2025-10-13 17:52:38][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=0
[2025-10-13 17:52:38][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 17:52:38][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 17:52:38][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 17:52:38][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 17:52:38][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 17:52:38][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 17:52:38][INFO] Server sending response (len=805): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 17:52:38][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 17:52:38][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 17:52:38][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 17:52:38][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 17:53:35][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=2, name=manbo, price=28.880000, qty=99
[2025-10-13 17:53:35][INFO] Server received request: ADD_TO_CART {"price":28.88,"productId":2,"productName":"manbo","quantity":99,"userPhone":"17708659389"}
[2025-10-13 17:53:35][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":28.88,"productId":2,"productName":"manbo","quantity":99,"userPhone":"17708659389"}
[2025-10-13 17:53:35][INFO] Server sending response (len=59): {"cart_id":"c1760319315429_5051e99c4fbbf86c","result":"ok"}
[2025-10-13 17:53:35][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 17:53:36][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 17:53:36][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 17:53:37][INFO] Server received request: GET_CART 17708659389
[2025-10-13 17:53:37][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 17:53:37][INFO] Server sending response (len=294): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 17:53:37][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 17:53:37][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 17:53:37][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 17:53:37][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 17:53:37][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 17:53:37][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 17:53:37][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 17:53:37][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 17:53:37][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 17:53:44][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 17:53:44][INFO] Server received request: GET_CART 17708659389
[2025-10-13 17:53:44][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 17:53:44][INFO] Server sending response (len=294): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 17:53:45][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 17:53:45][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 17:53:45][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 17:53:45][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":2571.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 17:53:45][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":2571.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 17:53:45][INFO] Server sending response (len=62): {"cart_id":"c1760319315429_5051e99c4fbbf86c","result":"saved"}
[2025-10-13 17:53:46][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 17:53:46][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 17:53:46][INFO] Server received request: GET_CART 17708659389
[2025-10-13 17:53:46][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 17:53:46][INFO] Server sending response (len=307): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 17:53:46][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 17:53:46][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 17:53:46][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 17:53:46][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 17:53:46][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 17:53:47][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 17:53:47][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 17:53:47][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 17:53:47][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 17:53:51][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 17:53:51][INFO] Server received request: GET_CART 17708659389
[2025-10-13 17:53:51][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 17:53:51][INFO] Server sending response (len=307): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 17:53:51][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 17:53:51][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 17:53:51][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 17:53:51][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":2571.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 17:53:51][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":2571.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 17:53:51][INFO] Server sending response (len=62): {"cart_id":"c1760319315429_5051e99c4fbbf86c","result":"saved"}
[2025-10-13 17:53:52][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 17:53:52][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 17:53:53][INFO] Server received request: GET_CART 17708659389
[2025-10-13 17:53:53][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 17:53:53][INFO] Server sending response (len=307): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 17:53:53][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 17:53:53][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 17:53:53][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 17:53:53][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 17:53:53][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 17:53:53][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 17:53:53][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 17:53:53][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 17:53:53][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 17:53:54][INFO] UserWindow::onCheckout called
[2025-10-13 17:53:54][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 17:53:54][INFO] Server received request: GET_CART 17708659389
[2025-10-13 17:53:54][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 17:53:54][INFO] Server sending response (len=307): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 17:53:54][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 17:53:54][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 17:53:54][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 17:53:57][INFO] UserWindow::onCheckout: user cancelled checkout
[2025-10-13 18:06:52][INFO] 应用启动
[2025-10-13 18:06:52][INFO] Server: DatabaseManager 已连接。
[2025-10-13 18:06:52][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 18:06:52][INFO] Client 已连接到 Server
[2025-10-13 18:06:52][INFO] DatabaseManager::connect() called.

[2025-10-13 18:06:52][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 18:07:00][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 18:07:00][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 18:07:00][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 18:07:01][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 18:07:01][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:07:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:07:01][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:07:01][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:07:01][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 18:07:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 18:07:01][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 18:07:01][INFO] Server SERgetAllGoods: dbManager ptr = 2623477853328, DTBisConnected=true
[2025-10-13 18:07:01][INFO] DTBloadAllGoods: this=00000262D3772C90 connection_=00000262D37F73D0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 18:07:01][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 18:07:01][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":885},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 18:07:01][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 18:07:01][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":885},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 18:07:01][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:07:01][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:07:01][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:07:01][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:07:01][INFO] Server sending response (len=307): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:02][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:02][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:02][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:07:02][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:02][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:07:02][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:07:02][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:07:02][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:07:02][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:07:03][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 18:07:03][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 18:07:03][INFO] Server sending response (len=805): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 18:07:03][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 18:07:03][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 18:07:03][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 18:07:03][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 18:07:10][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:07:10][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:07:10][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:07:10][INFO] Server sending response (len=307): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:10][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:10][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:10][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:07:12][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:07:12][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:07:12][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:07:12][INFO] Server sending response (len=307): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:12][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:12][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:12][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:07:16][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:07:16][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:07:16][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:07:16][INFO] Server sending response (len=307): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:16][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:16][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:16][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:07:16][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":285.9119999999998,"discount_policy":"90%off","final_amount":2573.208,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 18:07:16][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":285.9119999999998,"discount_policy":"90%off","final_amount":2573.208,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 18:07:17][INFO] Server sending response (len=62): {"cart_id":"c1760319315429_5051e99c4fbbf86c","result":"saved"}
[2025-10-13 18:07:17][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:07:17][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:07:18][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:07:18][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:07:18][INFO] Server sending response (len=300): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:18][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:18][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:18][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:07:18][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:18][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:07:18][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:07:18][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:07:18][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:07:18][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:07:19][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:07:19][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:07:19][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:07:19][INFO] Server sending response (len=300): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:20][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:20][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:20][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:07:21][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:07:21][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:07:21][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:07:21][INFO] Server sending response (len=300): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:21][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:21][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:21][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:07:25][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:07:25][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:07:25][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:07:25][INFO] Server sending response (len=300): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:26][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:26][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:26][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:07:30][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:07:30][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:07:30][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:07:30][INFO] Server sending response (len=300): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:30][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:30][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:30][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:07:42][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:07:42][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:07:42][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:07:42][INFO] Server sending response (len=300): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:42][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:42][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:42][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:07:42][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":2571.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 18:07:42][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":2571.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 18:07:42][INFO] Server sending response (len=62): {"cart_id":"c1760319315429_5051e99c4fbbf86c","result":"saved"}
[2025-10-13 18:07:46][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:07:46][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:07:47][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:07:47][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:07:47][INFO] Server sending response (len=307): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:47][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:47][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:47][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:07:47][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:47][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:07:47][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:07:47][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:07:47][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:07:47][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:07:51][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:07:51][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:07:51][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:07:51][INFO] Server sending response (len=307): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:51][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:07:51][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:07:51][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:08:40][INFO] DatabaseManager::disconnect() called.

[2025-10-13 18:08:40][INFO] 应用退出

[2025-10-13 18:08:40][INFO] DatabaseManager::disconnect() called.

[2025-10-13 18:12:46][INFO] 应用启动
[2025-10-13 18:12:46][INFO] Server: DatabaseManager 已连接。
[2025-10-13 18:12:46][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 18:12:46][INFO] Client 已连接到 Server
[2025-10-13 18:12:46][INFO] DatabaseManager::connect() called.

[2025-10-13 18:12:46][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 18:12:53][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 18:12:53][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 18:12:53][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 18:12:53][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 18:12:53][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:12:53][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:12:53][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:12:54][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:12:54][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 18:12:54][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 18:12:54][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 18:12:54][INFO] Server SERgetAllGoods: dbManager ptr = 2309164916944, DTBisConnected=true
[2025-10-13 18:12:54][INFO] DTBloadAllGoods: this=00000219A4F460D0 connection_=00000219A4FC0320 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 18:12:54][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 18:12:54][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":885},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 18:12:54][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 18:12:54][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":885},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 18:12:54][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:12:54][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:12:54][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:12:54][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:12:54][INFO] Server sending response (len=307): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:12:54][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":2859.12,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2859.12,"user_phone":"17708659389"}
[2025-10-13 18:12:54][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:12:54][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:12:54][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=1
[2025-10-13 18:12:54][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:12:54][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:12:54][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:12:54][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:12:55][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:12:55][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 18:12:55][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 18:12:55][INFO] Server sending response (len=805): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 18:12:55][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 18:12:55][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 18:12:55][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 18:12:55][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 18:13:09][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=6, name=野火哈基米, price=66.400000, qty=19
[2025-10-13 18:13:10][INFO] Server received request: ADD_TO_CART {"price":66.4,"productId":6,"productName":"野火哈基米","quantity":19,"userPhone":"17708659389"}
[2025-10-13 18:13:10][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":66.4,"productId":6,"productName":"野火哈基米","quantity":19,"userPhone":"17708659389"}
[2025-10-13 18:13:10][INFO] Server sending response (len=59): {"cart_id":"c1760319315429_5051e99c4fbbf86c","result":"ok"}
[2025-10-13 18:13:10][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 18:13:11][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:13:11][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:13:11][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:13:11][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:13:11][INFO] Server sending response (len=396): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:13:11][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:13:11][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:13:11][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:13:11][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:13:11][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:13:11][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:13:11][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=19, subtotal=1261.600000
[2025-10-13 18:13:12][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:13:12][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:13:12][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:13:12][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:13:15][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:13:15][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:13:15][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:13:15][INFO] Server sending response (len=396): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:13:15][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:13:16][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:13:16][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:13:16][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:13:16][INFO] Server received request: SAVE_CART_WITH_POLICY {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":3832.7200000000003,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"policyJson":"{\"reduce\":288.0,\"scope\":\"global\",\"threshold\":1999.0,\"type\":\"full_reduction\"}","userPhone":"17708659389"}
[2025-10-13 18:13:16][INFO] Server::SERprocessRequest: cmd=SAVE_CART_WITH_POLICY payload={"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":3832.7200000000003,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"policyJson":"{\"reduce\":288.0,\"scope\":\"global\",\"threshold\":1999.0,\"type\":\"full_redu...(truncated)
[2025-10-13 18:13:16][WARN] Server 收到未知请求: SAVE_CART_WITH_POLICY {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":3832.7200000000003,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"policyJson":"{\"reduce\":288.0,\"scope\":\"global\",\"threshold\":1999.0,\"type\":\"full_reduction\"}","userPhone":"17708659389"}
[2025-10-13 18:13:16][INFO] Server sending response (len=694): {"error":"UNKNOWN_COMMAND","request":"SAVE_CART_WITH_POLICY {\"cart\":{\"cart_id\":\"c1760319315429_5051e99c4fbbf86c\",\"discount_amount\":288.0,\"discount_policy\":\"满1999减288\",\"final_amount\":3832.7200000000003,\"is_converted\":true,\"items\":[{\"good_id\":2,\"good_name\":\"manbo\",\"price\":28.88,\"quantity\":99,\"subtotal\":2859.12},{\"good_id\":6,\"good_name\":\"野火哈基米\",\"price\":66.4,\"quantity\":19,\"subtotal\":1261.6}],\"shipping_address\":\"\",\"total_amount\":4120.72,\"user_phone\":\"17708659389\"},\"policyJson\":\"{\\\"reduce\\\":288.0,\\\"scope\\\":\\\"global\\\",\\\"threshold\\\":1999.0,\\\"type\\\":\\\"full_reduction\\\"}\",\"userPhone\":\"17708659389\"}"}
[2025-10-13 18:13:19][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:13:19][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:13:19][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:13:19][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:13:19][INFO] Server sending response (len=396): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:13:20][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:13:20][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:13:20][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:13:20][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:13:20][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:13:20][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:13:20][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=19, subtotal=1261.600000
[2025-10-13 18:13:20][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:13:20][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:13:20][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:13:20][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:13:32][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:13:32][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:13:32][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:13:32][INFO] Server sending response (len=396): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:13:32][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:13:32][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:13:32][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:13:32][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:13:36][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:13:36][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:13:36][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:13:36][INFO] Server sending response (len=396): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:13:36][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:13:36][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:13:36][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:13:36][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:37:10][INFO] 应用启动
[2025-10-13 18:37:10][INFO] Server: DatabaseManager 已连接。
[2025-10-13 18:37:10][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 18:37:10][INFO] Client 已连接到 Server
[2025-10-13 18:37:10][INFO] DatabaseManager::connect() called.

[2025-10-13 18:37:10][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 18:37:25][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 18:37:25][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 18:37:25][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 18:37:25][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 18:37:25][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:37:25][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:37:25][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:37:25][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:37:25][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 18:37:25][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 18:37:25][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 18:37:25][INFO] Server SERgetAllGoods: dbManager ptr = 2495079115376, DTBisConnected=true
[2025-10-13 18:37:25][INFO] DTBloadAllGoods: this=00000244EE4DEA70 connection_=00000244EE57F080 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 18:37:25][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 18:37:25][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":885},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 18:37:25][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 18:37:25][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":885},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 18:37:26][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:37:26][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:37:26][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:37:26][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:37:26][INFO] Server sending response (len=396): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:37:26][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:37:26][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:37:26][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:37:26][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:37:26][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:37:26][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:37:26][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=19, subtotal=1261.600000
[2025-10-13 18:37:26][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:37:26][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:37:26][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:37:26][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:37:26][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 18:37:26][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 18:37:26][INFO] Server sending response (len=805): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 18:37:27][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 18:37:27][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 18:37:27][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 18:37:27][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 18:37:35][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:37:35][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:37:35][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:37:35][INFO] Server sending response (len=396): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:37:35][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:37:35][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:37:35][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:37:35][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:37:35][INFO] Server received request: SAVE_CART_WITH_POLICY {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.0720000000001,"discount_policy":"90%off","final_amount":3708.648,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"policyJson":"{\"discount\":0.9,\"scope\":\"global\",\"type\":\"discount\"}","userPhone":"17708659389"}
[2025-10-13 18:37:35][INFO] Server::SERprocessRequest: cmd=SAVE_CART_WITH_POLICY payload={"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.0720000000001,"discount_policy":"90%off","final_amount":3708.648,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"policyJson":"{\"discount\":0.9,\"scope\":\"global\",\"type\":\"discount\"}","userPhone":"177086593...(truncated)
[2025-10-13 18:37:35][WARN] Server 收到未知请求: SAVE_CART_WITH_POLICY {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.0720000000001,"discount_policy":"90%off","final_amount":3708.648,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"policyJson":"{\"discount\":0.9,\"scope\":\"global\",\"type\":\"discount\"}","userPhone":"17708659389"}
[2025-10-13 18:37:35][INFO] Server sending response (len=658): {"error":"UNKNOWN_COMMAND","request":"SAVE_CART_WITH_POLICY {\"cart\":{\"cart_id\":\"c1760319315429_5051e99c4fbbf86c\",\"discount_amount\":412.0720000000001,\"discount_policy\":\"90%off\",\"final_amount\":3708.648,\"is_converted\":true,\"items\":[{\"good_id\":2,\"good_name\":\"manbo\",\"price\":28.88,\"quantity\":99,\"subtotal\":2859.12},{\"good_id\":6,\"good_name\":\"野火哈基米\",\"price\":66.4,\"quantity\":19,\"subtotal\":1261.6}],\"shipping_address\":\"\",\"total_amount\":4120.72,\"user_phone\":\"17708659389\"},\"policyJson\":\"{\\\"discount\\\":0.9,\\\"scope\\\":\\\"global\\\",\\\"type\\\":\\\"discount\\\"}\",\"userPhone\":\"17708659389\"}"}
[2025-10-13 18:37:46][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:37:46][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:37:47][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:37:47][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:37:47][INFO] Server sending response (len=396): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:37:47][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:37:47][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:37:47][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:37:47][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:37:47][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:37:47][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:37:47][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=19, subtotal=1261.600000
[2025-10-13 18:37:47][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:37:47][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:37:47][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:37:47][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:38:13][INFO] DatabaseManager::disconnect() called.

[2025-10-13 18:38:13][INFO] 应用退出

[2025-10-13 18:38:13][INFO] DatabaseManager::disconnect() called.

[2025-10-13 18:40:51][INFO] 应用启动
[2025-10-13 18:40:51][INFO] Server: DatabaseManager 已连接。
[2025-10-13 18:40:51][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 18:40:51][INFO] Client 已连接到 Server
[2025-10-13 18:40:51][INFO] DatabaseManager::connect() called.

[2025-10-13 18:40:51][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 18:40:59][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 18:40:59][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 18:40:59][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 18:40:59][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 18:40:59][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:40:59][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:40:59][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:40:59][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:40:59][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 18:40:59][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 18:40:59][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 18:40:59][INFO] Server SERgetAllGoods: dbManager ptr = 2797522226432, DTBisConnected=true
[2025-10-13 18:40:59][INFO] DTBloadAllGoods: this=0000028B59518D00 connection_=0000028B595B5FA0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 18:40:59][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 18:40:59][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":885},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 18:40:59][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 18:40:59][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":885},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 18:40:59][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:40:59][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:41:00][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:41:00][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:41:00][INFO] Server sending response (len=396): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:00][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:00][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:41:00][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:41:00][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:41:00][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:41:00][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:41:00][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=19, subtotal=1261.600000
[2025-10-13 18:41:00][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:41:00][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:41:00][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:41:00][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:41:00][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 18:41:00][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 18:41:00][INFO] Server sending response (len=805): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 18:41:01][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 18:41:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 18:41:01][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 18:41:01][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 18:41:09][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:41:09][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:41:09][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:41:09][INFO] Server sending response (len=396): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:10][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:10][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:41:10][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:41:10][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:41:10][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.0720000000001,"discount_policy":"90%off","final_amount":3708.648,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"policy":{"discount":0.9,"scope":"global","type":"discount"},"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 18:41:10][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.0720000000001,"discount_policy":"90%off","final_amount":3708.648,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"policy":{"discount":0.9,"scope":"global","type":"discount"},"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 18:41:10][INFO] Server sending response (len=62): {"cart_id":"c1760319315429_5051e99c4fbbf86c","result":"saved"}
[2025-10-13 18:41:12][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:41:12][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:41:12][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:41:12][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:41:12][INFO] Server sending response (len=389): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:12][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:12][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:41:12][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:41:12][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:41:12][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:41:12][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:41:12][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=19, subtotal=1261.600000
[2025-10-13 18:41:13][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:41:13][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:41:13][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:41:13][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:41:13][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:41:13][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:41:13][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:41:13][INFO] Server sending response (len=389): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:14][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:14][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:41:14][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:41:14][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:41:15][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:41:15][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:41:15][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:41:15][INFO] Server sending response (len=389): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:16][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:16][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:41:16][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:41:16][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:41:25][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:41:25][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:41:25][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:41:25][INFO] Server sending response (len=389): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:26][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"90%off","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:26][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:41:26][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:41:26][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:41:26][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":3832.7200000000003,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"},"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 18:41:26][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":3832.7200000000003,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"},"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"userPho...(truncated)
[2025-10-13 18:41:26][INFO] Server sending response (len=62): {"cart_id":"c1760319315429_5051e99c4fbbf86c","result":"saved"}
[2025-10-13 18:41:31][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:41:31][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:41:31][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:41:31][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:41:31][INFO] Server sending response (len=396): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:32][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:32][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:41:32][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:41:32][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:41:32][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:41:32][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:41:32][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=19, subtotal=1261.600000
[2025-10-13 18:41:32][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:41:32][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:41:32][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:41:32][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:41:33][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:41:33][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:41:33][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:41:33][INFO] Server sending response (len=396): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:33][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:33][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:41:33][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:41:33][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:41:37][INFO] UserWindow::onCheckout called
[2025-10-13 18:41:37][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:41:37][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:41:37][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:41:37][INFO] Server sending response (len=396): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:37][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"满1999减288","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:41:37][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:41:37][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:41:37][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:41:38][INFO] UserWindow::onCheckout: using cart.cart_id as order id: c1760319315429_5051e99c4fbbf86c
[2025-10-13 18:41:39][INFO] Server received request: UPDATE_CART_FOR_PROMOTIONS 17708659389
[2025-10-13 18:41:39][INFO] Server::SERprocessRequest: cmd=UPDATE_CART_FOR_PROMOTIONS payload=17708659389
[2025-10-13 18:41:39][INFO] Server SERupdateCartForPromotions: updated cart for userPhone=17708659389 original=4120.720000 final=3708.648000
[2025-10-13 18:41:39][INFO] Server sending response (len=105): {"discount_amount":412.0720000000001,"final_amount":3708.648,"original_total":4120.72,"result":"updated"}
[2025-10-13 18:41:39][INFO] UserWindow::onCheckout: sending order c1760319315429_5051e99c4fbbf86c for user 17708659389
[2025-10-13 18:41:39][INFO] Server received request: {"cmd":"ADD_SETTLED_ORDER","payload":{"discountPolicy":"满1999减288","discount_amount":0.0,"final_amount":4120.72,"items":[{"price":28.88,"productId":2,"productName":"manbo","quantity":99,"subtotal":2859.12},{"price":66.4,"productId":6,"productName":"野火哈基米","quantity":19,"subtotal":1261.6}],"orderId":"c1760319315429_5051e99c4fbbf86c","shipping_address":"","status":1,"total_amount":4120.72,"userPhone":"17708659389"}}
[2025-10-13 18:41:39][INFO] Server::SERprocessRequest: cmd={"cmd":"ADD_SETTLED_ORDER","payload":{"discountPolicy":"满1999减288","discount_amount":0.0,"final_amount":4120.72,"items":[{"price":28.88,"productId":2,"productName":"manbo","quantity":99,"subtotal":2859.12},{"price":66.4,"productId":6,"productName":"野火哈基米","quantity":19,"subtotal":1261.6}],"orderId":"c1760319315429_5051e99c4fbbf86c","shipping_address":"","status":1,"total_amount":4120.72,"userPhone":"17708659389"}} payload=<none>
[2025-10-13 18:41:39][WARN] Server 收到未知请求: {"cmd":"ADD_SETTLED_ORDER","payload":{"discountPolicy":"满1999减288","discount_amount":0.0,"final_amount":4120.72,"items":[{"price":28.88,"productId":2,"productName":"manbo","quantity":99,"subtotal":2859.12},{"price":66.4,"productId":6,"productName":"野火哈基米","quantity":19,"subtotal":1261.6}],"orderId":"c1760319315429_5051e99c4fbbf86c","shipping_address":"","status":1,"total_amount":4120.72,"userPhone":"17708659389"}}
[2025-10-13 18:41:39][INFO] Server sending response (len=527): {"error":"UNKNOWN_COMMAND","request":"{\"cmd\":\"ADD_SETTLED_ORDER\",\"payload\":{\"discountPolicy\":\"满1999减288\",\"discount_amount\":0.0,\"final_amount\":4120.72,\"items\":[{\"price\":28.88,\"productId\":2,\"productName\":\"manbo\",\"quantity\":99,\"subtotal\":2859.12},{\"price\":66.4,\"productId\":6,\"productName\":\"野火哈基米\",\"quantity\":19,\"subtotal\":1261.6}],\"orderId\":\"c1760319315429_5051e99c4fbbf86c\",\"shipping_address\":\"\",\"status\":1,\"total_amount\":4120.72,\"userPhone\":\"17708659389\"}}"}
[2025-10-13 18:41:39][INFO] UserWindow::onCheckout CLTaddSettledOrder returned false
[2025-10-13 18:42:02][INFO] DatabaseManager::disconnect() called.

[2025-10-13 18:42:02][INFO] 应用退出

[2025-10-13 18:42:02][INFO] DatabaseManager::disconnect() called.

[2025-10-13 18:59:04][INFO] 应用启动
[2025-10-13 18:59:04][INFO] Server: DatabaseManager 已连接。
[2025-10-13 18:59:04][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 18:59:04][INFO] Client 已连接到 Server
[2025-10-13 18:59:04][INFO] DatabaseManager::connect() called.

[2025-10-13 18:59:04][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 18:59:14][INFO] Server received request: LOGIN {"password":"AUVppbb","phone":"17708659389"}
[2025-10-13 18:59:14][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVppbb","phone":"17708659389"}
[2025-10-13 18:59:14][INFO] Server sending response (len=24): {"error":"密码错误"}
[2025-10-13 18:59:14][FAIL] LOGIN 返回错误: {"error":"密码错误"}
[2025-10-13 18:59:17][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 18:59:17][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 18:59:17][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 18:59:17][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 18:59:18][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:59:18][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:59:18][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:59:18][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:59:18][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 18:59:18][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 18:59:18][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 18:59:18][INFO] Server SERgetAllGoods: dbManager ptr = 1733928986480, DTBisConnected=true
[2025-10-13 18:59:18][INFO] DTBloadAllGoods: this=00000193B638A770 connection_=00000193B6414790 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 18:59:18][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 18:59:18][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":885},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 18:59:18][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 18:59:18][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":885},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114373},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":278},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 18:59:18][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:59:18][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:18][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:18][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:18][INFO] Server sending response (len=399): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满1999减288","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:18][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满1999减288","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:18][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:18][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:18][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:59:18][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:18][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:59:18][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=19, subtotal=1261.600000
[2025-10-13 18:59:19][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:59:19][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:59:19][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:59:19][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:59:19][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 18:59:19][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 18:59:19][INFO] Server sending response (len=805): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 18:59:19][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 18:59:19][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 18:59:19][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 18:59:19][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 18:59:29][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:29][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:29][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:29][INFO] Server sending response (len=399): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满1999减288","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:29][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满1999减288","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:29][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:29][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:29][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:59:30][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":3832.7200000000003,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"},"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 18:59:30][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":3832.7200000000003,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"},"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"userPho...(truncated)
[2025-10-13 18:59:30][INFO] Server sending response (len=62): {"cart_id":"c1760319315429_5051e99c4fbbf86c","result":"saved"}
[2025-10-13 18:59:31][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:59:31][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:31][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:31][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:31][INFO] Server sending response (len=399): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满1999减288","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:31][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满1999减288","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:31][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:31][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:31][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:59:31][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:32][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:59:32][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=19, subtotal=1261.600000
[2025-10-13 18:59:32][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:59:32][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:59:32][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:59:32][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:59:32][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:32][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:32][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:32][INFO] Server sending response (len=399): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满1999减288","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:32][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满1999减288","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:32][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:32][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:32][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:59:34][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:34][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:34][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:34][INFO] Server sending response (len=399): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满1999减288","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:34][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满1999减288","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:34][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:34][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:34][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:59:39][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:39][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:39][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:39][INFO] Server sending response (len=399): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满1999减288","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:39][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满1999减288","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:39][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:39][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:39][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:59:39][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.0720000000001,"discount_policy":"90%off","final_amount":3708.648,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"policy":{"discount":0.9,"scope":"global","type":"discount"},"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 18:59:39][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.0720000000001,"discount_policy":"90%off","final_amount":3708.648,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"policy":{"discount":0.9,"scope":"global","type":"discount"},"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 18:59:39][INFO] Server sending response (len=62): {"cart_id":"c1760319315429_5051e99c4fbbf86c","result":"saved"}
[2025-10-13 18:59:40][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:59:40][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:41][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:41][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:41][INFO] Server sending response (len=392): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"90%off","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:41][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"90%off","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:41][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:41][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:41][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:59:41][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:41][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:59:41][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=19, subtotal=1261.600000
[2025-10-13 18:59:41][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:59:41][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:59:41][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:59:41][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:59:42][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:42][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:42][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:42][INFO] Server sending response (len=392): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"90%off","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:42][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"90%off","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:42][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:42][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:42][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:59:45][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:45][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:45][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:45][INFO] Server sending response (len=392): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"90%off","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:45][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"90%off","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:45][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:45][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:45][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:59:48][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:48][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:48][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:48][INFO] Server sending response (len=392): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"90%off","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:48][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"90%off","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:48][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:48][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:48][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:59:50][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:50][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:50][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:50][INFO] Server sending response (len=392): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"90%off","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:50][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"90%off","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:50][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:50][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:50][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:59:53][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:53][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:53][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:53][INFO] Server sending response (len=392): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"90%off","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:53][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"90%off","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:53][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:53][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:53][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:59:54][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 18:59:54][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":0.0,"discount_policy":"","final_amount":4120.72,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 18:59:54][INFO] Server sending response (len=62): {"cart_id":"c1760319315429_5051e99c4fbbf86c","result":"saved"}
[2025-10-13 18:59:55][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 18:59:55][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:55][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:55][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:55][INFO] Server sending response (len=386): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:55][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:55][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:55][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:55][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:59:55][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:55][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 18:59:55][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=19, subtotal=1261.600000
[2025-10-13 18:59:55][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 18:59:55][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 18:59:55][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 18:59:55][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 18:59:55][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:56][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:56][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:56][INFO] Server sending response (len=386): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:56][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:56][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:56][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:56][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 18:59:57][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 18:59:58][INFO] Server received request: GET_CART 17708659389
[2025-10-13 18:59:58][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 18:59:58][INFO] Server sending response (len=386): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:58][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 18:59:58][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 18:59:58][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 18:59:58][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 19:00:02][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:00:03][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:00:03][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:00:03][INFO] Server sending response (len=386): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:03][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:03][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 19:00:03][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:00:03][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 19:00:06][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:00:06][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:00:06][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:00:06][INFO] Server sending response (len=386): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:06][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:06][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 19:00:06][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:00:06][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 19:00:06][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":494.48640000000023,"discount_policy":"98?95?88!","final_amount":3626.2336,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:00:06][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":494.48640000000023,"discount_policy":"98?95?88!","final_amount":3626.2336,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"",...(truncated)
[2025-10-13 19:00:06][INFO] Server sending response (len=62): {"cart_id":"c1760319315429_5051e99c4fbbf86c","result":"saved"}
[2025-10-13 19:00:07][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:00:07][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:00:08][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:00:08][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:00:08][INFO] Server sending response (len=395): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"98?95?88!","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:08][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"98?95?88!","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:08][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 19:00:08][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:00:08][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 19:00:08][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 19:00:08][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 19:00:08][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=19, subtotal=1261.600000
[2025-10-13 19:00:08][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:00:08][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:00:08][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:00:08][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:00:09][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:00:09][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:00:09][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:00:09][INFO] Server sending response (len=395): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"98?95?88!","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:09][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"98?95?88!","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:09][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 19:00:09][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:00:09][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 19:00:10][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:00:11][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:00:11][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:00:11][INFO] Server sending response (len=395): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"98?95?88!","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:11][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"98?95?88!","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:11][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 19:00:11][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:00:11][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 19:00:12][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:00:12][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:00:12][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:00:12][INFO] Server sending response (len=395): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"98?95?88!","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:12][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"98?95?88!","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:12][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 19:00:12][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:00:12][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 19:00:15][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:00:16][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:00:16][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:00:16][INFO] Server sending response (len=395): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"98?95?88!","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:16][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"98?95?88!","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:16][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 19:00:16][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:00:16][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 19:00:16][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":30.0,"discount_policy":"满200减30","final_amount":4090.7200000000003,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"},"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:00:16][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":30.0,"discount_policy":"满200减30","final_amount":4090.7200000000003,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"},"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"},"userPhone":"...(truncated)
[2025-10-13 19:00:16][INFO] Server sending response (len=62): {"cart_id":"c1760319315429_5051e99c4fbbf86c","result":"saved"}
[2025-10-13 19:00:17][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:00:17][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:00:17][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:00:17][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:00:17][INFO] Server sending response (len=397): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满200减30","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:17][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满200减30","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:17][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 19:00:17][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:00:17][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 19:00:17][INFO] UserWindow::refreshCart: got cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 19:00:17][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 19:00:17][INFO] UserWindow::refreshCart: item 1 good_id=6, name=野火哈基米, qty=19, subtotal=1261.600000
[2025-10-13 19:00:18][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:00:18][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:00:18][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:00:18][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:00:18][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:00:18][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:00:18][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:00:18][INFO] Server sending response (len=397): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满200减30","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:18][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满200减30","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:18][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 19:00:18][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:00:18][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 19:00:20][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:00:20][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:00:20][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:00:20][INFO] Server sending response (len=397): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满200减30","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:20][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满200减30","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:20][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 19:00:20][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:00:20][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 19:00:22][INFO] UserWindow::onCheckout called
[2025-10-13 19:00:22][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:00:22][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:00:22][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:00:22][INFO] Server sending response (len=397): {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满200减30","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:22][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760319315429_5051e99c4fbbf86c","discount_amount":412.07,"discount_policy":"满200减30","final_amount":3708.65,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"shipping_address":"","total_amount":4120.72,"user_phone":"17708659389"}
[2025-10-13 19:00:22][INFO] CLTgetCartForUser: parsed cart_id=c1760319315429_5051e99c4fbbf86c, items=2
[2025-10-13 19:00:22][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:00:22][INFO] CLTgetCartForUser: item[1] good_id=6, name=野火哈基米, price=66.400000, qty=19, subtotal=1261.600000
[2025-10-13 19:00:24][INFO] UserWindow::onCheckout: using cart.cart_id as order id: c1760319315429_5051e99c4fbbf86c
[2025-10-13 19:00:24][INFO] Server received request: UPDATE_CART_FOR_PROMOTIONS 17708659389
[2025-10-13 19:00:24][INFO] Server::SERprocessRequest: cmd=UPDATE_CART_FOR_PROMOTIONS payload=17708659389
[2025-10-13 19:00:24][INFO] Server SERupdateCartForPromotions: updated cart for userPhone=17708659389 original=4120.720000 final=3708.648000
[2025-10-13 19:00:24][INFO] Server sending response (len=105): {"discount_amount":412.0720000000001,"final_amount":3708.648,"original_total":4120.72,"result":"updated"}
[2025-10-13 19:00:24][INFO] UserWindow::onCheckout: sending order c1760319315429_5051e99c4fbbf86c for user 17708659389
[2025-10-13 19:00:24][INFO] Server received request: ADD_SETTLED_ORDER {"discountPolicy":"满200减30","discount_amount":412.07,"final_amount":3708.65,"items":[{"price":28.88,"productId":2,"productName":"manbo","quantity":99,"subtotal":2859.12},{"price":66.4,"productId":6,"productName":"野火哈基米","quantity":19,"subtotal":1261.6}],"orderId":"c1760319315429_5051e99c4fbbf86c","shipping_address":"","status":1,"total_amount":4120.72,"userPhone":"17708659389"}
[2025-10-13 19:00:24][INFO] Server::SERprocessRequest: cmd=ADD_SETTLED_ORDER payload={"discountPolicy":"满200减30","discount_amount":412.07,"final_amount":3708.65,"items":[{"price":28.88,"productId":2,"productName":"manbo","quantity":99,"subtotal":2859.12},{"price":66.4,"productId":6,"productName":"野火哈基米","quantity":19,"subtotal":1261.6}],"orderId":"c1760319315429_5051e99c4fbbf86c","shipping_address":"","status":1,"total_amount":4120.72,"userPhone":"17708659389"}
[2025-10-13 19:00:25][INFO] Server SERaddSettledOrder: 减库存 good_id=2 -> 114274
[2025-10-13 19:00:25][INFO] Server SERaddSettledOrder: 减库存 good_id=6 -> 259
[2025-10-13 19:00:25][INFO] Server sending response (len=63): {"order_id":"c1760319315429_5051e99c4fbbf86c","result":"added"}
[2025-10-13 19:00:25][INFO] UserWindow::onCheckout CLTaddSettledOrder returned true
[2025-10-13 19:00:25][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:00:25][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:00:25][INFO] Server sending response (len=62): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","result":"saved"}
[2025-10-13 19:00:25][INFO] UserWindow::onCheckout CLTsaveCartForUser returned true
[2025-10-13 19:00:26][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:00:26][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:00:27][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:00:27][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:00:27][INFO] Server sending response (len=206): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:00:27][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:00:27][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=0
[2025-10-13 19:00:27][INFO] UserWindow::refreshCart: got cart_id=c1760353225386_e57ec68b0e1d72f5, items=0
[2025-10-13 19:00:27][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:00:27][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:00:27][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:00:27][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:00:27][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 19:00:27][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 19:00:27][INFO] Server sending response (len=913): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 19:00:31][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 19:00:31][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 19:00:31][INFO] Server sending response (len=913): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 19:00:34][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760319315429_5051e99c4fbbf86c","userPhone":"17708659389"}
[2025-10-13 19:00:34][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760319315429_5051e99c4fbbf86c","userPhone":"17708659389"}
[2025-10-13 19:00:34][INFO] Server sending response (len=260): {"final_amount":4120.72,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"order_id":"c1760319315429_5051e99c4fbbf86c","status":1}
[2025-10-13 19:00:49][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 19:00:49][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 19:00:49][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 19:00:49][INFO] Server SERgetAllGoods: dbManager ptr = 1733928986480, DTBisConnected=true
[2025-10-13 19:00:49][INFO] DTBloadAllGoods: this=00000193B638A770 connection_=00000193B6414790 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 19:00:49][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 19:00:49][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":885},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114274},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":259},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:00:49][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 19:00:49][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":885},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114274},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":259},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:00:55][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=2, name=manbo, price=28.880000, qty=2
[2025-10-13 19:00:55][INFO] Server received request: ADD_TO_CART {"price":28.88,"productId":2,"productName":"manbo","quantity":2,"userPhone":"17708659389"}
[2025-10-13 19:00:55][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":28.88,"productId":2,"productName":"manbo","quantity":2,"userPhone":"17708659389"}
[2025-10-13 19:00:55][INFO] Server sending response (len=59): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","result":"ok"}
[2025-10-13 19:00:56][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 19:00:57][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:00:57][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:00:57][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:00:57][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:00:57][INFO] Server sending response (len=288): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":5.78,"discount_policy":"","final_amount":51.98,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76}],"shipping_address":"","total_amount":57.76,"user_phone":"17708659389"}
[2025-10-13 19:00:57][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":5.78,"discount_policy":"","final_amount":51.98,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76}],"shipping_address":"","total_amount":57.76,"user_phone":"17708659389"}
[2025-10-13 19:00:57][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=1
[2025-10-13 19:00:57][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:00:57][INFO] UserWindow::refreshCart: got cart_id=c1760353225386_e57ec68b0e1d72f5, items=1
[2025-10-13 19:00:57][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 19:00:57][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:00:57][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:00:57][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:00:57][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:01:02][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=1, name=hyw, price=9.990000, qty=100
[2025-10-13 19:01:03][INFO] Server received request: ADD_TO_CART {"price":9.99,"productId":1,"productName":"hyw","quantity":100,"userPhone":"17708659389"}
[2025-10-13 19:01:03][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":9.99,"productId":1,"productName":"hyw","quantity":100,"userPhone":"17708659389"}
[2025-10-13 19:01:03][INFO] Server sending response (len=59): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","result":"ok"}
[2025-10-13 19:01:03][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 19:01:03][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:01:03][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:04][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:04][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:04][INFO] Server sending response (len=370): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":105.68,"discount_policy":"","final_amount":951.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0}],"shipping_address":"","total_amount":1056.76,"user_phone":"17708659389"}
[2025-10-13 19:01:04][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":105.68,"discount_policy":"","final_amount":951.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0}],"shipping_address":"","total_amount":1056.76,"user_phone":"17708659389"}
[2025-10-13 19:01:04][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=2
[2025-10-13 19:01:04][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:04][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:04][INFO] UserWindow::refreshCart: got cart_id=c1760353225386_e57ec68b0e1d72f5, items=2
[2025-10-13 19:01:04][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 19:01:04][INFO] UserWindow::refreshCart: item 1 good_id=1, name=hyw, qty=100, subtotal=999.000000
[2025-10-13 19:01:04][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:01:04][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:01:04][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:01:04][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:01:08][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=6, name=野火哈基米, price=66.400000, qty=59
[2025-10-13 19:01:09][INFO] Server received request: ADD_TO_CART {"price":66.4,"productId":6,"productName":"野火哈基米","quantity":59,"userPhone":"17708659389"}
[2025-10-13 19:01:09][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":66.4,"productId":6,"productName":"野火哈基米","quantity":59,"userPhone":"17708659389"}
[2025-10-13 19:01:09][INFO] Server sending response (len=59): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","result":"ok"}
[2025-10-13 19:01:09][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 19:01:09][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:01:09][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:10][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:10][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:10][INFO] Server sending response (len=460): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:10][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:10][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:10][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:10][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:10][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:10][INFO] UserWindow::refreshCart: got cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:10][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 19:01:10][INFO] UserWindow::refreshCart: item 1 good_id=1, name=hyw, qty=100, subtotal=999.000000
[2025-10-13 19:01:10][INFO] UserWindow::refreshCart: item 2 good_id=6, name=野火哈基米, qty=59, subtotal=3917.600000
[2025-10-13 19:01:10][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:01:10][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:01:10][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:01:10][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:01:11][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:11][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:11][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:11][INFO] Server sending response (len=460): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:11][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:11][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:11][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:11][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:11][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:12][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:13][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:13][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:13][INFO] Server sending response (len=460): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:13][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:13][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:13][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:13][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:13][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:14][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:14][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:14][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:14][INFO] Server sending response (len=460): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:14][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:14][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:14][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:14][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:14][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:19][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:19][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:19][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:19][INFO] Server sending response (len=460): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:19][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:19][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:19][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:19][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:19][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:19][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":30.0,"discount_policy":"满200减30","final_amount":4944.360000000001,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"},"shipping_address":"","total_amount":4974.360000000001,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:01:19][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":30.0,"discount_policy":"满200减30","final_amount":4944.360000000001,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"},"shipping_add...(truncated)
[2025-10-13 19:01:19][INFO] Server sending response (len=62): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","result":"saved"}
[2025-10-13 19:01:20][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:01:20][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:21][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:21][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:21][INFO] Server sending response (len=471): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"满200减30","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:21][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"满200减30","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:21][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:21][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:21][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:21][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:21][INFO] UserWindow::refreshCart: got cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:21][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 19:01:21][INFO] UserWindow::refreshCart: item 1 good_id=1, name=hyw, qty=100, subtotal=999.000000
[2025-10-13 19:01:21][INFO] UserWindow::refreshCart: item 2 good_id=6, name=野火哈基米, qty=59, subtotal=3917.600000
[2025-10-13 19:01:21][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:01:21][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:01:21][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:01:21][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:01:21][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:21][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:21][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:21][INFO] Server sending response (len=471): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"满200减30","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:21][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"满200减30","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:21][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:21][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:21][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:21][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:23][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:23][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:23][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:23][INFO] Server sending response (len=471): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"满200减30","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:23][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"满200减30","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:23][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:23][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:23][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:23][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:28][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:28][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:28][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:28][INFO] Server sending response (len=471): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"满200减30","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:28][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"满200减30","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:28][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:28][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:28][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:28][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:28][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":596.9232000000002,"discount_policy":"98?95?88!","final_amount":4377.4368,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_amount":4974.360000000001,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:01:28][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":596.9232000000002,"discount_policy":"98?95?88!","final_amount":4377.4368,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7...(truncated)
[2025-10-13 19:01:28][INFO] Server sending response (len=62): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","result":"saved"}
[2025-10-13 19:01:29][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:01:29][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:29][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:29][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:29][INFO] Server sending response (len=469): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"98?95?88!","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:30][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"98?95?88!","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:30][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:30][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:30][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:30][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:30][INFO] UserWindow::refreshCart: got cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:30][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 19:01:30][INFO] UserWindow::refreshCart: item 1 good_id=1, name=hyw, qty=100, subtotal=999.000000
[2025-10-13 19:01:30][INFO] UserWindow::refreshCart: item 2 good_id=6, name=野火哈基米, qty=59, subtotal=3917.600000
[2025-10-13 19:01:30][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:01:30][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:01:30][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:01:30][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:01:30][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:30][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:30][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:30][INFO] Server sending response (len=469): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"98?95?88!","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:30][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"98?95?88!","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:30][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:30][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:30][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:30][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:33][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:33][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:33][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:33][INFO] Server sending response (len=469): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"98?95?88!","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:33][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"98?95?88!","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:33][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:33][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:33][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:33][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:39][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:39][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:39][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:39][INFO] Server sending response (len=469): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"98?95?88!","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:39][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"98?95?88!","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:39][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:39][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:39][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:39][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:39][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.4359999999997,"discount_policy":"90%off","final_amount":4476.924000000001,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"policy":{"discount":0.9,"scope":"global","type":"discount"},"shipping_address":"","total_amount":4974.360000000001,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:01:39][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.4359999999997,"discount_policy":"90%off","final_amount":4476.924000000001,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"policy":{"discount":0.9,"scope":"global","type":"discount"},"shipping_address":"","total...(truncated)
[2025-10-13 19:01:39][INFO] Server sending response (len=62): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","result":"saved"}
[2025-10-13 19:01:40][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:01:40][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:41][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:41][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:41][INFO] Server sending response (len=466): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"90%off","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:41][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"90%off","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:41][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:41][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:41][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:41][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:41][INFO] UserWindow::refreshCart: got cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:41][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 19:01:41][INFO] UserWindow::refreshCart: item 1 good_id=1, name=hyw, qty=100, subtotal=999.000000
[2025-10-13 19:01:41][INFO] UserWindow::refreshCart: item 2 good_id=6, name=野火哈基米, qty=59, subtotal=3917.600000
[2025-10-13 19:01:41][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:01:41][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:01:41][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:01:41][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:01:41][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:41][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:41][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:41][INFO] Server sending response (len=466): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"90%off","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:42][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"90%off","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:42][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:42][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:42][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:42][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:45][INFO] UserWindow::onCheckout called
[2025-10-13 19:01:45][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:45][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:45][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:45][INFO] Server sending response (len=466): {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"90%off","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:45][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353225386_e57ec68b0e1d72f5","discount_amount":497.44,"discount_policy":"90%off","final_amount":4476.92,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"shipping_address":"","total_amount":4974.36,"user_phone":"17708659389"}
[2025-10-13 19:01:45][INFO] CLTgetCartForUser: parsed cart_id=c1760353225386_e57ec68b0e1d72f5, items=3
[2025-10-13 19:01:45][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 19:01:45][INFO] CLTgetCartForUser: item[1] good_id=1, name=hyw, price=9.990000, qty=100, subtotal=999.000000
[2025-10-13 19:01:45][INFO] CLTgetCartForUser: item[2] good_id=6, name=野火哈基米, price=66.400000, qty=59, subtotal=3917.600000
[2025-10-13 19:01:46][INFO] UserWindow::onCheckout: using cart.cart_id as order id: c1760353225386_e57ec68b0e1d72f5
[2025-10-13 19:01:46][INFO] Server received request: UPDATE_CART_FOR_PROMOTIONS 17708659389
[2025-10-13 19:01:46][INFO] Server::SERprocessRequest: cmd=UPDATE_CART_FOR_PROMOTIONS payload=17708659389
[2025-10-13 19:01:46][INFO] Server SERupdateCartForPromotions: updated cart for userPhone=17708659389 original=4974.360000 final=4476.924000
[2025-10-13 19:01:46][INFO] Server sending response (len=105): {"discount_amount":497.4359999999997,"final_amount":4476.924,"original_total":4974.36,"result":"updated"}
[2025-10-13 19:01:46][INFO] UserWindow::onCheckout: sending order c1760353225386_e57ec68b0e1d72f5 for user 17708659389
[2025-10-13 19:01:47][INFO] Server received request: ADD_SETTLED_ORDER {"discountPolicy":"90%off","discount_amount":497.44,"final_amount":4476.92,"items":[{"price":28.88,"productId":2,"productName":"manbo","quantity":2,"subtotal":57.76},{"price":9.99,"productId":1,"productName":"hyw","quantity":100,"subtotal":999.0},{"price":66.4,"productId":6,"productName":"野火哈基米","quantity":59,"subtotal":3917.6}],"orderId":"c1760353225386_e57ec68b0e1d72f5","shipping_address":"","status":1,"total_amount":4974.36,"userPhone":"17708659389"}
[2025-10-13 19:01:47][INFO] Server::SERprocessRequest: cmd=ADD_SETTLED_ORDER payload={"discountPolicy":"90%off","discount_amount":497.44,"final_amount":4476.92,"items":[{"price":28.88,"productId":2,"productName":"manbo","quantity":2,"subtotal":57.76},{"price":9.99,"productId":1,"productName":"hyw","quantity":100,"subtotal":999.0},{"price":66.4,"productId":6,"productName":"野火哈基米","quantity":59,"subtotal":3917.6}],"orderId":"c1760353225386_e57ec68b0e1d72f5","shipping_address":"","status":1,"total_amount":4974.36,"userPhone":"17708659389"}
[2025-10-13 19:01:47][INFO] Server SERaddSettledOrder: 减库存 good_id=2 -> 114272
[2025-10-13 19:01:47][INFO] Server SERaddSettledOrder: 减库存 good_id=1 -> 785
[2025-10-13 19:01:47][INFO] Server SERaddSettledOrder: 减库存 good_id=6 -> 200
[2025-10-13 19:01:47][INFO] Server sending response (len=63): {"order_id":"c1760353225386_e57ec68b0e1d72f5","result":"added"}
[2025-10-13 19:01:47][INFO] UserWindow::onCheckout CLTaddSettledOrder returned true
[2025-10-13 19:01:47][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:01:47][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:01:47][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:01:47][INFO] UserWindow::onCheckout CLTsaveCartForUser returned true
[2025-10-13 19:01:48][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:01:48][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:01:48][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:01:48][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:01:48][INFO] Server sending response (len=206): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:01:48][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:01:48][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=0
[2025-10-13 19:01:48][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=0
[2025-10-13 19:01:49][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:01:49][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:01:49][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:01:49][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:01:49][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 19:01:49][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 19:01:49][INFO] Server sending response (len=1021): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 19:01:52][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 19:01:52][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 19:01:52][INFO] Server sending response (len=1021): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 19:01:55][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760353225386_e57ec68b0e1d72f5","userPhone":"17708659389"}
[2025-10-13 19:01:55][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760353225386_e57ec68b0e1d72f5","userPhone":"17708659389"}
[2025-10-13 19:01:55][INFO] Server sending response (len=334): {"final_amount":4974.36,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1}
[2025-10-13 19:06:51][INFO] 应用启动
[2025-10-13 19:06:51][INFO] Server: DatabaseManager 已连接。
[2025-10-13 19:06:51][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 19:06:51][INFO] Client 已连接到 Server
[2025-10-13 19:06:51][INFO] DatabaseManager::connect() called.

[2025-10-13 19:06:51][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 19:07:00][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 19:07:00][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 19:07:00][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 19:07:00][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 19:07:00][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:07:00][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:07:00][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:07:00][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:07:00][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 19:07:00][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 19:07:00][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 19:07:00][INFO] Server SERgetAllGoods: dbManager ptr = 2112123025088, DTBisConnected=true
[2025-10-13 19:07:00][INFO] DTBloadAllGoods: this=000001EBC457B6C0 connection_=000001EBC45FF050 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 19:07:00][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 19:07:00][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114272},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:07:00][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 19:07:00][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114272},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:07:01][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:07:01][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:07:01][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:07:01][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:07:01][INFO] Server sending response (len=206): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:07:01][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:07:01][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=0
[2025-10-13 19:07:01][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=0
[2025-10-13 19:07:01][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:07:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:07:01][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:07:01][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:07:02][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 19:07:02][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 19:07:02][INFO] Server sending response (len=1021): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 19:07:02][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 19:07:02][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 19:07:02][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 19:07:02][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 19:07:07][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760229692248_44fe7ebe71b0aabe","userPhone":"17708659389"}
[2025-10-13 19:07:07][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760229692248_44fe7ebe71b0aabe","userPhone":"17708659389"}
[2025-10-13 19:07:07][INFO] Server sending response (len=166): {"final_amount":989.01,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1}
[2025-10-13 19:07:10][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760319315429_5051e99c4fbbf86c","userPhone":"17708659389"}
[2025-10-13 19:07:10][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760319315429_5051e99c4fbbf86c","userPhone":"17708659389"}
[2025-10-13 19:07:10][INFO] Server sending response (len=260): {"final_amount":4120.72,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"order_id":"c1760319315429_5051e99c4fbbf86c","status":1}
[2025-10-13 19:07:19][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=4, name=dingdongji, price=8.110000, qty=10
[2025-10-13 19:07:19][INFO] Server received request: ADD_TO_CART {"price":8.11,"productId":4,"productName":"dingdongji","quantity":10,"userPhone":"17708659389"}
[2025-10-13 19:07:19][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":8.11,"productId":4,"productName":"dingdongji","quantity":10,"userPhone":"17708659389"}
[2025-10-13 19:07:19][INFO] Server sending response (len=59): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"ok"}
[2025-10-13 19:07:19][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 19:07:20][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:07:20][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:07:21][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:07:21][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:07:21][INFO] Server sending response (len=291): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:21][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:21][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:21][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:07:21][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:21][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:07:21][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:07:21][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:07:21][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:07:21][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:07:24][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:07:24][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:07:24][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:07:24][INFO] Server sending response (len=291): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:24][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:24][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:24][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:07:26][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:07:26][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:07:26][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:07:26][INFO] Server sending response (len=291): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:26][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:26][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:26][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:07:35][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:07:35][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:07:35][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:07:35][INFO] Server sending response (len=291): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:35][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:35][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:35][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:07:35][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":4.055000000000007,"discount_policy":"95%off","final_amount":77.04499999999999,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:07:35][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":4.055000000000007,"discount_policy":"95%off","final_amount":77.04499999999999,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:07:35][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:07:36][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:07:36][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:07:37][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:07:37][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:07:37][INFO] Server sending response (len=297): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"95%off","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:37][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"95%off","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:37][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:37][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:07:37][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:37][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:07:37][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:07:37][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:07:37][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:07:37][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:07:37][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:07:37][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:07:37][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:07:37][INFO] Server sending response (len=297): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"95%off","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:37][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"95%off","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:37][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:37][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:07:41][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:07:42][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:07:42][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:07:42][INFO] Server sending response (len=297): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"95%off","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:42][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"95%off","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:42][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:42][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:07:42][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"90%off","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"policy":{"discount":0.9,"scope":"global","type":"discount"},"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:07:42][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"90%off","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"policy":{"discount":0.9,"scope":"global","type":"discount"},"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:07:42][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:07:43][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:07:43][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:07:43][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:07:43][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:07:43][INFO] Server sending response (len=297): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"90%off","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:43][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"90%off","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:43][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:43][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:07:43][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:43][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:07:44][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:07:44][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:07:44][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:07:44][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:07:44][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:07:44][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:07:44][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:07:44][INFO] Server sending response (len=297): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"90%off","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:44][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"90%off","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:44][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:44][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:07:50][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:07:51][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:07:51][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:07:51][INFO] Server sending response (len=297): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"90%off","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:51][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"90%off","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:51][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:51][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:07:51][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":9.732,"discount_policy":"98?95?88!","final_amount":71.368,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:07:51][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":9.732,"discount_policy":"98?95?88!","final_amount":71.368,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:07:51][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:07:52][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:07:52][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:07:53][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:07:53][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:07:53][INFO] Server sending response (len=300): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"98?95?88!","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:53][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"98?95?88!","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:53][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:53][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:07:53][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:53][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:07:53][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:07:53][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:07:53][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:07:53][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:07:54][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:07:54][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:07:54][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:07:54][INFO] Server sending response (len=300): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"98?95?88!","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:54][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"98?95?88!","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:07:54][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:07:54][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:07:59][INFO] DatabaseManager::disconnect() called.

[2025-10-13 19:07:59][INFO] 应用退出

[2025-10-13 19:07:59][INFO] DatabaseManager::disconnect() called.

[2025-10-13 19:33:10][INFO] 应用启动
[2025-10-13 19:33:10][INFO] Server: DatabaseManager 已连接。
[2025-10-13 19:33:10][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 19:33:10][INFO] Client 已连接到 Server
[2025-10-13 19:33:10][INFO] DatabaseManager::connect() called.

[2025-10-13 19:33:10][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 19:33:20][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 19:33:20][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 19:33:20][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 19:33:20][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 19:33:21][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:33:21][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:33:21][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:33:21][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:33:21][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 19:33:21][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 19:33:21][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 19:33:21][INFO] Server SERgetAllGoods: dbManager ptr = 1527786967552, DTBisConnected=true
[2025-10-13 19:33:21][INFO] DTBloadAllGoods: this=00000163B7331200 connection_=00000163B73D4000 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 19:33:21][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 19:33:21][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114272},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:33:21][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 19:33:21][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114272},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":416},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:33:21][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:33:21][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:33:21][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:33:21][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:33:21][INFO] Server sending response (len=300): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"98?95?88!","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:21][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"98?95?88!","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:21][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:33:21][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:33:21][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:33:21][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:33:22][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:33:22][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:33:22][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:33:22][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:33:22][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 19:33:22][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 19:33:22][INFO] Server sending response (len=1021): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"}]
[2025-10-13 19:33:22][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 19:33:22][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 19:33:22][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 19:33:22][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 19:33:31][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760319315429_5051e99c4fbbf86c","userPhone":"17708659389"}
[2025-10-13 19:33:31][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760319315429_5051e99c4fbbf86c","userPhone":"17708659389"}
[2025-10-13 19:33:31][INFO] Server sending response (len=260): {"final_amount":4120.72,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"order_id":"c1760319315429_5051e99c4fbbf86c","status":1}
[2025-10-13 19:33:35][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:33:36][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:33:36][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:33:36][INFO] Server sending response (len=300): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"98?95?88!","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:36][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"98?95?88!","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:36][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:33:36][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:33:37][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:33:37][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:33:37][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:33:37][INFO] Server sending response (len=300): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"98?95?88!","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:37][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"98?95?88!","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:37][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:33:37][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:33:40][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:33:41][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:33:41][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:33:41][INFO] Server sending response (len=300): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"98?95?88!","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:41][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"98?95?88!","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:41][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:33:41][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:33:41][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":4.055000000000007,"discount_policy":"95%off","final_amount":77.04499999999999,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:33:41][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":4.055000000000007,"discount_policy":"95%off","final_amount":77.04499999999999,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:33:41][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:33:42][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:33:42][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:33:43][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:33:43][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:33:43][INFO] Server sending response (len=297): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":4.06,"discount_policy":"95%off","final_amount":77.05,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:43][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":4.06,"discount_policy":"95%off","final_amount":77.05,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:43][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:33:43][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:33:43][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:33:43][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:33:43][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:33:43][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:33:43][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:33:43][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:33:49][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:33:49][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:33:49][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:33:49][INFO] Server sending response (len=297): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":4.06,"discount_policy":"95%off","final_amount":77.05,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:49][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":4.06,"discount_policy":"95%off","final_amount":77.05,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:49][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:33:49][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:33:57][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:33:57][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:33:57][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:33:57][INFO] Server sending response (len=297): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":4.06,"discount_policy":"95%off","final_amount":77.05,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:57][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":4.06,"discount_policy":"95%off","final_amount":77.05,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:57][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:33:57][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:33:58][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":0.0,"discount_policy":"","final_amount":81.1,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:33:58][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":0.0,"discount_policy":"","final_amount":81.1,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:33:58][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:33:58][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:33:58][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:33:59][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:33:59][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:33:59][INFO] Server sending response (len=291): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:59][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:33:59][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:33:59][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:33:59][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:33:59][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:33:59][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:33:59][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:33:59][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:33:59][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:34:00][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:34:00][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:34:00][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:34:00][INFO] Server sending response (len=291): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:34:00][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:34:00][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:34:00][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:34:02][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:34:02][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:34:02][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:34:02][INFO] Server sending response (len=291): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:34:02][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":8.11,"discount_policy":"","final_amount":72.99,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"shipping_address":"","total_amount":81.1,"user_phone":"17708659389"}
[2025-10-13 19:34:02][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=1
[2025-10-13 19:34:02][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:34:12][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=2, name=manbo, price=28.880000, qty=99
[2025-10-13 19:34:13][INFO] Server received request: ADD_TO_CART {"price":28.88,"productId":2,"productName":"manbo","quantity":99,"userPhone":"17708659389"}
[2025-10-13 19:34:13][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":28.88,"productId":2,"productName":"manbo","quantity":99,"userPhone":"17708659389"}
[2025-10-13 19:34:13][INFO] Server sending response (len=59): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"ok"}
[2025-10-13 19:34:13][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 19:34:13][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:34:13][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:34:14][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:34:14][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:34:14][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:14][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:14][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:14][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:34:14][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:34:14][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:14][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:34:14][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 19:34:14][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:34:14][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:34:14][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:34:14][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:34:16][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:34:16][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:34:16][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:34:16][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:16][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:16][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:16][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:34:16][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:34:18][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:34:18][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:34:18][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:34:18][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:18][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:18][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:18][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:34:18][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:34:20][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:34:20][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:34:20][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:34:20][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:20][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:20][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:20][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:34:20][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:34:25][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:34:25][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:34:25][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:34:25][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:26][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:26][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:26][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:34:26][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:34:26][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01099999999997,"discount_policy":"95%off","final_amount":2793.209,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:34:26][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01099999999997,"discount_policy":"95%off","final_amount":2793.209,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:34:26][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:34:27][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:34:27][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:34:27][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:34:27][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:34:27][INFO] Server sending response (len=385): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:27][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:27][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:27][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:34:27][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:34:27][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:27][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:34:27][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 19:34:28][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:34:28][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:34:28][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:34:28][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:34:28][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:34:28][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:34:28][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:34:28][INFO] Server sending response (len=385): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:28][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:28][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:28][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:34:28][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:34:28][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":0.0,"discount_policy":"","final_amount":2940.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:34:28][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":0.0,"discount_policy":"","final_amount":2940.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:34:28][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:34:29][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:34:29][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:34:30][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:34:30][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:34:30][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:30][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:30][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:30][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:34:30][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:34:30][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:30][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:34:30][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 19:34:30][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:34:30][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:34:30][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:34:30][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:34:31][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:34:31][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:34:31][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:34:31][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:31][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:31][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:31][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:34:31][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:34:34][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:34:34][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:34:34][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:34:34][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:34][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:34][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:34][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:34:34][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:34:34][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01099999999997,"discount_policy":"95%off","final_amount":2793.209,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:34:34][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01099999999997,"discount_policy":"95%off","final_amount":2793.209,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:34:34][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:34:35][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:34:35][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:34:36][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:34:36][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:34:36][INFO] Server sending response (len=385): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:36][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:36][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:36][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:34:36][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:34:36][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:36][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:34:36][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 19:34:36][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:34:36][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:34:36][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:34:36][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:34:37][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:34:37][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:34:37][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:34:37][INFO] Server sending response (len=385): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:37][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:34:37][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:34:37][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:34:37][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:35:39][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:35:39][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:35:39][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:35:39][INFO] Server sending response (len=385): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:39][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:39][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:35:39][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:35:39][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:35:40][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":2652.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"},"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:35:40][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":2652.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"},"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:35:40][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:35:40][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:35:40][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:35:41][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:35:41][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:35:41][INFO] Server sending response (len=391): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":2652.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:41][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":2652.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:41][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:35:41][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:35:41][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:35:41][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:35:41][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:35:41][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 19:35:41][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:35:41][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:35:41][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:35:41][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:35:41][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:35:42][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:35:42][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:35:42][INFO] Server sending response (len=391): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":2652.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:42][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":2652.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:42][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:35:42][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:35:42][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:35:47][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:35:47][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:35:47][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:35:47][INFO] Server sending response (len=391): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":2652.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:48][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":288.0,"discount_policy":"满1999减288","final_amount":2652.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:48][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:35:48][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:35:48][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:35:48][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.8263999999999,"discount_policy":"98?95?88!","final_amount":2587.3936,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:35:48][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.8263999999999,"discount_policy":"98?95?88!","final_amount":2587.3936,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_a...(truncated)
[2025-10-13 19:35:48][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:35:49][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:35:49][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:35:49][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:35:49][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:35:49][INFO] Server sending response (len=388): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:49][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:49][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:35:49][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:35:49][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:35:49][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:35:49][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:35:49][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 19:35:49][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:35:49][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:35:49][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:35:49][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:35:50][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:35:50][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:35:50][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:35:50][INFO] Server sending response (len=388): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:50][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:50][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:35:50][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:35:50][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:35:55][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:35:55][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:35:55][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:35:55][INFO] Server sending response (len=388): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:56][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:56][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:35:56][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:35:56][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:35:56][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":30.0,"discount_policy":"满200减30","final_amount":2910.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"},"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:35:56][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":30.0,"discount_policy":"满200减30","final_amount":2910.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"},"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:35:56][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:35:56][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:35:56][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:35:57][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:35:57][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:35:57][INFO] Server sending response (len=388): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":30.0,"discount_policy":"满200减30","final_amount":2910.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:57][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":30.0,"discount_policy":"满200减30","final_amount":2910.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:57][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:35:57][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:35:57][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:35:57][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:35:57][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:35:57][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 19:35:57][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:35:57][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:35:57][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:35:57][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:35:58][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:35:58][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:35:58][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:35:58][INFO] Server sending response (len=388): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":30.0,"discount_policy":"满200减30","final_amount":2910.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:58][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":30.0,"discount_policy":"满200减30","final_amount":2910.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:35:58][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:35:58][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:35:58][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:36:04][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:36:04][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:36:04][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:36:04][INFO] Server sending response (len=388): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":30.0,"discount_policy":"满200减30","final_amount":2910.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:05][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":30.0,"discount_policy":"满200减30","final_amount":2910.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:05][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:05][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:36:05][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:36:05][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01099999999997,"discount_policy":"95%off","final_amount":2793.209,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:36:05][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01099999999997,"discount_policy":"95%off","final_amount":2793.209,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:36:05][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:36:06][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:36:06][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:36:06][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:36:06][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:36:06][INFO] Server sending response (len=385): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:06][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:06][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:06][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:36:06][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:36:06][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:06][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:36:06][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 19:36:06][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:36:06][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:36:06][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:36:07][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:36:07][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:36:07][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:36:07][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:36:07][INFO] Server sending response (len=385): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:07][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:07][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:07][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:36:07][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:36:12][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:36:13][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:36:13][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:36:13][INFO] Server sending response (len=385): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:13][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":147.01,"discount_policy":"95%off","final_amount":2793.21,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:13][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:13][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:36:13][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:36:13][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":0.0,"discount_policy":"","final_amount":2940.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:36:13][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":0.0,"discount_policy":"","final_amount":2940.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:36:13][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:36:14][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:36:14][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:36:14][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:36:14][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:36:14][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:14][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:14][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:14][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:36:14][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:36:14][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:14][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:36:14][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 19:36:15][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:36:15][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:36:15][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:36:15][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:36:15][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:36:15][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:36:15][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:36:15][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:15][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:15][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:15][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:36:15][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:36:22][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:36:22][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:36:22][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:36:22][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:22][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:22][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:22][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:36:22][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:36:22][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.8263999999999,"discount_policy":"98?95?88!","final_amount":2587.3936,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:36:22][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.8263999999999,"discount_policy":"98?95?88!","final_amount":2587.3936,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_a...(truncated)
[2025-10-13 19:36:22][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:36:23][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:36:23][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:36:24][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:36:24][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:36:24][INFO] Server sending response (len=388): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:24][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:24][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:24][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:36:24][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:36:24][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:24][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:36:24][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 19:36:24][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:36:24][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:36:24][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:36:24][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:36:24][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:36:25][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:36:25][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:36:25][INFO] Server sending response (len=388): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:25][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:25][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:25][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:36:25][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:36:46][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:36:47][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:36:47][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:36:47][INFO] Server sending response (len=388): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:47][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:47][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:47][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:36:47][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:36:47][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":0.0,"discount_policy":"","final_amount":2940.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:36:47][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":0.0,"discount_policy":"","final_amount":2940.22,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:36:47][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:36:48][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:36:48][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:36:49][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:36:49][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:36:49][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:49][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:49][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:49][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:36:49][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:36:49][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:49][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:36:49][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 19:36:49][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:36:49][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:36:49][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:36:49][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:36:49][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:36:49][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:36:49][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:36:49][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:49][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:36:49][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:36:49][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:36:49][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:37:04][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:37:04][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:37:04][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:37:04][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:37:04][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:37:04][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:37:04][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:37:04][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:37:13][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:37:13][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:37:13][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:37:13][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:37:13][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:37:13][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:37:13][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:37:13][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:38:11][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:38:12][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:38:12][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:38:12][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:38:12][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:38:12][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:38:12][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:38:12][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:38:15][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:38:15][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:38:15][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:38:15][INFO] Server sending response (len=378): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:38:16][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:38:16][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:38:16][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:38:16][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:38:16][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.8263999999999,"discount_policy":"98?95?88!","final_amount":2587.3936,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:38:16][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.8263999999999,"discount_policy":"98?95?88!","final_amount":2587.3936,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_a...(truncated)
[2025-10-13 19:38:16][INFO] Server sending response (len=62): {"cart_id":"c1760353307555_a1f93edb4afaa565","result":"saved"}
[2025-10-13 19:38:17][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:38:17][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:38:17][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:38:17][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:38:17][INFO] Server sending response (len=388): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:38:17][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:38:17][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:38:17][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:38:17][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:38:17][INFO] UserWindow::refreshCart: got cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:38:17][INFO] UserWindow::refreshCart: item 0 good_id=4, name=dingdongji, qty=10, subtotal=81.100000
[2025-10-13 19:38:17][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=99, subtotal=2859.120000
[2025-10-13 19:38:17][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:38:17][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:38:17][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:38:18][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:38:18][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:38:18][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:38:18][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:38:18][INFO] Server sending response (len=388): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:38:18][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:38:18][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:38:18][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:38:18][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:38:20][INFO] UserWindow::onCheckout called
[2025-10-13 19:38:20][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:38:20][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:38:20][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:38:20][INFO] Server sending response (len=388): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:38:20][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":352.83,"discount_policy":"98?95?88!","final_amount":2587.39,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:38:20][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:38:20][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:38:20][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:38:21][INFO] UserWindow::onCheckout: using cart.cart_id as order id: c1760353307555_a1f93edb4afaa565
[2025-10-13 19:38:21][INFO] Server received request: UPDATE_CART_FOR_PROMOTIONS 17708659389
[2025-10-13 19:38:21][INFO] Server::SERprocessRequest: cmd=UPDATE_CART_FOR_PROMOTIONS payload=17708659389
[2025-10-13 19:38:21][INFO] Server SERupdateCartForPromotions: updated cart for userPhone=17708659389 original=2940.220000 final=2646.198000
[2025-10-13 19:38:21][INFO] Server sending response (len=106): {"discount_amount":294.02199999999993,"final_amount":2646.198,"original_total":2940.22,"result":"updated"}
[2025-10-13 19:38:21][INFO] UserWindow::onCheckout CLTupdateCartForPromotions returned true
[2025-10-13 19:38:21][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:38:22][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:38:22][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:38:22][INFO] Server sending response (len=387): {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"98?95?88!","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:38:22][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760353307555_a1f93edb4afaa565","discount_amount":294.02,"discount_policy":"98?95?88!","final_amount":2646.2,"is_converted":true,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12}],"shipping_address":"","total_amount":2940.22,"user_phone":"17708659389"}
[2025-10-13 19:38:22][INFO] CLTgetCartForUser: parsed cart_id=c1760353307555_a1f93edb4afaa565, items=2
[2025-10-13 19:38:22][INFO] CLTgetCartForUser: item[0] good_id=4, name=dingdongji, price=8.110000, qty=10, subtotal=81.100000
[2025-10-13 19:38:22][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=99, subtotal=2859.120000
[2025-10-13 19:38:22][INFO] UserWindow::onCheckout: detected updated cart from server
[2025-10-13 19:38:22][INFO] UserWindow::onCheckout: sending order c1760353307555_a1f93edb4afaa565 for user 17708659389
[2025-10-13 19:38:22][INFO] Server received request: ADD_SETTLED_ORDER {"discountPolicy":"98?95?88!","discount_amount":294.02,"final_amount":2646.2,"items":[{"price":8.11,"productId":4,"productName":"dingdongji","quantity":10,"subtotal":81.1},{"price":28.88,"productId":2,"productName":"manbo","quantity":99,"subtotal":2859.12}],"orderId":"c1760353307555_a1f93edb4afaa565","shipping_address":"","status":1,"total_amount":2940.22,"userPhone":"17708659389"}
[2025-10-13 19:38:22][INFO] Server::SERprocessRequest: cmd=ADD_SETTLED_ORDER payload={"discountPolicy":"98?95?88!","discount_amount":294.02,"final_amount":2646.2,"items":[{"price":8.11,"productId":4,"productName":"dingdongji","quantity":10,"subtotal":81.1},{"price":28.88,"productId":2,"productName":"manbo","quantity":99,"subtotal":2859.12}],"orderId":"c1760353307555_a1f93edb4afaa565","shipping_address":"","status":1,"total_amount":2940.22,"userPhone":"17708659389"}
[2025-10-13 19:38:22][INFO] Server SERaddSettledOrder: 减库存 good_id=4 -> 406
[2025-10-13 19:38:22][INFO] Server SERaddSettledOrder: 减库存 good_id=2 -> 114173
[2025-10-13 19:38:22][INFO] Server sending response (len=63): {"order_id":"c1760353307555_a1f93edb4afaa565","result":"added"}
[2025-10-13 19:38:22][INFO] UserWindow::onCheckout CLTaddSettledOrder returned true
[2025-10-13 19:38:22][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:38:22][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 19:38:22][INFO] Server sending response (len=62): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","result":"saved"}
[2025-10-13 19:38:23][INFO] UserWindow::onCheckout CLTsaveCartForUser returned true
[2025-10-13 19:38:23][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:38:23][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:38:24][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:38:24][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:38:24][INFO] Server sending response (len=206): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:38:24][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:38:24][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:38:24][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:38:24][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:38:24][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:38:24][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:38:24][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:38:24][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 19:38:24][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 19:38:24][INFO] Server sending response (len=1128): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":2646.2,"order_id":"c1760353307555_a1f93edb4afaa565","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659...(truncated)
[2025-10-13 19:38:30][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 19:38:30][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 19:38:30][INFO] Server sending response (len=1128): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":2646.2,"order_id":"c1760353307555_a1f93edb4afaa565","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659...(truncated)
[2025-10-13 19:38:36][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760353307555_a1f93edb4afaa565","userPhone":"17708659389"}
[2025-10-13 19:38:36][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760353307555_a1f93edb4afaa565","userPhone":"17708659389"}
[2025-10-13 19:38:36][INFO] Server sending response (len=252): {"final_amount":2646.2,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"order_id":"c1760353307555_a1f93edb4afaa565","status":1}
[2025-10-13 19:44:07][INFO] 应用启动
[2025-10-13 19:44:07][INFO] Server: DatabaseManager 已连接。
[2025-10-13 19:44:07][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 19:44:07][INFO] Client 已连接到 Server
[2025-10-13 19:44:08][INFO] DatabaseManager::connect() called.

[2025-10-13 19:44:08][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 19:44:16][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 19:44:16][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 19:44:16][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 19:44:16][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 19:44:17][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:44:17][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:44:17][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:44:17][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:44:17][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 19:44:17][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 19:44:17][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 19:44:17][INFO] Server SERgetAllGoods: dbManager ptr = 1828776346176, DTBisConnected=true
[2025-10-13 19:44:17][INFO] DTBloadAllGoods: this=000001A9CB908240 connection_=000001A9CB9A5330 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 19:44:17][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 19:44:17][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:44:17][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 19:44:17][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:44:17][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:44:17][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:44:17][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:44:17][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:44:17][INFO] Server sending response (len=206): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:44:18][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:44:18][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:44:18][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:44:18][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:44:18][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:44:18][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:44:18][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:44:18][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 19:44:18][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 19:44:18][INFO] Server sending response (len=1128): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":2646.2,"order_id":"c1760353307555_a1f93edb4afaa565","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659...(truncated)
[2025-10-13 19:44:18][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 19:44:18][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 19:44:18][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 19:44:18][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 19:44:30][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 19:44:30][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 19:44:30][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 19:44:30][INFO] Server SERgetAllGoods: dbManager ptr = 1828776346176, DTBisConnected=true
[2025-10-13 19:44:30][INFO] DTBloadAllGoods: this=000001A9CB908240 connection_=000001A9CB9A5330 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 19:44:30][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 19:44:30][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:44:30][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 19:44:30][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:44:35][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=5, name=ikun, price=2.500000, qty=100
[2025-10-13 19:44:35][INFO] Server received request: ADD_TO_CART {"price":2.5,"productId":5,"productName":"ikun","quantity":100,"userPhone":"17708659389"}
[2025-10-13 19:44:35][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":2.5,"productId":5,"productName":"ikun","quantity":100,"userPhone":"17708659389"}
[2025-10-13 19:44:35][WARN] Server 收到未知请求: ADD_TO_CART {"price":2.5,"productId":5,"productName":"ikun","quantity":100,"userPhone":"17708659389"}
[2025-10-13 19:44:35][INFO] Server sending response (len=155): {"error":"UNKNOWN_COMMAND","request":"ADD_TO_CART {\"price\":2.5,\"productId\":5,\"productName\":\"ikun\",\"quantity\":100,\"userPhone\":\"17708659389\"}"}
[2025-10-13 19:44:36][FAIL] ADD_TO_CART 返回错误: {"error":"UNKNOWN_COMMAND","request":"ADD_TO_CART {\"price\":2.5,\"productId\":5,\"productName\":\"ikun\",\"quantity\":100,\"userPhone\":\"17708659389\"}"}
[2025-10-13 19:44:36][INFO] UserWindow::onAddToCart CLTaddToCart returned false
[2025-10-13 19:44:41][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:44:41][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:44:41][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:44:41][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:44:41][INFO] Server sending response (len=206): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:44:41][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:44:41][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:44:41][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:44:42][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:44:42][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:44:42][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:44:42][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:44:46][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=1, name=hyw, price=9.990000, qty=100
[2025-10-13 19:44:46][INFO] Server received request: ADD_TO_CART {"price":9.99,"productId":1,"productName":"hyw","quantity":100,"userPhone":"17708659389"}
[2025-10-13 19:44:46][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":9.99,"productId":1,"productName":"hyw","quantity":100,"userPhone":"17708659389"}
[2025-10-13 19:44:46][WARN] Server 收到未知请求: ADD_TO_CART {"price":9.99,"productId":1,"productName":"hyw","quantity":100,"userPhone":"17708659389"}
[2025-10-13 19:44:46][INFO] Server sending response (len=155): {"error":"UNKNOWN_COMMAND","request":"ADD_TO_CART {\"price\":9.99,\"productId\":1,\"productName\":\"hyw\",\"quantity\":100,\"userPhone\":\"17708659389\"}"}
[2025-10-13 19:44:46][FAIL] ADD_TO_CART 返回错误: {"error":"UNKNOWN_COMMAND","request":"ADD_TO_CART {\"price\":9.99,\"productId\":1,\"productName\":\"hyw\",\"quantity\":100,\"userPhone\":\"17708659389\"}"}
[2025-10-13 19:44:46][INFO] UserWindow::onAddToCart CLTaddToCart returned false
[2025-10-13 19:44:47][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:44:47][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:44:47][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:44:47][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:44:47][INFO] Server sending response (len=206): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:44:48][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:44:48][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:44:48][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:44:48][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:44:48][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:44:48][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:44:48][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:45:55][INFO] 应用启动
[2025-10-13 19:45:55][INFO] Server: DatabaseManager 已连接。
[2025-10-13 19:45:55][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 19:45:56][INFO] Client 已连接到 Server
[2025-10-13 19:45:56][INFO] DatabaseManager::connect() called.

[2025-10-13 19:45:56][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 19:46:04][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 19:46:04][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 19:46:04][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 19:46:04][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 19:46:04][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:46:04][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:46:04][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:46:04][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:46:05][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 19:46:05][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 19:46:05][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 19:46:05][INFO] Server SERgetAllGoods: dbManager ptr = 1883920985152, DTBisConnected=true
[2025-10-13 19:46:05][INFO] DTBloadAllGoods: this=000001B6A270EC40 connection_=000001B6A278F5C0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 19:46:05][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 19:46:05][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:46:05][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 19:46:05][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:46:05][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:46:05][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:46:05][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:46:05][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:46:05][INFO] Server sending response (len=206): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:46:05][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:46:05][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:46:05][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:46:05][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:46:05][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:46:05][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:46:05][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:46:06][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 19:46:06][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 19:46:06][INFO] Server sending response (len=1128): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":2646.2,"order_id":"c1760353307555_a1f93edb4afaa565","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659...(truncated)
[2025-10-13 19:46:06][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 19:46:06][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 19:46:06][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 19:46:06][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 19:46:14][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=6, name=野火哈基米, price=66.400000, qty=10
[2025-10-13 19:46:14][INFO] Server received request: ADD_TO_CART {"price":66.4,"productId":6,"productName":"野火哈基米","quantity":10,"userPhone":"17708659389"}
[2025-10-13 19:46:14][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":66.4,"productId":6,"productName":"野火哈基米","quantity":10,"userPhone":"17708659389"}
[2025-10-13 19:46:14][WARN] Server 收到未知请求: ADD_TO_CART {"price":66.4,"productId":6,"productName":"野火哈基米","quantity":10,"userPhone":"17708659389"}
[2025-10-13 19:46:14][INFO] Server sending response (len=166): {"error":"UNKNOWN_COMMAND","request":"ADD_TO_CART {\"price\":66.4,\"productId\":6,\"productName\":\"野火哈基米\",\"quantity\":10,\"userPhone\":\"17708659389\"}"}
[2025-10-13 19:46:14][FAIL] ADD_TO_CART 返回错误: {"error":"UNKNOWN_COMMAND","request":"ADD_TO_CART {\"price\":66.4,\"productId\":6,\"productName\":\"野火哈基米\",\"quantity\":10,\"userPhone\":\"17708659389\"}"}
[2025-10-13 19:46:14][INFO] UserWindow::onAddToCart CLTaddToCart returned false
[2025-10-13 19:46:15][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:46:15][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:46:16][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:46:16][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:46:16][INFO] Server sending response (len=206): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:46:16][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:46:16][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:46:16][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:46:16][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:46:16][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:46:16][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:46:16][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:46:25][INFO] DatabaseManager::disconnect() called.

[2025-10-13 19:46:25][INFO] 应用退出

[2025-10-13 19:46:25][INFO] DatabaseManager::disconnect() called.

[2025-10-13 19:50:08][INFO] 应用启动
[2025-10-13 19:50:09][INFO] Server: DatabaseManager 已连接。
[2025-10-13 19:50:09][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 19:50:09][INFO] Client 已连接到 Server
[2025-10-13 19:50:09][INFO] DatabaseManager::connect() called.

[2025-10-13 19:50:09][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 19:50:17][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 19:50:17][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 19:50:17][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 19:50:17][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 19:50:18][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:50:18][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:50:18][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:50:18][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:50:18][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 19:50:18][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 19:50:18][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 19:50:18][INFO] Server SERgetAllGoods: dbManager ptr = 2686456468240, DTBisConnected=true
[2025-10-13 19:50:18][INFO] DTBloadAllGoods: this=000002717D489310 connection_=000002717D51FF00 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 19:50:18][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 19:50:18][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:50:18][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 19:50:18][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:50:18][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:50:18][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:50:18][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:50:18][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:50:18][INFO] Server sending response (len=206): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:50:18][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:50:18][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:50:18][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:50:19][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:50:19][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:50:19][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:50:19][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:50:19][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 19:50:19][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 19:50:19][INFO] Server sending response (len=1128): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":2646.2,"order_id":"c1760353307555_a1f93edb4afaa565","status":1,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659...(truncated)
[2025-10-13 19:50:19][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 19:50:19][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 19:50:19][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 19:50:19][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 19:50:27][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=7, name=ハチミ, price=78.000000, qty=1
[2025-10-13 19:50:27][INFO] Server received request: ADD_TO_CART {"price":78.0,"productId":7,"productName":"ハチミ","quantity":1,"userPhone":"17708659389"}
[2025-10-13 19:50:27][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":78.0,"productId":7,"productName":"ハチミ","quantity":1,"userPhone":"17708659389"}
[2025-10-13 19:50:27][WARN] Server 收到未知请求: ADD_TO_CART {"price":78.0,"productId":7,"productName":"ハチミ","quantity":1,"userPhone":"17708659389"}
[2025-10-13 19:50:27][INFO] Server sending response (len=159): {"error":"UNKNOWN_COMMAND","request":"ADD_TO_CART {\"price\":78.0,\"productId\":7,\"productName\":\"ハチミ\",\"quantity\":1,\"userPhone\":\"17708659389\"}"}
[2025-10-13 19:50:27][FAIL] ADD_TO_CART 返回错误: {"error":"UNKNOWN_COMMAND","request":"ADD_TO_CART {\"price\":78.0,\"productId\":7,\"productName\":\"ハチミ\",\"quantity\":1,\"userPhone\":\"17708659389\"}"}
[2025-10-13 19:50:27][INFO] UserWindow::onAddToCart CLTaddToCart returned false
[2025-10-13 19:50:31][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 19:50:31][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 19:50:32][INFO] Server received request: GET_CART 17708659389
[2025-10-13 19:50:32][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 19:50:32][INFO] Server sending response (len=206): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:50:32][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 19:50:32][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:50:32][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 19:50:32][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:50:32][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:50:32][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:50:32][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:53:53][INFO] 应用启动
[2025-10-13 19:53:53][INFO] Server: DatabaseManager 已连接。
[2025-10-13 19:53:53][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 19:53:53][INFO] Client 已连接到 Server
[2025-10-13 19:53:53][INFO] DatabaseManager::connect() called.

[2025-10-13 19:53:53][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 19:53:58][INFO] 管理员登录成功，打开管理员窗口
[2025-10-13 19:53:58][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 19:53:58][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 19:53:58][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 19:53:58][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 19:53:59][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 19:53:59][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 19:53:59][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 19:53:59][INFO] Server SERgetAllGoods: dbManager ptr = 1952102962512, DTBisConnected=true
[2025-10-13 19:53:59][INFO] DTBloadAllGoods: this=000001C682675550 connection_=000001C68271A970 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 19:53:59][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 19:53:59][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:53:59][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 19:53:59][INFO] Server sending response (len=418): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":199}]
[2025-10-13 19:53:59][INFO] Server received request: GET_ALL_ORDERS {}
[2025-10-13 19:53:59][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={}
[2025-10-13 19:53:59][INFO] Server sending response (len=1128): [{"final_amount":531.2,"order_id":"o1760278421449_8022398a","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":2646.2,"order_id":"c1760353307555_a1f93edb4afaa565","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"f...(truncated)
[2025-10-13 19:53:59][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:53:59][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:53:59][INFO] Server sending response (len=589): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"2","name":"90%off","policy":{"discount":0.9,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:54:00][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:54:00][INFO] AdminWindow::refreshPromotions loaded 5 promotions
[2025-10-13 19:54:31][INFO] Server received request: DELETE_PROMOTION {"name":"90%off"}
[2025-10-13 19:54:31][INFO] Server::SERprocessRequest: cmd=DELETE_PROMOTION payload={"name":"90%off"}
[2025-10-13 19:54:31][INFO] Server sending response (len=36): {"name":"90%off","result":"deleted"}
[2025-10-13 19:54:32][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:54:32][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:54:32][INFO] Server sending response (len=501): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}}]
[2025-10-13 19:54:32][INFO] CLTgetAllPromotionsRaw: loaded 4 promotions
[2025-10-13 19:54:32][INFO] AdminWindow::refreshPromotions loaded 4 promotions
[2025-10-13 19:54:51][INFO] Server received request: ADD_PROMOTION {"name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:54:51][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:54:51][INFO] Server sending response (len=34): {"name":"230-11","result":"added"}
[2025-10-13 19:54:52][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:54:52][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:54:52][INFO] Server sending response (len=612): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}}]
[2025-10-13 19:54:53][INFO] CLTgetAllPromotionsRaw: loaded 5 promotions
[2025-10-13 19:54:53][INFO] AdminWindow::refreshPromotions loaded 5 promotions
[2025-10-13 19:54:59][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760319315429_5051e99c4fbbf86c","userPhone":"17708659389"}
[2025-10-13 19:54:59][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760319315429_5051e99c4fbbf86c","userPhone":"17708659389"}
[2025-10-13 19:54:59][INFO] Server sending response (len=260): {"final_amount":4120.72,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"order_id":"c1760319315429_5051e99c4fbbf86c","status":1}
[2025-10-13 19:55:30][INFO] Server received request: UPDATE_GOOD {"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1119}
[2025-10-13 19:55:30][INFO] Server::SERprocessRequest: cmd=UPDATE_GOOD payload={"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1119}
[2025-10-13 19:55:30][INFO] Server SERupdateGoods: 更新成功，返回JSON内容: {"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1119}
[2025-10-13 19:55:30][INFO] Server SERupdateGoods: 已写入 localJSONOutPut.json
[2025-10-13 19:55:30][INFO] Server sending response (len=69): {"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1119}
[2025-10-13 19:55:32][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 19:55:32][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 19:55:32][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 19:55:32][INFO] Server SERgetAllGoods: dbManager ptr = 1952102962512, DTBisConnected=true
[2025-10-13 19:55:32][INFO] DTBloadAllGoods: this=000001C682675550 connection_=000001C68271A970 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 19:55:32][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 19:55:32][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1119}]
[2025-10-13 19:55:32][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 19:55:32][INFO] Server sending response (len=419): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":151},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1119}]
[2025-10-13 19:55:41][INFO] Server received request: UPDATE_GOOD {"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15100}
[2025-10-13 19:55:41][INFO] Server::SERprocessRequest: cmd=UPDATE_GOOD payload={"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15100}
[2025-10-13 19:55:41][INFO] Server SERupdateGoods: 更新成功，返回JSON内容: {"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15100}
[2025-10-13 19:55:41][INFO] Server SERupdateGoods: 已写入 localJSONOutPut.json
[2025-10-13 19:55:41][INFO] Server sending response (len=64): {"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15100}
[2025-10-13 19:55:43][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 19:55:43][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 19:55:43][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 19:55:43][INFO] Server SERgetAllGoods: dbManager ptr = 1952102962512, DTBisConnected=true
[2025-10-13 19:55:43][INFO] DTBloadAllGoods: this=000001C682675550 connection_=000001C68271A970 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 19:55:43][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 19:55:43][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15100},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1119}]
[2025-10-13 19:55:43][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 19:55:43][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15100},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1119}]
[2025-10-13 19:55:48][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760229692248_44fe7ebe71b0aabe","userPhone":"17708659389"}
[2025-10-13 19:55:48][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760229692248_44fe7ebe71b0aabe","userPhone":"17708659389"}
[2025-10-13 19:55:48][INFO] Server sending response (len=166): {"final_amount":989.01,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1}
[2025-10-13 19:55:58][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"o1760278421449_8022398a","userPhone":"17708659389"}
[2025-10-13 19:55:58][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"o1760278421449_8022398a","userPhone":"17708659389"}
[2025-10-13 19:55:58][INFO] Server sending response (len=167): {"final_amount":531.2,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":8,"subtotal":531.2}],"order_id":"o1760278421449_8022398a","status":1}
[2025-10-13 19:55:58][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"o1760278421449_8022398a","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 19:55:58][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"o1760278421449_8022398a","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 19:55:58][INFO] Server SERdeleteSettledOrder: deleted order o1760278421449_8022398a
[2025-10-13 19:55:58][INFO] Server sending response (len=57): {"order_id":"o1760278421449_8022398a","result":"deleted"}
[2025-10-13 19:55:58][INFO] AdminWindow::onDeleteOrder CLTdeleteSettledOrder returned true
[2025-10-13 19:55:59][INFO] Server received request: GET_ALL_ORDERS {}
[2025-10-13 19:55:59][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={}
[2025-10-13 19:55:59][INFO] Server sending response (len=1030): [{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":40250.12,"order_id":"o1760276630056_16d52686","status":4,"user_phone":"17708659389"},{"final_amount":2646.2,"order_id":"c1760353307555_a1f93edb4afaa565","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659...(truncated)
[2025-10-13 19:56:06][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"o1760276630056_16d52686","userPhone":"17708659389"}
[2025-10-13 19:56:06][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"o1760276630056_16d52686","userPhone":"17708659389"}
[2025-10-13 19:56:06][INFO] Server sending response (len=413): {"final_amount":40250.12,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":999,"subtotal":28851.12},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":55,"subtotal":3652.0},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":99,"subtotal":7722.0}],"order_id":"o1760276630056_16d52686","status":4}
[2025-10-13 19:56:06][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"o1760276630056_16d52686","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 19:56:06][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"o1760276630056_16d52686","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 19:56:06][INFO] Server SERdeleteSettledOrder: deleted order o1760276630056_16d52686
[2025-10-13 19:56:06][INFO] Server sending response (len=57): {"order_id":"o1760276630056_16d52686","result":"deleted"}
[2025-10-13 19:56:06][INFO] AdminWindow::onDeleteOrder CLTdeleteSettledOrder returned true
[2025-10-13 19:56:07][INFO] Server received request: GET_ALL_ORDERS {}
[2025-10-13 19:56:07][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={}
[2025-10-13 19:56:07][INFO] Server sending response (len=929): [{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":2646.2,"order_id":"c1760353307555_a1f93edb4afaa565","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"}]
[2025-10-13 19:56:42][INFO] Server received request: ADD_PROMOTION {"name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:56:42][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:56:42][INFO] Server sending response (len=34): {"name":"330-20","result":"added"}
[2025-10-13 19:56:43][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:56:43][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:56:43][INFO] Server sending response (len=723): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}}]
[2025-10-13 19:56:43][INFO] CLTgetAllPromotionsRaw: loaded 6 promotions
[2025-10-13 19:56:43][INFO] AdminWindow::refreshPromotions loaded 6 promotions
[2025-10-13 19:57:13][INFO] Server received request: ADD_PROMOTION {"name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:57:13][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:57:13][INFO] Server sending response (len=34): {"name":"350-40","result":"added"}
[2025-10-13 19:57:14][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:57:14][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:57:14][INFO] Server sending response (len=834): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}}]
[2025-10-13 19:57:14][INFO] CLTgetAllPromotionsRaw: loaded 7 promotions
[2025-10-13 19:57:14][INFO] AdminWindow::refreshPromotions loaded 7 promotions
[2025-10-13 19:57:36][INFO] Server received request: ADD_PROMOTION {"name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:57:36][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:57:36][INFO] Server sending response (len=34): {"name":"950-66","result":"added"}
[2025-10-13 19:57:37][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:57:37][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:57:37][INFO] Server sending response (len=945): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":30.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}}]
[2025-10-13 19:57:38][INFO] CLTgetAllPromotionsRaw: loaded 8 promotions
[2025-10-13 19:57:38][INFO] AdminWindow::refreshPromotions loaded 8 promotions
[2025-10-13 19:57:58][INFO] Server received request: UPDATE_PROMOTION {"name":"满200减30","policy":{"reduce":16.0,"scope":"global","threshold":200.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:57:58][INFO] Server::SERprocessRequest: cmd=UPDATE_PROMOTION payload={"name":"满200减30","policy":{"reduce":16.0,"scope":"global","threshold":200.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:57:58][INFO] Server sending response (len=41): {"name":"满200减30","result":"updated"}
[2025-10-13 19:58:00][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:58:00][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:58:00][INFO] Server sending response (len=945): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":16.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}}]
[2025-10-13 19:58:00][INFO] CLTgetAllPromotionsRaw: loaded 8 promotions
[2025-10-13 19:58:00][INFO] AdminWindow::refreshPromotions loaded 8 promotions
[2025-10-13 19:58:03][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:58:03][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:58:03][INFO] Server sending response (len=945): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":16.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}}]
[2025-10-13 19:58:03][INFO] CLTgetAllPromotionsRaw: loaded 8 promotions
[2025-10-13 19:58:03][INFO] AdminWindow::refreshPromotions loaded 8 promotions
[2025-10-13 19:58:10][INFO] Server received request: UPDATE_PROMOTION {"name":"满200减30","policy":{"reduce":16.0,"scope":"global","threshold":200.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:58:10][INFO] Server::SERprocessRequest: cmd=UPDATE_PROMOTION payload={"name":"满200减30","policy":{"reduce":16.0,"scope":"global","threshold":200.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:58:10][INFO] Server sending response (len=41): {"name":"满200减30","result":"updated"}
[2025-10-13 19:58:11][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:58:11][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:58:11][INFO] Server sending response (len=1062): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":16.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"10","name":"满200减30","policy":{"reduce":16.0,"scope":"global","thres...(truncated)
[2025-10-13 19:58:12][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 19:58:12][INFO] AdminWindow::refreshPromotions loaded 9 promotions
[2025-10-13 19:58:56][INFO] Server received request: ADD_PROMOTION {"name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:58:56][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:58:56][INFO] Server sending response (len=34): {"name":"500-48","result":"added"}
[2025-10-13 19:58:57][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:58:57][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:58:57][INFO] Server sending response (len=1174): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":16.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"10","name":"满200减30","policy":{"reduce":16.0,"scope":"global","thres...(truncated)
[2025-10-13 19:58:57][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 19:58:57][INFO] AdminWindow::refreshPromotions loaded 10 promotions
[2025-10-13 19:59:26][INFO] Server received request: ADD_PROMOTION {"name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:59:26][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 19:59:26][INFO] Server sending response (len=34): {"name":"600-67","result":"added"}
[2025-10-13 19:59:27][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:59:27][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:59:27][INFO] Server sending response (len=1286): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"3","name":"满200减30","policy":{"reduce":16.0,"scope":"global","threshold":200.0,"type":"full_reduction"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"10","name":"满200减30","policy":{"reduce":16.0,"scope":"global","thres...(truncated)
[2025-10-13 19:59:27][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 19:59:27][INFO] AdminWindow::refreshPromotions loaded 11 promotions
[2025-10-13 19:59:53][INFO] Server received request: DELETE_PROMOTION {"name":"满200减30"}
[2025-10-13 19:59:53][INFO] Server::SERprocessRequest: cmd=DELETE_PROMOTION payload={"name":"满200减30"}
[2025-10-13 19:59:53][INFO] Server sending response (len=41): {"name":"满200减30","result":"deleted"}
[2025-10-13 19:59:55][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 19:59:55][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 19:59:55][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 19:59:55][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 19:59:55][INFO] AdminWindow::refreshPromotions loaded 9 promotions
[2025-10-13 19:59:58][INFO] AdminWindow::onReturnToIdentitySelection called
[2025-10-13 19:59:58][INFO] 收到 AdminWindow::backRequested，返回登录界面
[2025-10-13 19:59:58][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 20:00:11][INFO] 用户取消登录，退出应用
[2025-10-13 20:00:11][INFO] DatabaseManager::disconnect() called.

[2025-10-13 20:00:11][INFO] DatabaseManager::disconnect() called.

[2025-10-13 20:02:01][INFO] 应用启动
[2025-10-13 20:02:01][INFO] Server: DatabaseManager 已连接。
[2025-10-13 20:02:01][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 20:02:01][INFO] Client 已连接到 Server
[2025-10-13 20:02:01][INFO] DatabaseManager::connect() called.

[2025-10-13 20:02:01][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 20:02:09][INFO] 管理员登录成功，打开管理员窗口
[2025-10-13 20:02:09][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 20:02:09][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 20:02:09][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 20:02:09][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 20:02:10][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 20:02:10][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 20:02:10][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 20:02:10][INFO] Server SERgetAllGoods: dbManager ptr = 2094607823008, DTBisConnected=true
[2025-10-13 20:02:10][INFO] DTBloadAllGoods: this=000001E7B05AF0A0 connection_=000001E7B064AFF0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 20:02:10][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 20:02:10][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15100},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1119}]
[2025-10-13 20:02:10][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 20:02:10][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15100},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1119}]
[2025-10-13 20:02:10][INFO] Server received request: GET_ALL_ORDERS {}
[2025-10-13 20:02:10][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={}
[2025-10-13 20:02:10][INFO] Server sending response (len=929): [{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":2646.2,"order_id":"c1760353307555_a1f93edb4afaa565","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:02:10][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:02:10][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:02:10][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":288.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:02:10][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:02:10][INFO] AdminWindow::refreshPromotions loaded 9 promotions
[2025-10-13 20:02:27][INFO] Server received request: UPDATE_PROMOTION {"name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 20:02:27][INFO] Server::SERprocessRequest: cmd=UPDATE_PROMOTION payload={"name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"},"type":"full_reduction"}
[2025-10-13 20:02:27][INFO] Server sending response (len=43): {"name":"满1999减288","result":"updated"}
[2025-10-13 20:02:28][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:02:28][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:02:28][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:02:28][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:02:28][INFO] AdminWindow::refreshPromotions loaded 9 promotions
[2025-10-13 20:02:52][INFO] AdminWindow::onReturnToIdentitySelection called
[2025-10-13 20:02:52][INFO] 收到 AdminWindow::backRequested，返回登录界面
[2025-10-13 20:02:52][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 20:02:59][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 20:02:59][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 20:02:59][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 20:02:59][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 20:02:59][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:02:59][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:02:59][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:02:59][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:02:59][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 20:02:59][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 20:02:59][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 20:02:59][INFO] Server SERgetAllGoods: dbManager ptr = 2094607823008, DTBisConnected=true
[2025-10-13 20:02:59][INFO] DTBloadAllGoods: this=000001E7B05AF0A0 connection_=000001E7B064AFF0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 20:02:59][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 20:02:59][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15100},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1119}]
[2025-10-13 20:02:59][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 20:02:59][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":785},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114173},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15100},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1119}]
[2025-10-13 20:03:00][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:03:00][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:00][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:00][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:00][INFO] Server sending response (len=206): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 20:03:00][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 20:03:00][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 20:03:00][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=0
[2025-10-13 20:03:00][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:03:00][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:03:00][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:03:00][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:03:00][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:03:00][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:03:00][INFO] Server sending response (len=929): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":2646.2,"order_id":"c1760353307555_a1f93edb4afaa565","status":1,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:03:01][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 20:03:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 20:03:01][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 20:03:01][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 20:03:05][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=1, name=hyw, price=9.990000, qty=1
[2025-10-13 20:03:05][INFO] Server received request: ADD_TO_CART {"price":9.99,"productId":1,"productName":"hyw","quantity":1,"userPhone":"17708659389"}
[2025-10-13 20:03:05][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":9.99,"productId":1,"productName":"hyw","quantity":1,"userPhone":"17708659389"}
[2025-10-13 20:03:05][INFO] Server sending response (len=59): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","result":"ok"}
[2025-10-13 20:03:05][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 20:03:06][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:03:06][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:06][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:06][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:06][INFO] Server sending response (len=281): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.5,"discount_policy":"","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 20:03:07][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.5,"discount_policy":"","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 20:03:07][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=1
[2025-10-13 20:03:07][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:07][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=1
[2025-10-13 20:03:07][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 20:03:07][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:03:07][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:03:07][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:03:07][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:03:12][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=2, name=manbo, price=28.880000, qty=2
[2025-10-13 20:03:13][INFO] Server received request: ADD_TO_CART {"price":28.88,"productId":2,"productName":"manbo","quantity":2,"userPhone":"17708659389"}
[2025-10-13 20:03:13][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":28.88,"productId":2,"productName":"manbo","quantity":2,"userPhone":"17708659389"}
[2025-10-13 20:03:13][INFO] Server sending response (len=59): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","result":"ok"}
[2025-10-13 20:03:13][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 20:03:13][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:03:13][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:14][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:14][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:14][INFO] Server sending response (len=362): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":3.39,"discount_policy":"","final_amount":64.36,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76}],"shipping_address":"","total_amount":67.75,"user_phone":"17708659389"}
[2025-10-13 20:03:14][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":3.39,"discount_policy":"","final_amount":64.36,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76}],"shipping_address":"","total_amount":67.75,"user_phone":"17708659389"}
[2025-10-13 20:03:14][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=2
[2025-10-13 20:03:14][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:14][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:03:14][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=2
[2025-10-13 20:03:14][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 20:03:14][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 20:03:14][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:03:14][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:03:14][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:03:14][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:03:16][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:16][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:16][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:16][INFO] Server sending response (len=362): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":3.39,"discount_policy":"","final_amount":64.36,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76}],"shipping_address":"","total_amount":67.75,"user_phone":"17708659389"}
[2025-10-13 20:03:16][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":3.39,"discount_policy":"","final_amount":64.36,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76}],"shipping_address":"","total_amount":67.75,"user_phone":"17708659389"}
[2025-10-13 20:03:16][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=2
[2025-10-13 20:03:16][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:16][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:03:18][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:18][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:18][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:18][INFO] Server sending response (len=362): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":3.39,"discount_policy":"","final_amount":64.36,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76}],"shipping_address":"","total_amount":67.75,"user_phone":"17708659389"}
[2025-10-13 20:03:18][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":3.39,"discount_policy":"","final_amount":64.36,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76}],"shipping_address":"","total_amount":67.75,"user_phone":"17708659389"}
[2025-10-13 20:03:18][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=2
[2025-10-13 20:03:18][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:18][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:03:25][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:25][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:25][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:25][INFO] Server sending response (len=362): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":3.39,"discount_policy":"","final_amount":64.36,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76}],"shipping_address":"","total_amount":67.75,"user_phone":"17708659389"}
[2025-10-13 20:03:25][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":3.39,"discount_policy":"","final_amount":64.36,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76}],"shipping_address":"","total_amount":67.75,"user_phone":"17708659389"}
[2025-10-13 20:03:25][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=2
[2025-10-13 20:03:25][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:25][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:03:26][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:26][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:26][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:26][INFO] Server sending response (len=362): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":3.39,"discount_policy":"","final_amount":64.36,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76}],"shipping_address":"","total_amount":67.75,"user_phone":"17708659389"}
[2025-10-13 20:03:27][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":3.39,"discount_policy":"","final_amount":64.36,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76}],"shipping_address":"","total_amount":67.75,"user_phone":"17708659389"}
[2025-10-13 20:03:27][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=2
[2025-10-13 20:03:27][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:27][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:03:29][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:29][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:29][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:29][INFO] Server sending response (len=362): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":3.39,"discount_policy":"","final_amount":64.36,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76}],"shipping_address":"","total_amount":67.75,"user_phone":"17708659389"}
[2025-10-13 20:03:29][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":3.39,"discount_policy":"","final_amount":64.36,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76}],"shipping_address":"","total_amount":67.75,"user_phone":"17708659389"}
[2025-10-13 20:03:29][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=2
[2025-10-13 20:03:29][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:29][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:03:40][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=7, name=ハチミ, price=78.000000, qty=3
[2025-10-13 20:03:40][INFO] Server received request: ADD_TO_CART {"price":78.0,"productId":7,"productName":"ハチミ","quantity":3,"userPhone":"17708659389"}
[2025-10-13 20:03:40][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":78.0,"productId":7,"productName":"ハチミ","quantity":3,"userPhone":"17708659389"}
[2025-10-13 20:03:40][INFO] Server sending response (len=59): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","result":"ok"}
[2025-10-13 20:03:41][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 20:03:41][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:03:41][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:42][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:42][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:42][INFO] Server sending response (len=446): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:42][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:42][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:03:42][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:42][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:03:42][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:03:42][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:03:42][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 20:03:42][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 20:03:42][INFO] UserWindow::refreshCart: item 2 good_id=7, name=ハチミ, qty=3, subtotal=234.000000
[2025-10-13 20:03:42][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:03:42][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:03:42][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:03:42][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:03:43][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:43][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:43][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:43][INFO] Server sending response (len=446): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:43][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:43][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:03:43][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:43][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:03:43][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:03:44][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:44][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:44][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:44][INFO] Server sending response (len=446): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:44][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:44][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:03:44][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:44][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:03:44][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:03:50][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:50][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:50][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:50][INFO] Server sending response (len=446): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:50][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:50][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:03:50][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:50][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:03:50][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:03:51][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":301.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:03:51][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":301.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:03:51][INFO] Server sending response (len=62): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","result":"saved"}
[2025-10-13 20:03:51][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:03:51][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:52][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:52][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:52][INFO] Server sending response (len=446): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:52][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:52][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:03:52][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:52][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:03:52][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:03:52][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:03:52][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 20:03:52][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 20:03:52][INFO] UserWindow::refreshCart: item 2 good_id=7, name=ハチミ, qty=3, subtotal=234.000000
[2025-10-13 20:03:52][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:03:52][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:03:52][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:03:52][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:03:52][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:53][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:53][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:53][INFO] Server sending response (len=446): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:53][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:53][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:03:53][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:53][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:03:53][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:03:54][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:54][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:54][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:54][INFO] Server sending response (len=446): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:54][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:54][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:03:54][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:54][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:03:54][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:03:55][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:03:56][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:03:56][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:03:56][INFO] Server sending response (len=446): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:56][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:03:56][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:03:56][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:03:56][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:03:56][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:04:00][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:04:00][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:04:00][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:04:00][INFO] Server sending response (len=446): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:04:00][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:04:00][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:04:00][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:04:00][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:04:00][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:04:00][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.087500000000034,"discount_policy":"95%off","final_amount":286.66249999999997,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:04:00][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.087500000000034,"discount_policy":"95%off","final_amount":286.66249999999997,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"","total_amount"...(truncated)
[2025-10-13 20:04:00][INFO] Server sending response (len=62): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","result":"saved"}
[2025-10-13 20:04:01][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:04:01][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:04:01][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:04:01][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:04:01][INFO] Server sending response (len=452): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"95%off","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:04:02][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"95%off","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:04:02][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:04:02][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:04:02][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:04:02][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:04:02][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:04:02][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 20:04:02][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 20:04:02][INFO] UserWindow::refreshCart: item 2 good_id=7, name=ハチミ, qty=3, subtotal=234.000000
[2025-10-13 20:04:02][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:04:02][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:04:02][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:04:02][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:04:02][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:04:02][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:04:02][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:04:02][INFO] Server sending response (len=452): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"95%off","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:04:03][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"95%off","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:04:03][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:04:03][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:04:03][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:04:03][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:01][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:02][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:02][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:02][INFO] Server sending response (len=452): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"95%off","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:02][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"95%off","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:02][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:02][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:02][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:02][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:02][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"},"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:05:02][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"},"shipping_address":"","total_amount":301...(truncated)
[2025-10-13 20:05:02][INFO] Server sending response (len=62): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","result":"saved"}
[2025-10-13 20:05:03][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:05:03][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:03][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:03][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:03][INFO] Server sending response (len=451): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:03][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:03][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:03][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:03][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:03][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:03][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:03][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 20:05:03][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 20:05:03][INFO] UserWindow::refreshCart: item 2 good_id=7, name=ハチミ, qty=3, subtotal=234.000000
[2025-10-13 20:05:04][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:05:04][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:05:04][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:05:04][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:05:04][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:04][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:04][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:04][INFO] Server sending response (len=451): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:04][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:04][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:04][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:04][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:04][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:06][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:06][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:06][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:06][INFO] Server sending response (len=451): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:06][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:06][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:06][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:06][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:06][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:07][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:07][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:07][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:07][INFO] Server sending response (len=451): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:08][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:08][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:08][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:08][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:08][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:12][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:12][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:12][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:12][INFO] Server sending response (len=451): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:12][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:12][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:12][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:12][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:12][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:12][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.035000000000025,"discount_policy":"98?95?88!","final_amount":295.715,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:05:12][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.035000000000025,"discount_policy":"98?95?88!","final_amount":295.715,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount"...(truncated)
[2025-10-13 20:05:13][INFO] Server sending response (len=62): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","result":"saved"}
[2025-10-13 20:05:13][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:05:13][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:14][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:14][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:14][INFO] Server sending response (len=454): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:14][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:14][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:14][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:14][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:14][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:14][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:14][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 20:05:14][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 20:05:14][INFO] UserWindow::refreshCart: item 2 good_id=7, name=ハチミ, qty=3, subtotal=234.000000
[2025-10-13 20:05:14][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:05:14][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:05:14][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:05:14][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:05:14][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:15][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:15][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:15][INFO] Server sending response (len=454): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:15][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:15][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:15][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:15][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:15][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:25][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:25][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:25][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:25][INFO] Server sending response (len=454): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:26][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:26][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:26][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:26][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:26][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:26][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"600-67","final_amount":301.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"policy":{"reduce":87.0,"scope":"global","threshold":600.0,"type":"full_reduction"},"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:05:26][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"600-67","final_amount":301.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"policy":{"reduce":87.0,"scope":"global","threshold":600.0,"type":"full_reduction"},"shipping_address":"","total_amount":301....(truncated)
[2025-10-13 20:05:26][INFO] Server sending response (len=62): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","result":"saved"}
[2025-10-13 20:05:26][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:05:26][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:27][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:27][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:27][INFO] Server sending response (len=450): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"600-67","final_amount":301.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:27][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"600-67","final_amount":301.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:27][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:27][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:27][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:27][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:27][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:27][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 20:05:27][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 20:05:27][INFO] UserWindow::refreshCart: item 2 good_id=7, name=ハチミ, qty=3, subtotal=234.000000
[2025-10-13 20:05:27][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:05:27][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:05:27][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:05:27][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:05:28][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:28][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:28][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:28][INFO] Server sending response (len=450): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"600-67","final_amount":301.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:28][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"600-67","final_amount":301.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:28][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:28][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:28][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:28][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:37][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:37][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:37][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:37][INFO] Server sending response (len=450): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"600-67","final_amount":301.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:37][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"600-67","final_amount":301.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:37][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:37][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:37][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:37][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:37][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.035000000000025,"discount_policy":"98?95?88!","final_amount":295.715,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:05:37][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.035000000000025,"discount_policy":"98?95?88!","final_amount":295.715,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount"...(truncated)
[2025-10-13 20:05:37][INFO] Server sending response (len=62): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","result":"saved"}
[2025-10-13 20:05:38][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:05:38][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:38][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:38][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:38][INFO] Server sending response (len=454): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:39][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:39][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:39][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:39][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:39][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:39][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:39][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 20:05:39][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 20:05:39][INFO] UserWindow::refreshCart: item 2 good_id=7, name=ハチミ, qty=3, subtotal=234.000000
[2025-10-13 20:05:39][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:05:39][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:05:39][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:05:39][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:05:39][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:39][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:39][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:39][INFO] Server sending response (len=454): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:40][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:40][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:40][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:40][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:40][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:45][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:46][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:46][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:46][INFO] Server sending response (len=454): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:46][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:46][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:46][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:46][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:46][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:47][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:48][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:48][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:48][INFO] Server sending response (len=454): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:48][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:48][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:48][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:48][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:48][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:49][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:49][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:49][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:49][INFO] Server sending response (len=454): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:49][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":6.04,"discount_policy":"98?95?88!","final_amount":295.72,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:49][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:49][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:49][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:49][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:49][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":301.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:05:49][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":0.0,"discount_policy":"","final_amount":301.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:05:49][INFO] Server sending response (len=62): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","result":"saved"}
[2025-10-13 20:05:50][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:05:50][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:51][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:51][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:51][INFO] Server sending response (len=446): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:51][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:51][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:51][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:51][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:51][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:51][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:51][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 20:05:51][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 20:05:51][INFO] UserWindow::refreshCart: item 2 good_id=7, name=ハチミ, qty=3, subtotal=234.000000
[2025-10-13 20:05:51][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:05:51][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:05:51][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:05:51][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:05:52][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:52][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:52][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:52][INFO] Server sending response (len=446): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:52][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:52][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:52][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:52][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:52][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:56][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:56][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:56][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:56][INFO] Server sending response (len=446): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:56][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":15.09,"discount_policy":"","final_amount":286.66,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:56][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:56][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:56][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:56][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:57][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"},"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:05:57][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"},"shipping_address":"","total_amount":301...(truncated)
[2025-10-13 20:05:57][INFO] Server sending response (len=62): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","result":"saved"}
[2025-10-13 20:05:57][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:05:57][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:58][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:58][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:58][INFO] Server sending response (len=451): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:58][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:58][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:58][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:58][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:58][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:05:58][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:58][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 20:05:58][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 20:05:58][INFO] UserWindow::refreshCart: item 2 good_id=7, name=ハチミ, qty=3, subtotal=234.000000
[2025-10-13 20:05:58][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:05:58][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:05:58][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:05:58][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:05:59][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:05:59][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:05:59][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:05:59][INFO] Server sending response (len=451): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:59][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":11.0,"discount_policy":"230-11","final_amount":290.75,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"shipping_address":"","total_amount":301.75,"user_phone":"17708659389"}
[2025-10-13 20:05:59][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=3
[2025-10-13 20:05:59][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:05:59][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:05:59][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:05][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=5, name=ikun, price=2.500000, qty=10
[2025-10-13 20:06:05][INFO] Server received request: ADD_TO_CART {"price":2.5,"productId":5,"productName":"ikun","quantity":10,"userPhone":"17708659389"}
[2025-10-13 20:06:05][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":2.5,"productId":5,"productName":"ikun","quantity":10,"userPhone":"17708659389"}
[2025-10-13 20:06:05][INFO] Server sending response (len=59): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","result":"ok"}
[2025-10-13 20:06:05][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 20:06:06][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:06:06][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:07][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:07][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:07][INFO] Server sending response (len=527): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":16.34,"discount_policy":"230-11","final_amount":310.41,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:07][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":16.34,"discount_policy":"230-11","final_amount":310.41,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:07][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:07][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:07][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:07][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:07][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:07][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:07][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 20:06:07][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 20:06:07][INFO] UserWindow::refreshCart: item 2 good_id=7, name=ハチミ, qty=3, subtotal=234.000000
[2025-10-13 20:06:07][INFO] UserWindow::refreshCart: item 3 good_id=5, name=ikun, qty=10, subtotal=25.000000
[2025-10-13 20:06:07][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:06:07][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:06:07][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:06:07][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:06:08][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:08][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:08][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:08][INFO] Server sending response (len=527): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":16.34,"discount_policy":"230-11","final_amount":310.41,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:08][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":16.34,"discount_policy":"230-11","final_amount":310.41,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:08][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:08][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:08][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:08][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:08][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:10][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:10][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:10][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:10][INFO] Server sending response (len=527): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":16.34,"discount_policy":"230-11","final_amount":310.41,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:11][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":16.34,"discount_policy":"230-11","final_amount":310.41,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:11][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:11][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:11][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:11][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:11][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:15][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:15][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:15][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:15][INFO] Server sending response (len=527): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":16.34,"discount_policy":"230-11","final_amount":310.41,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:15][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":16.34,"discount_policy":"230-11","final_amount":310.41,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:15][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:15][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:15][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:15][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:15][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:16][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.210000000000036,"discount_policy":"98?95?88!","final_amount":287.53999999999996,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:06:16][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.210000000000036,"discount_policy":"98?95?88!","final_amount":287.53999999999996,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"policy":{"scope":"g...(truncated)
[2025-10-13 20:06:16][INFO] Server sending response (len=62): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","result":"saved"}
[2025-10-13 20:06:16][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:06:16][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:17][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:17][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:17][INFO] Server sending response (len=530): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:17][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:17][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:17][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:17][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:17][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:17][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:17][INFO] UserWindow::refreshCart: got cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:17][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 20:06:17][INFO] UserWindow::refreshCart: item 1 good_id=2, name=manbo, qty=2, subtotal=57.760000
[2025-10-13 20:06:17][INFO] UserWindow::refreshCart: item 2 good_id=7, name=ハチミ, qty=3, subtotal=234.000000
[2025-10-13 20:06:17][INFO] UserWindow::refreshCart: item 3 good_id=5, name=ikun, qty=10, subtotal=25.000000
[2025-10-13 20:06:17][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:06:17][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:06:17][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:06:17][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:06:18][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:18][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:18][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:18][INFO] Server sending response (len=530): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:18][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:18][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:18][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:18][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:18][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:18][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:23][INFO] UserWindow::onCheckout called
[2025-10-13 20:06:23][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:23][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:23][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:23][INFO] Server sending response (len=530): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:23][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:23][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:23][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:23][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:23][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:23][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:24][INFO] UserWindow::onCheckout: using cart.cart_id as order id: c1760355502885_11e5c8e260d0a5f5
[2025-10-13 20:06:24][INFO] UserWindow::onCheckout: cart already has discount_policy="98?95?88!" -> skip server auto-promote
[2025-10-13 20:06:24][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:25][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:25][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:25][INFO] Server sending response (len=530): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:25][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:25][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:25][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:25][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:25][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:25][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:25][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:25][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:25][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:25][INFO] Server sending response (len=530): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:25][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:25][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:25][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:25][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:25][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:25][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:26][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:26][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:26][INFO] Server sending response (len=530): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:26][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:26][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:26][INFO] Server sending response (len=530): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:26][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:27][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:27][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:27][INFO] Server sending response (len=530): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:27][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:27][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:27][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:27][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:27][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:27][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:27][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:27][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:27][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:27][INFO] Server sending response (len=530): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:27][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:27][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:27][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:27][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:27][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:27][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:27][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:28][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:28][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:28][INFO] Server sending response (len=530): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:28][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:28][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:28][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:28][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:28][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:28][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:28][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:28][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:28][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:28][INFO] Server sending response (len=530): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:28][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:28][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:28][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:28][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:28][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:28][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:28][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:28][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:28][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:28][INFO] Server sending response (len=530): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:29][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:29][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:29][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:29][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:29][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:29][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:29][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:29][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:29][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:29][INFO] Server sending response (len=530): {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:29][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760355502885_11e5c8e260d0a5f5","discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0}],"shipping_address":"","total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 20:06:29][INFO] CLTgetCartForUser: parsed cart_id=c1760355502885_11e5c8e260d0a5f5, items=4
[2025-10-13 20:06:29][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 20:06:29][INFO] CLTgetCartForUser: item[1] good_id=2, name=manbo, price=28.880000, qty=2, subtotal=57.760000
[2025-10-13 20:06:29][INFO] CLTgetCartForUser: item[2] good_id=7, name=ハチミ, price=78.000000, qty=3, subtotal=234.000000
[2025-10-13 20:06:29][INFO] CLTgetCartForUser: item[3] good_id=5, name=ikun, price=2.500000, qty=10, subtotal=25.000000
[2025-10-13 20:06:29][INFO] UserWindow::onCheckout: sending order c1760355502885_11e5c8e260d0a5f5 for user 17708659389
[2025-10-13 20:06:29][INFO] Server received request: ADD_SETTLED_ORDER {"discountPolicy":"98?95?88!","discount_amount":39.21,"final_amount":287.54,"items":[{"price":9.99,"productId":1,"productName":"hyw","quantity":1,"subtotal":9.99},{"price":28.88,"productId":2,"productName":"manbo","quantity":2,"subtotal":57.76},{"price":78.0,"productId":7,"productName":"ハチミ","quantity":3,"subtotal":234.0},{"price":2.5,"productId":5,"productName":"ikun","quantity":10,"subtotal":25.0}],"orderId":"c1760355502885_11e5c8e260d0a5f5","shipping_address":"","status":1,"total_amount":326.75,"userPhone":"17708659389"}
[2025-10-13 20:06:29][INFO] Server::SERprocessRequest: cmd=ADD_SETTLED_ORDER payload={"discountPolicy":"98?95?88!","discount_amount":39.21,"final_amount":287.54,"items":[{"price":9.99,"productId":1,"productName":"hyw","quantity":1,"subtotal":9.99},{"price":28.88,"productId":2,"productName":"manbo","quantity":2,"subtotal":57.76},{"price":78.0,"productId":7,"productName":"ハチミ","quantity":3,"subtotal":234.0},{"price":2.5,"productId":5,"productName":"ikun","quantity":10,"subtotal":25.0}],"orderId":"c1760355502885_11e5c8e260d0a5f5","shipping_address":"","status":1,"total_amount":326.75,"us...(truncated)
[2025-10-13 20:06:29][INFO] Server SERaddSettledOrder: 减库存 good_id=1 -> 784
[2025-10-13 20:06:29][INFO] Server SERaddSettledOrder: 减库存 good_id=2 -> 114171
[2025-10-13 20:06:29][INFO] Server SERaddSettledOrder: 减库存 good_id=7 -> 1116
[2025-10-13 20:06:29][INFO] Server SERaddSettledOrder: 减库存 good_id=5 -> 15090
[2025-10-13 20:06:29][INFO] Server sending response (len=63): {"order_id":"c1760355502885_11e5c8e260d0a5f5","result":"added"}
[2025-10-13 20:06:29][INFO] UserWindow::onCheckout CLTaddSettledOrder returned true
[2025-10-13 20:06:30][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:06:30][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:06:30][INFO] Server sending response (len=62): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","result":"saved"}
[2025-10-13 20:06:30][INFO] UserWindow::onCheckout CLTsaveCartForUser returned true
[2025-10-13 20:06:31][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:06:31][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:06:31][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:06:31][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:06:31][INFO] Server sending response (len=206): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 20:06:31][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 20:06:31][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=0
[2025-10-13 20:06:31][INFO] UserWindow::refreshCart: got cart_id=c1760357190185_eb6f7f9b8965e2df, items=0
[2025-10-13 20:06:32][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:06:32][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:06:32][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:06:32][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:06:32][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:06:32][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:06:32][INFO] Server sending response (len=1036): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":2646.2,"order_id":"c1760353307555_a1f93edb4afaa565","status":1,"user_phone":"17708659389"},{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17...(truncated)
[2025-10-13 20:06:35][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:06:35][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:06:35][INFO] Server sending response (len=1036): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":2646.2,"order_id":"c1760353307555_a1f93edb4afaa565","status":1,"user_phone":"17708659389"},{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17...(truncated)
[2025-10-13 20:06:38][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760355502885_11e5c8e260d0a5f5","userPhone":"17708659389"}
[2025-10-13 20:06:38][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760355502885_11e5c8e260d0a5f5","userPhone":"17708659389"}
[2025-10-13 20:06:38][INFO] Server sending response (len=397): {"final_amount":287.54,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1}
[2025-10-13 20:07:35][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760353307555_a1f93edb4afaa565","userPhone":"17708659389"}
[2025-10-13 20:07:35][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760353307555_a1f93edb4afaa565","userPhone":"17708659389"}
[2025-10-13 20:07:35][INFO] Server sending response (len=252): {"final_amount":2646.2,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":10,"subtotal":81.1}],"order_id":"c1760353307555_a1f93edb4afaa565","status":1}
[2025-10-13 20:07:36][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"c1760353307555_a1f93edb4afaa565","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:07:36][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"c1760353307555_a1f93edb4afaa565","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:07:36][INFO] Server SERdeleteSettledOrder: deleted order c1760353307555_a1f93edb4afaa565
[2025-10-13 20:07:36][INFO] Server sending response (len=65): {"order_id":"c1760353307555_a1f93edb4afaa565","result":"deleted"}
[2025-10-13 20:07:37][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:07:37][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:07:37][INFO] Server sending response (len=929): [{"final_amount":989.01,"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1,"user_phone":"17708659389"},{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:07:39][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760229692248_44fe7ebe71b0aabe","userPhone":"17708659389"}
[2025-10-13 20:07:39][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760229692248_44fe7ebe71b0aabe","userPhone":"17708659389"}
[2025-10-13 20:07:39][INFO] Server sending response (len=166): {"final_amount":989.01,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":99,"subtotal":989.01}],"order_id":"c1760229692248_44fe7ebe71b0aabe","status":1}
[2025-10-13 20:07:40][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"c1760229692248_44fe7ebe71b0aabe","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:07:40][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"c1760229692248_44fe7ebe71b0aabe","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:07:40][INFO] Server SERdeleteSettledOrder: deleted order c1760229692248_44fe7ebe71b0aabe
[2025-10-13 20:07:40][INFO] Server sending response (len=65): {"order_id":"c1760229692248_44fe7ebe71b0aabe","result":"deleted"}
[2025-10-13 20:07:41][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:07:41][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:07:41][INFO] Server sending response (len=822): [{"final_amount":4120.72,"order_id":"c1760319315429_5051e99c4fbbf86c","status":1,"user_phone":"17708659389"},{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:07:44][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760319315429_5051e99c4fbbf86c","userPhone":"17708659389"}
[2025-10-13 20:07:44][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760319315429_5051e99c4fbbf86c","userPhone":"17708659389"}
[2025-10-13 20:07:44][INFO] Server sending response (len=260): {"final_amount":4120.72,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":99,"subtotal":2859.12},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":19,"subtotal":1261.6}],"order_id":"c1760319315429_5051e99c4fbbf86c","status":1}
[2025-10-13 20:07:44][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"c1760319315429_5051e99c4fbbf86c","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:07:44][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"c1760319315429_5051e99c4fbbf86c","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:07:44][INFO] Server SERdeleteSettledOrder: deleted order c1760319315429_5051e99c4fbbf86c
[2025-10-13 20:07:44][INFO] Server sending response (len=65): {"order_id":"c1760319315429_5051e99c4fbbf86c","result":"deleted"}
[2025-10-13 20:07:46][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:07:46][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:07:46][INFO] Server sending response (len=714): [{"final_amount":4974.36,"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1,"user_phone":"17708659389"},{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:07:48][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760353225386_e57ec68b0e1d72f5","userPhone":"17708659389"}
[2025-10-13 20:07:48][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760353225386_e57ec68b0e1d72f5","userPhone":"17708659389"}
[2025-10-13 20:07:48][INFO] Server sending response (len=334): {"final_amount":4974.36,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":100,"subtotal":999.0},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":59,"subtotal":3917.6}],"order_id":"c1760353225386_e57ec68b0e1d72f5","status":1}
[2025-10-13 20:07:49][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"c1760353225386_e57ec68b0e1d72f5","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:07:49][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"c1760353225386_e57ec68b0e1d72f5","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:07:49][INFO] Server SERdeleteSettledOrder: deleted order c1760353225386_e57ec68b0e1d72f5
[2025-10-13 20:07:49][INFO] Server sending response (len=65): {"order_id":"c1760353225386_e57ec68b0e1d72f5","result":"deleted"}
[2025-10-13 20:07:50][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:07:50][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:07:50][INFO] Server sending response (len=606): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":7800.0,"order_id":"o1760276650335_be1040b6","status":3,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:07:53][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"o1760276650335_be1040b6","userPhone":"17708659389"}
[2025-10-13 20:07:53][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"o1760276650335_be1040b6","userPhone":"17708659389"}
[2025-10-13 20:07:53][INFO] Server sending response (len=165): {"final_amount":7800.0,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":100,"subtotal":7800.0}],"order_id":"o1760276650335_be1040b6","status":3}
[2025-10-13 20:07:54][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"o1760276650335_be1040b6","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:07:54][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"o1760276650335_be1040b6","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:07:54][INFO] Server SERdeleteSettledOrder: deleted order o1760276650335_be1040b6
[2025-10-13 20:07:54][INFO] Server sending response (len=57): {"order_id":"o1760276650335_be1040b6","result":"deleted"}
[2025-10-13 20:07:55][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:07:55][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:07:55][INFO] Server sending response (len=507): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":7304.0,"order_id":"o1760276679088_26e410c3","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:07:58][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"o1760276679088_26e410c3","userPhone":"17708659389"}
[2025-10-13 20:07:58][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"o1760276679088_26e410c3","userPhone":"17708659389"}
[2025-10-13 20:07:58][INFO] Server sending response (len=171): {"final_amount":7304.0,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":110,"subtotal":7304.0}],"order_id":"o1760276679088_26e410c3","status":1}
[2025-10-13 20:07:58][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"o1760276679088_26e410c3","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:07:58][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"o1760276679088_26e410c3","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:07:58][INFO] Server SERdeleteSettledOrder: deleted order o1760276679088_26e410c3
[2025-10-13 20:07:58][INFO] Server sending response (len=57): {"order_id":"o1760276679088_26e410c3","result":"deleted"}
[2025-10-13 20:07:59][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:07:59][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:07:59][INFO] Server sending response (len=408): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"},{"final_amount":13104.0,"order_id":"o1760277845018_4d6f7f80","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:08:09][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"o1760277845018_4d6f7f80","userPhone":"17708659389"}
[2025-10-13 20:08:09][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"o1760277845018_4d6f7f80","userPhone":"17708659389"}
[2025-10-13 20:08:09][INFO] Server sending response (len=167): {"final_amount":13104.0,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":168,"subtotal":13104.0}],"order_id":"o1760277845018_4d6f7f80","status":1}
[2025-10-13 20:08:10][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"o1760277845018_4d6f7f80","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:08:10][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"o1760277845018_4d6f7f80","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:08:10][INFO] Server SERdeleteSettledOrder: deleted order o1760277845018_4d6f7f80
[2025-10-13 20:08:10][INFO] Server sending response (len=57): {"order_id":"o1760277845018_4d6f7f80","result":"deleted"}
[2025-10-13 20:08:11][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:08:11][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:08:11][INFO] Server sending response (len=308): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"},{"final_amount":6194.37,"order_id":"o1760277778542_7cd3258d","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:08:14][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"o1760277778542_7cd3258d","userPhone":"17708659389"}
[2025-10-13 20:08:14][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"o1760277778542_7cd3258d","userPhone":"17708659389"}
[2025-10-13 20:08:14][INFO] Server sending response (len=411): {"final_amount":6194.37,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":91,"subtotal":909.09},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":141,"subtotal":4072.08},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":3,"subtotal":199.2},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":13,"subtotal":1014.0}],"order_id":"o1760277778542_7cd3258d","status":1}
[2025-10-13 20:08:14][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"o1760277778542_7cd3258d","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:08:14][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"o1760277778542_7cd3258d","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:08:14][INFO] Server SERdeleteSettledOrder: deleted order o1760277778542_7cd3258d
[2025-10-13 20:08:14][INFO] Server sending response (len=57): {"order_id":"o1760277778542_7cd3258d","result":"deleted"}
[2025-10-13 20:08:15][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:08:15][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:08:15][INFO] Server sending response (len=208): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":12567.0,"order_id":"o1760277235089_ed70cb3d","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:08:18][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"o1760277235089_ed70cb3d","userPhone":"17708659389"}
[2025-10-13 20:08:18][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"o1760277235089_ed70cb3d","userPhone":"17708659389"}
[2025-10-13 20:08:18][INFO] Server sending response (len=334): {"final_amount":12567.0,"items":[{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":250,"subtotal":2027.5},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":99,"subtotal":247.5},{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":155,"subtotal":10292.0}],"order_id":"o1760277235089_ed70cb3d","status":1}
[2025-10-13 20:08:18][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"o1760277235089_ed70cb3d","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:08:18][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"o1760277235089_ed70cb3d","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 20:08:18][INFO] Server SERdeleteSettledOrder: deleted order o1760277235089_ed70cb3d
[2025-10-13 20:08:18][INFO] Server sending response (len=57): {"order_id":"o1760277235089_ed70cb3d","result":"deleted"}
[2025-10-13 20:08:19][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:08:19][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:08:19][INFO] Server sending response (len=108): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:10:35][INFO] 应用启动
[2025-10-13 20:10:35][INFO] Server: DatabaseManager 已连接。
[2025-10-13 20:10:35][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 20:10:35][INFO] Client 已连接到 Server
[2025-10-13 20:10:35][INFO] DatabaseManager::connect() called.

[2025-10-13 20:10:35][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 20:10:40][INFO] 管理员登录成功，打开管理员窗口
[2025-10-13 20:10:41][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 20:10:41][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 20:10:41][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 20:10:41][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 20:10:41][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 20:10:41][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 20:10:41][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 20:10:41][INFO] Server SERgetAllGoods: dbManager ptr = 2086885862560, DTBisConnected=true
[2025-10-13 20:10:41][INFO] DTBloadAllGoods: this=000001E5E4172CA0 connection_=000001E5E420DE90 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 20:10:41][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 20:10:41][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114171},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1116}]
[2025-10-13 20:10:41][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 20:10:41][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114171},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1116}]
[2025-10-13 20:10:41][INFO] Server received request: GET_ALL_ORDERS {}
[2025-10-13 20:10:41][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={}
[2025-10-13 20:10:41][INFO] Server sending response (len=108): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:10:42][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:10:42][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:10:42][INFO] Server sending response (len=1053): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:10:42][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 20:10:42][INFO] AdminWindow::refreshPromotions loaded 9 promotions
[2025-10-13 20:10:57][INFO] Server received request: ADD_PROMOTION {"name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"},"type":"discount"}
[2025-10-13 20:10:57][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"},"type":"discount"}
[2025-10-13 20:10:57][INFO] Server sending response (len=37): {"name":"原？！","result":"added"}
[2025-10-13 20:10:58][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:10:58][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:10:58][INFO] Server sending response (len=1145): [{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:10:58][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:10:58][INFO] AdminWindow::refreshPromotions loaded 10 promotions
[2025-10-13 20:11:22][INFO] AdminWindow::onReturnToIdentitySelection called
[2025-10-13 20:11:22][INFO] 收到 AdminWindow::backRequested，返回登录界面
[2025-10-13 20:11:22][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 20:11:45][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 20:11:45][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 20:11:45][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 20:11:45][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 20:11:45][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:11:45][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:11:45][INFO] Server sending response (len=1144): [{"id":"0","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:11:45][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:11:46][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 20:11:46][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 20:11:46][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 20:11:46][INFO] Server SERgetAllGoods: dbManager ptr = 2086885862560, DTBisConnected=true
[2025-10-13 20:11:46][INFO] DTBloadAllGoods: this=000001E5E4172CA0 connection_=000001E5E420DE90 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 20:11:46][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 20:11:46][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114171},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1116}]
[2025-10-13 20:11:46][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 20:11:46][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114171},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1116}]
[2025-10-13 20:11:46][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:11:46][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:11:46][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:11:46][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:11:46][INFO] Server sending response (len=206): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 20:11:46][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 20:11:46][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=0
[2025-10-13 20:11:46][INFO] UserWindow::refreshCart: got cart_id=c1760357190185_eb6f7f9b8965e2df, items=0
[2025-10-13 20:11:46][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:11:46][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:11:46][INFO] Server sending response (len=1144): [{"id":"0","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:11:46][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:11:47][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:11:47][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:11:47][INFO] Server sending response (len=108): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:11:47][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 20:11:47][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 20:11:47][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 20:11:47][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 20:12:02][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=2, name=manbo, price=28.880000, qty=91
[2025-10-13 20:12:02][INFO] Server received request: ADD_TO_CART {"price":28.88,"productId":2,"productName":"manbo","quantity":91,"userPhone":"17708659389"}
[2025-10-13 20:12:02][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":28.88,"productId":2,"productName":"manbo","quantity":91,"userPhone":"17708659389"}
[2025-10-13 20:12:02][INFO] Server sending response (len=59): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","result":"ok"}
[2025-10-13 20:12:03][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 20:12:03][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:12:03][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:12:04][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:12:04][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:12:04][INFO] Server sending response (len=296): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:04][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:04][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:04][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:12:04][INFO] UserWindow::refreshCart: got cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:04][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=91, subtotal=2628.080000
[2025-10-13 20:12:04][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:12:04][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:12:04][INFO] Server sending response (len=1144): [{"id":"0","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"1","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:12:04][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:12:05][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:12:06][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:12:06][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:12:06][INFO] Server sending response (len=296): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:06][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:06][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:06][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:12:07][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:12:07][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:12:07][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:12:07][INFO] Server sending response (len=296): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:07][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:07][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:07][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:12:08][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:12:09][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:12:09][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:12:09][INFO] Server sending response (len=296): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:09][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:09][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:09][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:12:29][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:12:29][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:12:30][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:12:30][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:12:30][INFO] Server sending response (len=296): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:30][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:30][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:30][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:12:30][INFO] UserWindow::refreshCart: got cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:30][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=91, subtotal=2628.080000
[2025-10-13 20:12:30][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:12:30][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:12:30][INFO] Server sending response (len=1144): [{"id":"1","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:12:30][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:12:35][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:12:35][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:12:35][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:12:35][INFO] Server sending response (len=296): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:35][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:35][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:35][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:12:36][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:12:36][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:12:36][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:12:36][INFO] Server sending response (len=296): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:37][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:37][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:37][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:12:37][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":0.0,"discount_policy":"","final_amount":2628.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:12:37][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":0.0,"discount_policy":"","final_amount":2628.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:12:37][INFO] Server sending response (len=62): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","result":"saved"}
[2025-10-13 20:12:38][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:12:38][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:12:39][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:12:39][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:12:39][INFO] Server sending response (len=296): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:39][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:39][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:39][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:12:39][INFO] UserWindow::refreshCart: got cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:39][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=91, subtotal=2628.080000
[2025-10-13 20:12:39][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:12:39][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:12:39][INFO] Server sending response (len=1144): [{"id":"1","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:12:39][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:12:42][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:12:42][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:12:42][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:12:42][INFO] Server sending response (len=296): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:42][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:42][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:42][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:12:44][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:12:44][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:12:44][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:12:44][INFO] Server sending response (len=296): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:44][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:44][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:44][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:12:48][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:12:48][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:12:48][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:12:48][INFO] Server sending response (len=296): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:49][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":131.4,"discount_policy":"","final_amount":2496.68,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:49][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:49][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:12:49][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":0.0,"discount_policy":"原？！","final_amount":2628.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"policy":{"discount":1.0,"scope":"global","type":"discount"},"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:12:49][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":0.0,"discount_policy":"原？！","final_amount":2628.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"policy":{"discount":1.0,"scope":"global","type":"discount"},"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:12:49][INFO] Server sending response (len=62): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","result":"saved"}
[2025-10-13 20:12:50][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:12:50][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:12:50][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:12:50][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:12:50][INFO] Server sending response (len=303): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":0.0,"discount_policy":"原？！","final_amount":2628.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:50][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":0.0,"discount_policy":"原？！","final_amount":2628.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:50][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:50][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:12:50][INFO] UserWindow::refreshCart: got cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:50][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=91, subtotal=2628.080000
[2025-10-13 20:12:51][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:12:51][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:12:51][INFO] Server sending response (len=1144): [{"id":"1","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:12:51][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:12:51][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:12:51][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:12:51][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:12:51][INFO] Server sending response (len=303): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":0.0,"discount_policy":"原？！","final_amount":2628.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:51][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":0.0,"discount_policy":"原？！","final_amount":2628.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:51][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:51][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:12:58][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:12:58][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:12:58][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:12:58][INFO] Server sending response (len=303): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":0.0,"discount_policy":"原？！","final_amount":2628.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:58][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":0.0,"discount_policy":"原？！","final_amount":2628.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:12:58][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:12:58][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:12:58][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":2440.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"},"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:12:58][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":2440.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"},"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:12:58][INFO] Server sending response (len=62): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","result":"saved"}
[2025-10-13 20:12:59][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:12:59][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:00][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:00][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:00][INFO] Server sending response (len=309): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":2440.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:00][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":2440.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:00][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:00][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:00][INFO] UserWindow::refreshCart: got cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:00][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=91, subtotal=2628.080000
[2025-10-13 20:13:00][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:13:00][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:13:00][INFO] Server sending response (len=1144): [{"id":"1","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:13:00][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:13:00][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:00][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:00][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:01][INFO] Server sending response (len=309): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":2440.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:01][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":2440.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:01][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:01][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:22][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:22][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:22][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:22][INFO] Server sending response (len=309): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":2440.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:22][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":2440.08,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:22][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:22][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:22][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.3696,"discount_policy":"98?95?88!","final_amount":2312.7104,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:13:22][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.3696,"discount_policy":"98?95?88!","final_amount":2312.7104,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:13:22][INFO] Server sending response (len=62): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","result":"saved"}
[2025-10-13 20:13:23][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:13:23][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:24][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:24][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:24][INFO] Server sending response (len=306): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:24][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:24][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:24][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:24][INFO] UserWindow::refreshCart: got cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:24][INFO] UserWindow::refreshCart: item 0 good_id=2, name=manbo, qty=91, subtotal=2628.080000
[2025-10-13 20:13:24][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:13:24][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:13:24][INFO] Server sending response (len=1144): [{"id":"1","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:13:24][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:13:25][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:25][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:25][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:25][INFO] Server sending response (len=306): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:25][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:25][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:25][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:29][INFO] UserWindow::onCheckout called
[2025-10-13 20:13:29][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:29][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:29][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:29][INFO] Server sending response (len=306): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:29][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:29][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:29][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:30][INFO] UserWindow::onCheckout: using cart.cart_id as order id: c1760357190185_eb6f7f9b8965e2df
[2025-10-13 20:13:30][INFO] UserWindow::onCheckout: cart already has discount_policy="98?95?88!" -> skip server auto-promote
[2025-10-13 20:13:30][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:30][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:30][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:30][INFO] Server sending response (len=306): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:30][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:30][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:30][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:30][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:30][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:30][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:30][INFO] Server sending response (len=306): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:31][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:31][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:31][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:31][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:31][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:31][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:31][INFO] Server sending response (len=306): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:31][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:31][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:31][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:31][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:31][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:31][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:31][INFO] Server sending response (len=306): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:32][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:32][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:32][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:32][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:32][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:32][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:32][INFO] Server sending response (len=306): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:32][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:32][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:32][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:32][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:32][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:32][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:32][INFO] Server sending response (len=306): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:32][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:32][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:32][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:33][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:33][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:33][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:33][INFO] Server sending response (len=306): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:33][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:33][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:33][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:33][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:33][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:33][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:33][INFO] Server sending response (len=306): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:33][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:33][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:33][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:33][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:34][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:34][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:34][INFO] Server sending response (len=306): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:34][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:34][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:34][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:34][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:34][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:34][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:34][INFO] Server sending response (len=306): {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:34][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357190185_eb6f7f9b8965e2df","discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"is_converted":true,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"shipping_address":"","total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 20:13:34][INFO] CLTgetCartForUser: parsed cart_id=c1760357190185_eb6f7f9b8965e2df, items=1
[2025-10-13 20:13:34][INFO] CLTgetCartForUser: item[0] good_id=2, name=manbo, price=28.880000, qty=91, subtotal=2628.080000
[2025-10-13 20:13:34][INFO] UserWindow::onCheckout: sending order c1760357190185_eb6f7f9b8965e2df for user 17708659389
[2025-10-13 20:13:34][INFO] Server received request: ADD_SETTLED_ORDER {"discountPolicy":"98?95?88!","discount_amount":315.37,"final_amount":2312.71,"items":[{"price":28.88,"productId":2,"productName":"manbo","quantity":91,"subtotal":2628.08}],"orderId":"c1760357190185_eb6f7f9b8965e2df","shipping_address":"","status":1,"total_amount":2628.08,"userPhone":"17708659389"}
[2025-10-13 20:13:34][INFO] Server::SERprocessRequest: cmd=ADD_SETTLED_ORDER payload={"discountPolicy":"98?95?88!","discount_amount":315.37,"final_amount":2312.71,"items":[{"price":28.88,"productId":2,"productName":"manbo","quantity":91,"subtotal":2628.08}],"orderId":"c1760357190185_eb6f7f9b8965e2df","shipping_address":"","status":1,"total_amount":2628.08,"userPhone":"17708659389"}
[2025-10-13 20:13:34][INFO] Server SERaddSettledOrder: 减库存 good_id=2 -> 114080
[2025-10-13 20:13:34][INFO] Server sending response (len=63): {"order_id":"c1760357190185_eb6f7f9b8965e2df","result":"added"}
[2025-10-13 20:13:35][INFO] UserWindow::onCheckout CLTaddSettledOrder returned true
[2025-10-13 20:13:35][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:13:35][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:13:35][INFO] Server sending response (len=62): {"cart_id":"c1760357615337_bb46c105c0cb704f","result":"saved"}
[2025-10-13 20:13:35][INFO] UserWindow::onCheckout CLTsaveCartForUser returned true
[2025-10-13 20:13:42][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:13:42][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:13:42][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:13:42][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:13:42][INFO] Server sending response (len=206): {"cart_id":"c1760357615337_bb46c105c0cb704f","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 20:13:42][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760357615337_bb46c105c0cb704f","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 20:13:42][INFO] CLTgetCartForUser: parsed cart_id=c1760357615337_bb46c105c0cb704f, items=0
[2025-10-13 20:13:42][INFO] UserWindow::refreshCart: got cart_id=c1760357615337_bb46c105c0cb704f, items=0
[2025-10-13 20:13:43][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:13:43][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:13:43][INFO] Server sending response (len=1144): [{"id":"1","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:13:43][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:13:43][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:13:43][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:13:43][INFO] Server sending response (len=216): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":2312.71,"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:13:48][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760357190185_eb6f7f9b8965e2df","userPhone":"17708659389"}
[2025-10-13 20:13:48][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760357190185_eb6f7f9b8965e2df","userPhone":"17708659389"}
[2025-10-13 20:13:48][INFO] Server sending response (len=171): {"final_amount":2312.71,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1}
[2025-10-13 20:15:25][INFO] 应用启动
[2025-10-13 20:15:25][INFO] Server: DatabaseManager 已连接。
[2025-10-13 20:15:25][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 20:15:25][INFO] Client 已连接到 Server
[2025-10-13 20:15:26][INFO] DatabaseManager::connect() called.

[2025-10-13 20:15:26][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 20:15:31][INFO] 管理员登录成功，打开管理员窗口
[2025-10-13 20:15:32][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 20:15:32][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 20:15:32][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 20:15:32][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 20:15:32][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 20:15:32][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 20:15:32][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 20:15:32][INFO] Server SERgetAllGoods: dbManager ptr = 1739102590752, DTBisConnected=true
[2025-10-13 20:15:32][INFO] DTBloadAllGoods: this=00000194EA979720 connection_=00000194EAA079C0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 20:15:32][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 20:15:32][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114080},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1116}]
[2025-10-13 20:15:32][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 20:15:32][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114080},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1116}]
[2025-10-13 20:15:32][INFO] Server received request: GET_ALL_ORDERS {}
[2025-10-13 20:15:32][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={}
[2025-10-13 20:15:32][INFO] Server sending response (len=216): [{"final_amount":2312.71,"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1,"user_phone":"17708659389"},{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:15:33][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:15:33][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:15:33][INFO] Server sending response (len=1144): [{"id":"1","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:15:33][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:15:33][INFO] AdminWindow::refreshPromotions loaded 10 promotions
[2025-10-13 20:15:57][INFO] Server received request: UPDATE_PROMOTION {"name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"},"type":"discount"}
[2025-10-13 20:15:57][INFO] Server::SERprocessRequest: cmd=UPDATE_PROMOTION payload={"name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"},"type":"discount"}
[2025-10-13 20:15:57][INFO] Server sending response (len=39): {"name":"原？！","result":"updated"}
[2025-10-13 20:15:58][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:15:58][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:15:58][INFO] Server sending response (len=1236): [{"id":"1","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:15:58][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 20:15:58][INFO] AdminWindow::refreshPromotions loaded 11 promotions
[2025-10-13 20:15:59][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:15:59][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:15:59][INFO] Server sending response (len=1236): [{"id":"1","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:16:00][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 20:16:00][INFO] AdminWindow::refreshPromotions loaded 11 promotions
[2025-10-13 20:16:08][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:16:08][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:16:08][INFO] Server sending response (len=1236): [{"id":"1","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:16:08][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 20:16:08][INFO] AdminWindow::refreshPromotions loaded 11 promotions
[2025-10-13 20:16:57][INFO] Server received request: ADD_PROMOTION {"name":"1919810","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":1},{"discount":0.95,"min_qty":2},{"discount":0.9,"min_qty":10}],"type":"tiered"},"type":"tiered"}
[2025-10-13 20:16:57][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"1919810","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":1},{"discount":0.95,"min_qty":2},{"discount":0.9,"min_qty":10}],"type":"tiered"},"type":"tiered"}
[2025-10-13 20:16:57][INFO] Server sending response (len=35): {"name":"1919810","result":"added"}
[2025-10-13 20:16:58][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:16:58][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:16:58][INFO] Server sending response (len=1409): [{"id":"1","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:16:58][INFO] CLTgetAllPromotionsRaw: loaded 12 promotions
[2025-10-13 20:16:58][INFO] AdminWindow::refreshPromotions loaded 12 promotions
[2025-10-13 20:17:14][INFO] Server received request: UPDATE_PROMOTION {"name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"},"type":"discount"}
[2025-10-13 20:17:14][INFO] Server::SERprocessRequest: cmd=UPDATE_PROMOTION payload={"name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"},"type":"discount"}
[2025-10-13 20:17:14][INFO] Server sending response (len=39): {"name":"原？！","result":"updated"}
[2025-10-13 20:17:15][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:17:15][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:17:15][INFO] Server sending response (len=1501): [{"id":"1","name":"原？！","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:17:15][INFO] CLTgetAllPromotionsRaw: loaded 13 promotions
[2025-10-13 20:17:15][INFO] AdminWindow::refreshPromotions loaded 13 promotions
[2025-10-13 20:17:53][INFO] Server received request: DELETE_PROMOTION {"name":"原？！"}
[2025-10-13 20:17:53][INFO] Server::SERprocessRequest: cmd=DELETE_PROMOTION payload={"name":"原？！"}
[2025-10-13 20:17:53][INFO] Server sending response (len=39): {"name":"原？！","result":"deleted"}
[2025-10-13 20:17:54][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:17:54][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:17:54][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:17:54][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:17:54][INFO] AdminWindow::refreshPromotions loaded 10 promotions
[2025-10-13 20:18:18][INFO] Server received request: ADD_PROMOTION {"name":"何算？","policy":{"discount":1.0,"scope":"global","type":"discount"},"type":"discount"}
[2025-10-13 20:18:18][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"何算？","policy":{"discount":1.0,"scope":"global","type":"discount"},"type":"discount"}
[2025-10-13 20:18:18][INFO] Server sending response (len=37): {"name":"何算？","result":"added"}
[2025-10-13 20:18:19][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:18:19][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:18:19][INFO] Server sending response (len=1318): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:18:19][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 20:18:19][INFO] AdminWindow::refreshPromotions loaded 11 promotions
[2025-10-13 20:18:30][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:18:30][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:18:30][INFO] Server sending response (len=1317): [{"id":"1","name":"何算？","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:18:30][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 20:18:30][INFO] AdminWindow::refreshPromotions loaded 11 promotions
[2025-10-13 20:22:27][INFO] 应用启动
[2025-10-13 20:22:27][INFO] Server: DatabaseManager 已连接。
[2025-10-13 20:22:27][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 20:22:27][INFO] Client 已连接到 Server
[2025-10-13 20:22:27][INFO] DatabaseManager::connect() called.

[2025-10-13 20:22:27][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 20:22:35][INFO] 管理员登录成功，打开管理员窗口
[2025-10-13 20:22:35][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 20:22:35][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 20:22:35][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 20:22:35][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 20:22:36][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 20:22:36][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 20:22:36][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 20:22:36][INFO] Server SERgetAllGoods: dbManager ptr = 1717863386112, DTBisConnected=true
[2025-10-13 20:22:36][INFO] DTBloadAllGoods: this=0000018FF8A30C00 connection_=0000018FF8ACF300 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 20:22:36][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 20:22:36][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114080},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1116}]
[2025-10-13 20:22:36][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 20:22:36][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114080},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1116}]
[2025-10-13 20:22:36][INFO] Server received request: GET_ALL_ORDERS {}
[2025-10-13 20:22:36][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={}
[2025-10-13 20:22:36][INFO] Server sending response (len=216): [{"final_amount":2312.71,"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1,"user_phone":"17708659389"},{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:22:36][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:22:36][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:22:36][INFO] Server sending response (len=1317): [{"id":"1","name":"何算？","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:22:36][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 20:22:36][INFO] AdminWindow::refreshPromotions loaded 11 promotions
[2025-10-13 20:22:39][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:22:39][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:22:39][INFO] Server sending response (len=1317): [{"id":"1","name":"何算？","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:22:40][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 20:22:40][INFO] AdminWindow::refreshPromotions loaded 11 promotions
[2025-10-13 20:24:56][INFO] 应用启动
[2025-10-13 20:24:56][INFO] Server: DatabaseManager 已连接。
[2025-10-13 20:24:56][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 20:24:56][INFO] Client 已连接到 Server
[2025-10-13 20:24:56][INFO] DatabaseManager::connect() called.

[2025-10-13 20:24:56][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 20:25:01][INFO] 管理员登录成功，打开管理员窗口
[2025-10-13 20:25:01][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 20:25:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 20:25:01][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 20:25:01][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 20:25:01][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 20:25:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 20:25:01][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 20:25:01][INFO] Server SERgetAllGoods: dbManager ptr = 2408498799696, DTBisConnected=true
[2025-10-13 20:25:01][INFO] DTBloadAllGoods: this=00000230C5B72450 connection_=00000230C5C113C0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 20:25:01][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 20:25:01][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114080},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1116}]
[2025-10-13 20:25:01][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 20:25:01][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114080},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1116}]
[2025-10-13 20:25:02][INFO] Server received request: GET_ALL_ORDERS {}
[2025-10-13 20:25:02][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={}
[2025-10-13 20:25:02][INFO] Server sending response (len=216): [{"final_amount":2312.71,"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1,"user_phone":"17708659389"},{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:25:02][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:25:02][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:25:02][INFO] Server sending response (len=1317): [{"id":"1","name":"何算？","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:25:02][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 20:25:02][INFO] AdminWindow::refreshPromotions loaded 11 promotions
[2025-10-13 20:25:10][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760357190185_eb6f7f9b8965e2df","userPhone":"17708659389"}
[2025-10-13 20:25:10][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760357190185_eb6f7f9b8965e2df","userPhone":"17708659389"}
[2025-10-13 20:25:10][INFO] Server sending response (len=171): {"final_amount":2312.71,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1}
[2025-10-13 20:25:15][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760355502885_11e5c8e260d0a5f5","userPhone":"17708659389"}
[2025-10-13 20:25:15][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760355502885_11e5c8e260d0a5f5","userPhone":"17708659389"}
[2025-10-13 20:25:15][INFO] Server sending response (len=397): {"final_amount":287.54,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1}
[2025-10-13 20:31:15][INFO] 应用启动
[2025-10-13 20:31:15][INFO] Server: DatabaseManager 已连接。
[2025-10-13 20:31:15][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 20:31:15][INFO] Client 已连接到 Server
[2025-10-13 20:31:15][INFO] DatabaseManager::connect() called.

[2025-10-13 20:31:15][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 20:31:23][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 20:31:23][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 20:31:23][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 20:31:23][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 20:31:23][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:31:23][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:31:23][INFO] Server sending response (len=1317): [{"id":"1","name":"何算？","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:31:23][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 20:31:24][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 20:31:24][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 20:31:24][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 20:31:24][INFO] Server SERgetAllGoods: dbManager ptr = 1877718590896, DTBisConnected=true
[2025-10-13 20:31:24][INFO] DTBloadAllGoods: this=000001B530BFE5B0 connection_=000001B530CAA8D0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 20:31:24][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 20:31:24][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114080},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1116}]
[2025-10-13 20:31:24][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 20:31:24][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114080},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1116}]
[2025-10-13 20:31:24][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:31:24][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:31:24][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:31:24][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:31:24][INFO] Server sending response (len=30): {"error":"未找到购物车"}
[2025-10-13 20:31:24][INFO] CLTgetCartForUser: raw response: {"error":"未找到购物车"}
[2025-10-13 20:31:24][WARN] CLTgetCartForUser: server returned error: {"error":"未找到购物车"}
[2025-10-13 20:31:24][INFO] UserWindow::refreshCart: got cart_id=, items=0
[2025-10-13 20:31:24][INFO] UserWindow::refreshCart: cart is empty or not found for user 17708659389
[2025-10-13 20:31:24][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:31:24][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:31:24][INFO] Server sending response (len=1317): [{"id":"1","name":"何算？","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:31:25][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 20:31:25][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:31:25][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:31:25][INFO] Server sending response (len=216): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":2312.71,"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:31:25][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 20:31:25][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 20:31:25][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 20:31:25][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 20:31:32][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=7, name=ハチミ, price=78.000000, qty=10
[2025-10-13 20:31:32][INFO] Server received request: ADD_TO_CART {"price":78.0,"productId":7,"productName":"ハチミ","quantity":10,"userPhone":"17708659389"}
[2025-10-13 20:31:32][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":78.0,"productId":7,"productName":"ハチミ","quantity":10,"userPhone":"17708659389"}
[2025-10-13 20:31:32][INFO] Server sending response (len=59): {"cart_id":"c1760358692649_17a144cd341f2cbe","result":"ok"}
[2025-10-13 20:31:32][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 20:31:33][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:31:33][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:31:33][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:31:33][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:31:33][INFO] Server sending response (len=293): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:31:34][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:31:34][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:31:34][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:31:34][INFO] UserWindow::refreshCart: got cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:31:34][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=10, subtotal=780.000000
[2025-10-13 20:31:34][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:31:34][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:31:34][INFO] Server sending response (len=1317): [{"id":"1","name":"何算？","policy":{"discount":1.0,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduc...(truncated)
[2025-10-13 20:31:34][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 20:31:44][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:31:44][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:31:44][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:31:44][INFO] Server sending response (len=293): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:31:44][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:31:44][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:31:44][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:31:46][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:31:46][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:31:46][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:31:46][INFO] Server sending response (len=293): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:31:46][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:31:46][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:31:46][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:32:27][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:32:27][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:32:27][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:32:27][INFO] Server sending response (len=293): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:27][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:27][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:27][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:32:28][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":0.0,"discount_policy":"","final_amount":780.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:32:28][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":0.0,"discount_policy":"","final_amount":780.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:32:28][INFO] Server sending response (len=62): {"cart_id":"c1760358692649_17a144cd341f2cbe","result":"saved"}
[2025-10-13 20:32:28][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:32:28][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:32:29][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:32:29][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:32:29][INFO] Server sending response (len=293): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:29][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:29][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:29][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:32:29][INFO] UserWindow::refreshCart: got cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:29][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=10, subtotal=780.000000
[2025-10-13 20:32:29][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:32:29][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:32:29][INFO] Server sending response (len=1323): [{"id":"1","name":"何算？","policy":{"discount":0.9999999,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full...(truncated)
[2025-10-13 20:32:29][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 20:32:29][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:32:29][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:32:29][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:32:29][INFO] Server sending response (len=293): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:30][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:30][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:30][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:32:32][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:32:33][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:32:33][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:32:33][INFO] Server sending response (len=293): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:33][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:33][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:33][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:32:33][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":7.799999991675577e-05,"discount_policy":"何算？","final_amount":779.9999220000001,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"policy":{"discount":0.9999999,"scope":"global","type":"discount"},"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:32:33][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":7.799999991675577e-05,"discount_policy":"何算？","final_amount":779.9999220000001,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"policy":{"discount":0.9999999,"scope":"global","type":"discount"},"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:32:33][INFO] Server sending response (len=62): {"cart_id":"c1760358692649_17a144cd341f2cbe","result":"saved"}
[2025-10-13 20:32:34][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:32:34][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:32:34][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:32:34][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:32:34][INFO] Server sending response (len=301): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":0.0,"discount_policy":"何算？","final_amount":780.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:34][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":0.0,"discount_policy":"何算？","final_amount":780.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:34][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:34][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:32:34][INFO] UserWindow::refreshCart: got cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:34][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=10, subtotal=780.000000
[2025-10-13 20:32:35][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:32:35][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:32:35][INFO] Server sending response (len=1323): [{"id":"1","name":"何算？","policy":{"discount":0.9999999,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full...(truncated)
[2025-10-13 20:32:35][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 20:32:35][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:32:35][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:32:35][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:32:35][INFO] Server sending response (len=301): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":0.0,"discount_policy":"何算？","final_amount":780.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:35][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":0.0,"discount_policy":"何算？","final_amount":780.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:35][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:35][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:32:40][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:32:40][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:32:40][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:32:40][INFO] Server sending response (len=301): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":0.0,"discount_policy":"何算？","final_amount":780.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:40][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":0.0,"discount_policy":"何算？","final_amount":780.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:40][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:40][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:32:40][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":0.0,"discount_policy":"","final_amount":780.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:32:40][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":0.0,"discount_policy":"","final_amount":780.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:32:40][INFO] Server sending response (len=62): {"cart_id":"c1760358692649_17a144cd341f2cbe","result":"saved"}
[2025-10-13 20:32:41][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:32:41][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:32:42][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:32:42][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:32:42][INFO] Server sending response (len=293): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:42][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:42][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:42][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:32:42][INFO] UserWindow::refreshCart: got cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:42][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=10, subtotal=780.000000
[2025-10-13 20:32:42][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:32:42][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:32:42][INFO] Server sending response (len=1323): [{"id":"1","name":"何算？","policy":{"discount":0.9999999,"scope":"global","type":"discount"}},{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full...(truncated)
[2025-10-13 20:32:42][INFO] CLTgetAllPromotionsRaw: loaded 11 promotions
[2025-10-13 20:32:42][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:32:42][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:32:42][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:32:42][INFO] Server sending response (len=293): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:42][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:42][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:42][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:32:49][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:32:49][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:32:49][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:32:49][INFO] Server sending response (len=293): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:49][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:49][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:49][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:32:49][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":0.0,"discount_policy":"","final_amount":780.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:32:49][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":0.0,"discount_policy":"","final_amount":780.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:32:49][INFO] Server sending response (len=62): {"cart_id":"c1760358692649_17a144cd341f2cbe","result":"saved"}
[2025-10-13 20:32:50][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:32:50][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:32:51][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:32:51][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:32:51][INFO] Server sending response (len=293): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:51][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:51][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:51][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:32:51][INFO] UserWindow::refreshCart: got cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:51][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=10, subtotal=780.000000
[2025-10-13 20:32:51][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:32:51][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:32:51][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:32:51][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:32:54][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:32:54][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:32:54][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:32:54][INFO] Server sending response (len=293): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:54][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:32:54][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:32:54][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:33:01][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:33:01][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:33:01][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:33:01][INFO] Server sending response (len=293): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:33:01][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:33:01][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:33:01][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:33:02][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":93.60000000000002,"discount_policy":"98?95?88!","final_amount":686.4,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:33:02][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":93.60000000000002,"discount_policy":"98?95?88!","final_amount":686.4,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:33:02][INFO] Server sending response (len=62): {"cart_id":"c1760358692649_17a144cd341f2cbe","result":"saved"}
[2025-10-13 20:33:03][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:33:03][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:33:03][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:33:03][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:33:03][INFO] Server sending response (len=302): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":93.6,"discount_policy":"98?95?88!","final_amount":686.4,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:33:03][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":93.6,"discount_policy":"98?95?88!","final_amount":686.4,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:33:03][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:33:03][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:33:03][INFO] UserWindow::refreshCart: got cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:33:03][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=10, subtotal=780.000000
[2025-10-13 20:33:03][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:33:03][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:33:03][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:33:03][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:51:12][INFO] 应用启动
[2025-10-13 20:51:13][INFO] Server: DatabaseManager 已连接。
[2025-10-13 20:51:13][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 20:51:13][INFO] Client 已连接到 Server
[2025-10-13 20:51:13][INFO] DatabaseManager::connect() called.

[2025-10-13 20:51:13][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 20:51:21][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 20:51:21][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 20:51:21][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 20:51:21][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 20:51:22][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:51:22][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:51:22][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:51:22][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:51:22][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 20:51:22][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 20:51:22][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 20:51:22][INFO] Server SERgetAllGoods: dbManager ptr = 1685566513696, DTBisConnected=true
[2025-10-13 20:51:22][INFO] DTBloadAllGoods: this=000001887397E220 connection_=0000018873A19F30 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 20:51:22][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 20:51:22][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114080},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1116}]
[2025-10-13 20:51:22][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 20:51:22][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114080},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1116}]
[2025-10-13 20:51:22][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:51:22][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:22][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:51:22][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:51:22][INFO] Server sending response (len=302): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":93.6,"discount_policy":"98?95?88!","final_amount":686.4,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:22][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":93.6,"discount_policy":"98?95?88!","final_amount":686.4,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:22][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:22][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:51:22][INFO] UserWindow::refreshCart: got cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:23][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 20:51:23][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 20:51:23][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 20:51:23][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 20:51:23][INFO] UserWindow::refreshCart: filled shipping_address from account: JLU1
[2025-10-13 20:51:23][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":93.6,"discount_policy":"98?95?88!","final_amount":686.4,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:51:23][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":93.6,"discount_policy":"98?95?88!","final_amount":686.4,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:51:23][INFO] Server sending response (len=62): {"cart_id":"c1760358692649_17a144cd341f2cbe","result":"saved"}
[2025-10-13 20:51:23][INFO] UserWindow::refreshCart: saved cart with filled address returned true
[2025-10-13 20:51:23][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=10, subtotal=780.000000
[2025-10-13 20:51:23][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:51:23][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:51:23][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:51:23][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:51:24][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:51:24][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:51:24][INFO] Server sending response (len=216): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":2312.71,"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:51:24][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 20:51:24][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 20:51:24][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 20:51:24][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 20:51:28][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:28][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:51:28][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:51:28][INFO] Server sending response (len=306): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"98?95?88!","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:28][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"98?95?88!","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:28][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:28][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:51:36][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:36][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:51:36][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:51:36][INFO] Server sending response (len=306): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"98?95?88!","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:36][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":39.0,"discount_policy":"98?95?88!","final_amount":741.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:36][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:36][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:51:36][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":93.60000000000002,"discount_policy":"98?95?88!","final_amount":686.4,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:51:36][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":93.60000000000002,"discount_policy":"98?95?88!","final_amount":686.4,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:51:36][INFO] Server sending response (len=62): {"cart_id":"c1760358692649_17a144cd341f2cbe","result":"saved"}
[2025-10-13 20:51:37][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:51:37][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:37][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:51:37][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:51:37][INFO] Server sending response (len=306): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":93.6,"discount_policy":"98?95?88!","final_amount":686.4,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:38][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":93.6,"discount_policy":"98?95?88!","final_amount":686.4,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:38][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:38][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:51:38][INFO] UserWindow::refreshCart: got cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:38][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=10, subtotal=780.000000
[2025-10-13 20:51:38][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:51:38][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:51:38][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:51:38][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:51:41][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:41][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:51:41][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:51:41][INFO] Server sending response (len=306): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":93.6,"discount_policy":"98?95?88!","final_amount":686.4,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:41][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":93.6,"discount_policy":"98?95?88!","final_amount":686.4,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:41][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:41][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:51:41][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":1},{"discount":0.95,"min_qty":2},{"discount":0.9,"min_qty":10}],"type":"tiered"},"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:51:41][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":1},{"discount":0.95,"min_qty":2},{"discount":0.9,"min_qty":10}],"type":"tiered"},"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:51:41][INFO] Server sending response (len=62): {"cart_id":"c1760358692649_17a144cd341f2cbe","result":"saved"}
[2025-10-13 20:51:42][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:51:42][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:43][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:51:43][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:51:43][INFO] Server sending response (len=304): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:43][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:43][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:43][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:51:43][INFO] UserWindow::refreshCart: got cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:43][INFO] UserWindow::refreshCart: item 0 good_id=7, name=ハチミ, qty=10, subtotal=780.000000
[2025-10-13 20:51:43][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:51:43][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:51:43][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:51:43][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:51:43][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:44][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:51:44][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:51:44][INFO] Server sending response (len=304): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:44][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:44][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:44][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:51:46][INFO] UserWindow::onCheckout called
[2025-10-13 20:51:46][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:46][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:51:46][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:51:46][INFO] Server sending response (len=304): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:46][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:46][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:46][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:51:46][INFO] UserWindow::onCheckout: cart already has discount_policy="1919810" -> using existing policy
[2025-10-13 20:51:46][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:47][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:51:47][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:51:47][INFO] Server sending response (len=304): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:47][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:47][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:47][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:51:47][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:47][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:51:47][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:51:47][INFO] Server sending response (len=304): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:47][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:47][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:47][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:51:47][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:48][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:51:48][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:51:48][INFO] Server sending response (len=304): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:48][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:48][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:48][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:51:48][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:48][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:51:48][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:51:48][INFO] Server sending response (len=304): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:48][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:48][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:48][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:51:48][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:48][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:51:48][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:51:48][INFO] Server sending response (len=304): {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:49][INFO] UserWindow::onCheckout called
[2025-10-13 20:51:49][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:49][INFO] CLTgetCartForUser: raw response: {"cart_id":"c1760358692649_17a144cd341f2cbe","discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"is_converted":false,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"shipping_address":"JLU1","total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 20:51:49][INFO] CLTgetCartForUser: parsed cart_id=c1760358692649_17a144cd341f2cbe, items=1
[2025-10-13 20:51:49][INFO] CLTgetCartForUser: item[0] good_id=7, name=ハチミ, price=78.000000, qty=10, subtotal=780.000000
[2025-10-13 20:51:49][INFO] UserWindow::onCheckout: cart already has discount_policy="1919810" -> using existing policy
[2025-10-13 20:51:49][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:49][INFO] Server received request: GET_CART 17708659389
GET_CART 17708659389
[2025-10-13 20:51:49][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
GET_CART 17708659389
[2025-10-13 20:51:49][INFO] Server sending response (len=30): {"error":"未找到购物车"}
[2025-10-13 20:51:49][INFO] CLTgetCartForUser: raw response: {"error":"未找到购物车"}
[2025-10-13 20:51:49][WARN] CLTgetCartForUser: server returned error: {"error":"未找到购物车"}
[2025-10-13 20:51:49][INFO] UserWindow::onCheckout: detected updated cart from server
[2025-10-13 20:51:52][INFO] UserWindow::onCheckout: using cart.cart_id as order id: c1760358692649_17a144cd341f2cbe
[2025-10-13 20:51:52][INFO] UserWindow::onCheckout: sending order c1760358692649_17a144cd341f2cbe for user 17708659389
[2025-10-13 20:51:53][INFO] Server received request: ADD_SETTLED_ORDER {"discountPolicy":"1919810","discount_amount":78.0,"final_amount":702.0,"items":[{"price":78.0,"productId":7,"productName":"ハチミ","quantity":10,"subtotal":780.0}],"orderId":"c1760358692649_17a144cd341f2cbe","shipping_address":"JLU1","status":1,"total_amount":780.0,"userPhone":"17708659389"}
[2025-10-13 20:51:53][INFO] Server::SERprocessRequest: cmd=ADD_SETTLED_ORDER payload={"discountPolicy":"1919810","discount_amount":78.0,"final_amount":702.0,"items":[{"price":78.0,"productId":7,"productName":"ハチミ","quantity":10,"subtotal":780.0}],"orderId":"c1760358692649_17a144cd341f2cbe","shipping_address":"JLU1","status":1,"total_amount":780.0,"userPhone":"17708659389"}
[2025-10-13 20:51:53][INFO] Server SERaddSettledOrder: 减库存 good_id=7 -> 1106
[2025-10-13 20:51:53][INFO] Server sending response (len=63): {"order_id":"c1760358692649_17a144cd341f2cbe","result":"added"}
[2025-10-13 20:51:53][INFO] UserWindow::onCheckout CLTaddSettledOrder returned true
[2025-10-13 20:51:53][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:51:53][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 20:51:53][INFO] Server sending response (len=66): {"cart_id":"c20251013205153719_a4590f3ea09b6146","result":"saved"}
[2025-10-13 20:51:53][INFO] UserWindow::onCheckout CLTsaveCartForUser returned true
[2025-10-13 20:51:54][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 20:51:54][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 20:51:55][INFO] Server received request: GET_CART 17708659389
[2025-10-13 20:51:55][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 20:51:55][INFO] Server sending response (len=214): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 20:51:55][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 20:51:55][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=0
[2025-10-13 20:51:55][INFO] UserWindow::refreshCart: got cart_id=c20251013205153719_a4590f3ea09b6146, items=0
[2025-10-13 20:51:55][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 20:51:55][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 20:51:55][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 20:51:55][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 20:51:56][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:51:56][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:51:56][INFO] Server sending response (len=322): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":2312.71,"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1,"user_phone":"17708659389"},{"final_amount":702.0,"order_id":"c1760358692649_17a144cd341f2cbe","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:51:56][INFO] CLTgetCartForUser: empty response for userPhone=17708659389
[2025-10-13 20:51:56][INFO] UserWindow::onCheckout: detected updated cart from server
[2025-10-13 20:51:58][INFO] UserWindow::onCheckout: using cart.cart_id as order id: c1760358692649_17a144cd341f2cbe
[2025-10-13 20:51:58][INFO] UserWindow::onCheckout: sending order c1760358692649_17a144cd341f2cbe for user 17708659389
[2025-10-13 20:51:59][INFO] Server received request: ADD_SETTLED_ORDER {"discountPolicy":"1919810","discount_amount":78.0,"final_amount":702.0,"items":[{"price":78.0,"productId":7,"productName":"ハチミ","quantity":10,"subtotal":780.0}],"orderId":"c1760358692649_17a144cd341f2cbe","shipping_address":"JLU1","status":1,"total_amount":780.0,"userPhone":"17708659389"}
[2025-10-13 20:51:59][INFO] Server::SERprocessRequest: cmd=ADD_SETTLED_ORDER payload={"discountPolicy":"1919810","discount_amount":78.0,"final_amount":702.0,"items":[{"price":78.0,"productId":7,"productName":"ハチミ","quantity":10,"subtotal":780.0}],"orderId":"c1760358692649_17a144cd341f2cbe","shipping_address":"JLU1","status":1,"total_amount":780.0,"userPhone":"17708659389"}
[2025-10-13 20:51:59][INFO] Server sending response (len=24): {"error":"保存失败"}
[2025-10-13 20:51:59][INFO] UserWindow::onCheckout CLTaddSettledOrder returned false
[2025-10-13 20:52:02][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:52:02][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:52:02][INFO] Server sending response (len=322): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":2312.71,"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1,"user_phone":"17708659389"},{"final_amount":702.0,"order_id":"c1760358692649_17a144cd341f2cbe","status":1,"user_phone":"17708659389"}]
[2025-10-13 20:52:06][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760358692649_17a144cd341f2cbe","userPhone":"17708659389"}
[2025-10-13 20:52:06][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760358692649_17a144cd341f2cbe","userPhone":"17708659389"}
[2025-10-13 20:52:06][INFO] Server sending response (len=170): {"final_amount":702.0,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"order_id":"c1760358692649_17a144cd341f2cbe","status":1}
[2025-10-13 20:52:14][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 20:52:14][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 20:52:14][INFO] Server sending response (len=322): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":2312.71,"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1,"user_phone":"17708659389"},{"final_amount":702.0,"order_id":"c1760358692649_17a144cd341f2cbe","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:00:54][INFO] 应用启动
[2025-10-13 21:00:54][INFO] Server: DatabaseManager 已连接。
[2025-10-13 21:00:54][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 21:00:54][INFO] Client 已连接到 Server
[2025-10-13 21:00:55][INFO] DatabaseManager::connect() called.

[2025-10-13 21:00:55][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 21:01:02][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 21:01:02][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 21:01:02][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 21:01:02][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 21:01:03][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:01:03][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:01:03][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 21:01:03][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:01:03][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:01:03][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:01:03][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:01:03][INFO] Server SERgetAllGoods: dbManager ptr = 2050917863872, DTBisConnected=true
[2025-10-13 21:01:03][INFO] DTBloadAllGoods: this=000001DD843B11C0 connection_=000001DD84450960 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:01:03][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:01:03][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114080},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:01:03][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:01:03][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":114080},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":406},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":15090},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:01:03][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:01:03][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:01:03][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:01:03][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:01:03][INFO] Server sending response (len=214): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:01:04][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:01:04][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=0
[2025-10-13 21:01:04][INFO] UserWindow::refreshCart: got cart_id=c20251013205153719_a4590f3ea09b6146, items=0
[2025-10-13 21:01:04][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:01:04][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:01:04][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 21:01:04][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:01:04][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:01:04][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:01:04][INFO] Server sending response (len=322): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":2312.71,"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1,"user_phone":"17708659389"},{"final_amount":702.0,"order_id":"c1760358692649_17a144cd341f2cbe","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:01:05][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:01:05][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:01:05][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:01:05][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:01:29][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:01:29][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:01:29][INFO] Server sending response (len=322): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":2312.71,"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1,"user_phone":"17708659389"},{"final_amount":702.0,"order_id":"c1760358692649_17a144cd341f2cbe","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:01:32][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760355502885_11e5c8e260d0a5f5","userPhone":"17708659389"}
[2025-10-13 21:01:32][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760355502885_11e5c8e260d0a5f5","userPhone":"17708659389"}
[2025-10-13 21:01:32][INFO] Server sending response (len=397): {"final_amount":287.54,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1}
[2025-10-13 21:01:55][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=5, name=ikun, price=2.500000, qty=189
[2025-10-13 21:01:55][INFO] Server received request: ADD_TO_CART {"price":2.5,"productId":5,"productName":"ikun","quantity":189,"userPhone":"17708659389"}
[2025-10-13 21:01:55][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":2.5,"productId":5,"productName":"ikun","quantity":189,"userPhone":"17708659389"}
[2025-10-13 21:01:55][INFO] Server sending response (len=63): {"cart_id":"c20251013205153719_a4590f3ea09b6146","result":"ok"}
[2025-10-13 21:01:55][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 21:01:56][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:01:56][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:01:56][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:01:56][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:01:56][INFO] Server sending response (len=297): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":23.63,"discount_policy":"","final_amount":448.88,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:01:57][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":23.63,"discount_policy":"","final_amount":448.88,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:01:57][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:01:57][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:01:57][INFO] UserWindow::refreshCart: got cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:01:57][INFO] UserWindow::refreshCart: item 0 good_id=5, name=ikun, qty=189, subtotal=472.500000
[2025-10-13 21:01:57][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:01:57][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:01:57][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 21:01:57][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:01:59][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:01:59][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:01:59][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:01:59][INFO] Server sending response (len=297): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":23.63,"discount_policy":"","final_amount":448.88,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:01:59][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":23.63,"discount_policy":"","final_amount":448.88,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:01:59][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:01:59][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:09][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:09][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:09][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:09][INFO] Server sending response (len=297): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":23.63,"discount_policy":"","final_amount":448.88,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:10][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":23.63,"discount_policy":"","final_amount":448.88,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:10][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:10][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:10][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":47.25,"discount_policy":"1919810","final_amount":425.25,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":1},{"discount":0.95,"min_qty":2},{"discount":0.9,"min_qty":10}],"type":"tiered"},"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:02:10][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":47.25,"discount_policy":"1919810","final_amount":425.25,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":1},{"discount":0.95,"min_qty":2},{"discount":0.9,"min_qty":10}],"type":"tiered"},"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:02:10][INFO] Server sending response (len=66): {"cart_id":"c20251013205153719_a4590f3ea09b6146","result":"saved"}
[2025-10-13 21:02:11][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:02:11][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:11][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:11][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:11][INFO] Server sending response (len=304): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":47.25,"discount_policy":"1919810","final_amount":425.25,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:11][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":47.25,"discount_policy":"1919810","final_amount":425.25,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:11][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:11][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:11][INFO] UserWindow::refreshCart: got cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:11][INFO] UserWindow::refreshCart: item 0 good_id=5, name=ikun, qty=189, subtotal=472.500000
[2025-10-13 21:02:11][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:02:11][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:02:11][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 21:02:11][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:02:12][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:12][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:12][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:12][INFO] Server sending response (len=304): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":47.25,"discount_policy":"1919810","final_amount":425.25,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:12][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":47.25,"discount_policy":"1919810","final_amount":425.25,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:12][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:12][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:14][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:15][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:15][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:15][INFO] Server sending response (len=304): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":47.25,"discount_policy":"1919810","final_amount":425.25,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:15][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":47.25,"discount_policy":"1919810","final_amount":425.25,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:15][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:15][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:18][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:18][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:18][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:18][INFO] Server sending response (len=304): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":47.25,"discount_policy":"1919810","final_amount":425.25,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:19][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":47.25,"discount_policy":"1919810","final_amount":425.25,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:19][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:19][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:19][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":56.69999999999999,"discount_policy":"98?95?88!","final_amount":415.8,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:02:19][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":56.69999999999999,"discount_policy":"98?95?88!","final_amount":415.8,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:02:19][INFO] Server sending response (len=66): {"cart_id":"c20251013205153719_a4590f3ea09b6146","result":"saved"}
[2025-10-13 21:02:20][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:02:20][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:20][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:20][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:20][INFO] Server sending response (len=304): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":56.7,"discount_policy":"98?95?88!","final_amount":415.8,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:20][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":56.7,"discount_policy":"98?95?88!","final_amount":415.8,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:20][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:20][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:20][INFO] UserWindow::refreshCart: got cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:20][INFO] UserWindow::refreshCart: item 0 good_id=5, name=ikun, qty=189, subtotal=472.500000
[2025-10-13 21:02:20][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:02:20][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:02:20][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 21:02:20][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:02:21][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:21][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:21][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:21][INFO] Server sending response (len=304): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":56.7,"discount_policy":"98?95?88!","final_amount":415.8,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:21][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":56.7,"discount_policy":"98?95?88!","final_amount":415.8,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:21][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:21][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:30][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:31][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:31][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:31][INFO] Server sending response (len=304): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":56.7,"discount_policy":"98?95?88!","final_amount":415.8,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:31][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":56.7,"discount_policy":"98?95?88!","final_amount":415.8,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:31][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:31][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:31][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":23.625,"discount_policy":"95%off","final_amount":448.875,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:02:31][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":23.625,"discount_policy":"95%off","final_amount":448.875,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:02:31][INFO] Server sending response (len=66): {"cart_id":"c20251013205153719_a4590f3ea09b6146","result":"saved"}
[2025-10-13 21:02:32][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:02:32][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:32][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:32][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:32][INFO] Server sending response (len=303): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":23.63,"discount_policy":"95%off","final_amount":448.88,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:32][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":23.63,"discount_policy":"95%off","final_amount":448.88,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:32][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:32][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:32][INFO] UserWindow::refreshCart: got cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:32][INFO] UserWindow::refreshCart: item 0 good_id=5, name=ikun, qty=189, subtotal=472.500000
[2025-10-13 21:02:33][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:02:33][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:02:33][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 21:02:33][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:02:33][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:33][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:33][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:33][INFO] Server sending response (len=303): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":23.63,"discount_policy":"95%off","final_amount":448.88,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:33][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":23.63,"discount_policy":"95%off","final_amount":448.88,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:33][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:33][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:38][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:38][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:38][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:38][INFO] Server sending response (len=303): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":23.63,"discount_policy":"95%off","final_amount":448.88,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:38][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":23.63,"discount_policy":"95%off","final_amount":448.88,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:38][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:38][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:38][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":56.69999999999999,"discount_policy":"98?95?88!","final_amount":415.8,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:02:38][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":56.69999999999999,"discount_policy":"98?95?88!","final_amount":415.8,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:02:38][INFO] Server sending response (len=66): {"cart_id":"c20251013205153719_a4590f3ea09b6146","result":"saved"}
[2025-10-13 21:02:39][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:02:39][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:39][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:39][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:39][INFO] Server sending response (len=304): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":56.7,"discount_policy":"98?95?88!","final_amount":415.8,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:40][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":56.7,"discount_policy":"98?95?88!","final_amount":415.8,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:40][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:40][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:40][INFO] UserWindow::refreshCart: got cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:40][INFO] UserWindow::refreshCart: item 0 good_id=5, name=ikun, qty=189, subtotal=472.500000
[2025-10-13 21:02:40][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:02:40][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:02:40][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 21:02:40][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:02:40][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:40][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:40][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:40][INFO] Server sending response (len=304): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":56.7,"discount_policy":"98?95?88!","final_amount":415.8,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:41][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":56.7,"discount_policy":"98?95?88!","final_amount":415.8,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"shipping_address":"JLU1","total_amount":472.5,"user_phone":"17708659389"}
[2025-10-13 21:02:41][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=1
[2025-10-13 21:02:41][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:52][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=4, name=dingdongji, price=8.110000, qty=58
[2025-10-13 21:02:52][INFO] Server received request: ADD_TO_CART {"price":8.11,"productId":4,"productName":"dingdongji","quantity":58,"userPhone":"17708659389"}
[2025-10-13 21:02:52][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":8.11,"productId":4,"productName":"dingdongji","quantity":58,"userPhone":"17708659389"}
[2025-10-13 21:02:52][INFO] Server sending response (len=63): {"cart_id":"c20251013205153719_a4590f3ea09b6146","result":"ok"}
[2025-10-13 21:02:52][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 21:02:53][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:02:53][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:54][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:54][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:54][INFO] Server sending response (len=391): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":47.14,"discount_policy":"98?95?88!","final_amount":895.74,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38}],"shipping_address":"JLU1","total_amount":942.88,"user_phone":"17708659389"}
[2025-10-13 21:02:54][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":47.14,"discount_policy":"98?95?88!","final_amount":895.74,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38}],"shipping_address":"JLU1","total_amount":942.88,"user_phone":"17708659389"}
[2025-10-13 21:02:54][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=2
[2025-10-13 21:02:54][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:54][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:02:54][INFO] UserWindow::refreshCart: got cart_id=c20251013205153719_a4590f3ea09b6146, items=2
[2025-10-13 21:02:54][INFO] UserWindow::refreshCart: item 0 good_id=5, name=ikun, qty=189, subtotal=472.500000
[2025-10-13 21:02:54][INFO] UserWindow::refreshCart: item 1 good_id=4, name=dingdongji, qty=58, subtotal=470.380000
[2025-10-13 21:02:54][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:02:54][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:02:54][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 21:02:54][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:02:58][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=2, name=manbo, price=28.880000, qty=111
[2025-10-13 21:02:58][INFO] Server received request: ADD_TO_CART {"price":28.88,"productId":2,"productName":"manbo","quantity":111,"userPhone":"17708659389"}
[2025-10-13 21:02:58][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":28.88,"productId":2,"productName":"manbo","quantity":111,"userPhone":"17708659389"}
[2025-10-13 21:02:58][INFO] Server sending response (len=63): {"cart_id":"c20251013205153719_a4590f3ea09b6146","result":"ok"}
[2025-10-13 21:02:58][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 21:02:59][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:02:59][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:02:59][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:02:59][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:02:59][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":207.43,"discount_policy":"98?95?88!","final_amount":3941.13,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:02:59][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":207.43,"discount_policy":"98?95?88!","final_amount":3941.13,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:02:59][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:02:59][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:02:59][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:02:59][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:02:59][INFO] UserWindow::refreshCart: got cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:02:59][INFO] UserWindow::refreshCart: item 0 good_id=5, name=ikun, qty=189, subtotal=472.500000
[2025-10-13 21:02:59][INFO] UserWindow::refreshCart: item 1 good_id=4, name=dingdongji, qty=58, subtotal=470.380000
[2025-10-13 21:02:59][INFO] UserWindow::refreshCart: item 2 good_id=2, name=manbo, qty=111, subtotal=3205.680000
[2025-10-13 21:03:00][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:03:00][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:03:00][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 21:03:00][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:03:00][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:01][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:01][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:01][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":207.43,"discount_policy":"98?95?88!","final_amount":3941.13,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:01][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":207.43,"discount_policy":"98?95?88!","final_amount":3941.13,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:01][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:01][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:01][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:01][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:03][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:03][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:03][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:03][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":207.43,"discount_policy":"98?95?88!","final_amount":3941.13,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:03][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":207.43,"discount_policy":"98?95?88!","final_amount":3941.13,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:03][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:03][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:03][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:03][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:08][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:08][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:08][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:08][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":207.43,"discount_policy":"98?95?88!","final_amount":3941.13,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:08][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":207.43,"discount_policy":"98?95?88!","final_amount":3941.13,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:08][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:08][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:08][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:08][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:08][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":3960.5599999999995,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"},"shipping_address":"JLU1","total_amount":4148.5599999999995,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:03:08][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":3960.5599999999995,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"},"shi...(truncated)
[2025-10-13 21:03:08][INFO] Server sending response (len=66): {"cart_id":"c20251013205153719_a4590f3ea09b6146","result":"saved"}
[2025-10-13 21:03:09][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:03:09][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:09][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:09][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:09][INFO] Server sending response (len=479): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":3960.56,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:10][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":3960.56,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:10][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:10][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:10][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:10][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:10][INFO] UserWindow::refreshCart: got cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:10][INFO] UserWindow::refreshCart: item 0 good_id=5, name=ikun, qty=189, subtotal=472.500000
[2025-10-13 21:03:10][INFO] UserWindow::refreshCart: item 1 good_id=4, name=dingdongji, qty=58, subtotal=470.380000
[2025-10-13 21:03:10][INFO] UserWindow::refreshCart: item 2 good_id=2, name=manbo, qty=111, subtotal=3205.680000
[2025-10-13 21:03:10][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:03:10][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:03:10][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 21:03:10][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:03:10][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:10][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:10][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:10][INFO] Server sending response (len=479): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":3960.56,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:11][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":3960.56,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:11][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:11][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:11][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:11][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:15][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:15][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:15][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:15][INFO] Server sending response (len=479): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":3960.56,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:15][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":188.0,"discount_policy":"满1999减288","final_amount":3960.56,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:15][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:15][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:15][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:15][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:15][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.8271999999997,"discount_policy":"98?95?88!","final_amount":3650.7327999999998,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"},"shipping_address":"JLU1","total_amount":4148.5599999999995,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:03:15][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.8271999999997,"discount_policy":"98?95?88!","final_amount":3650.7327999999998,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95...(truncated)
[2025-10-13 21:03:15][INFO] Server sending response (len=66): {"cart_id":"c20251013205153719_a4590f3ea09b6146","result":"saved"}
[2025-10-13 21:03:16][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:03:16][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:16][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:16][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:16][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:17][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:17][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:17][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:17][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:17][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:17][INFO] UserWindow::refreshCart: got cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:17][INFO] UserWindow::refreshCart: item 0 good_id=5, name=ikun, qty=189, subtotal=472.500000
[2025-10-13 21:03:17][INFO] UserWindow::refreshCart: item 1 good_id=4, name=dingdongji, qty=58, subtotal=470.380000
[2025-10-13 21:03:17][INFO] UserWindow::refreshCart: item 2 good_id=2, name=manbo, qty=111, subtotal=3205.680000
[2025-10-13 21:03:17][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:03:17][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:03:17][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 21:03:17][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:03:17][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:17][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:17][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:17][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:17][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:17][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:17][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:17][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:17][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:21][INFO] UserWindow::onCheckout called
[2025-10-13 21:03:21][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:21][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:21][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:21][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:21][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:21][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:21][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:21][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:21][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:21][INFO] UserWindow::onCheckout: cart already has discount_policy="98?95?88!" -> using existing policy
[2025-10-13 21:03:21][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:21][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:21][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:21][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:21][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:21][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:21][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:21][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:21][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:22][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:22][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:22][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:22][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:22][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:22][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:22][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:22][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:22][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:22][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:22][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:22][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:22][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:22][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:22][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:22][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:22][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:22][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:22][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:23][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:23][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:23][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:23][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:23][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:23][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:23][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:23][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:23][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:23][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:23][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:23][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:23][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:23][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:23][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:23][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:23][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:23][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:24][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:24][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:24][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:24][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:24][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:24][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:24][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:24][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:24][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:24][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:24][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:24][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:24][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:24][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:24][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:24][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:24][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:24][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:24][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:24][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:24][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:25][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:25][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:25][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:25][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:25][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:25][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:25][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:27][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:27][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:27][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:27][INFO] Server sending response (len=476): {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:27][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013205153719_a4590f3ea09b6146","discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"is_converted":true,"items":[{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68}],"shipping_address":"JLU1","total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:03:27][INFO] CLTgetCartForUser: parsed cart_id=c20251013205153719_a4590f3ea09b6146, items=3
[2025-10-13 21:03:27][INFO] CLTgetCartForUser: item[0] good_id=5, name=ikun, price=2.500000, qty=189, subtotal=472.500000
[2025-10-13 21:03:27][INFO] CLTgetCartForUser: item[1] good_id=4, name=dingdongji, price=8.110000, qty=58, subtotal=470.380000
[2025-10-13 21:03:27][INFO] CLTgetCartForUser: item[2] good_id=2, name=manbo, price=28.880000, qty=111, subtotal=3205.680000
[2025-10-13 21:03:27][INFO] UserWindow::onCheckout: refreshed cart_id from server -> c20251013205153719_a4590f3ea09b6146
[2025-10-13 21:03:27][INFO] UserWindow::onCheckout: using cart.cart_id as order id: c20251013205153719_a4590f3ea09b6146
[2025-10-13 21:03:27][INFO] UserWindow::onCheckout: sending order c20251013205153719_a4590f3ea09b6146 for user 17708659389
[2025-10-13 21:03:28][INFO] Server received request: ADD_SETTLED_ORDER {"discountPolicy":"98?95?88!","discount_amount":497.83,"final_amount":3650.73,"items":[{"price":2.5,"productId":5,"productName":"ikun","quantity":189,"subtotal":472.5},{"price":8.11,"productId":4,"productName":"dingdongji","quantity":58,"subtotal":470.38},{"price":28.88,"productId":2,"productName":"manbo","quantity":111,"subtotal":3205.68}],"orderId":"c20251013205153719_a4590f3ea09b6146","shipping_address":"JLU1","status":1,"total_amount":4148.56,"userPhone":"17708659389"}
[2025-10-13 21:03:28][INFO] Server::SERprocessRequest: cmd=ADD_SETTLED_ORDER payload={"discountPolicy":"98?95?88!","discount_amount":497.83,"final_amount":3650.73,"items":[{"price":2.5,"productId":5,"productName":"ikun","quantity":189,"subtotal":472.5},{"price":8.11,"productId":4,"productName":"dingdongji","quantity":58,"subtotal":470.38},{"price":28.88,"productId":2,"productName":"manbo","quantity":111,"subtotal":3205.68}],"orderId":"c20251013205153719_a4590f3ea09b6146","shipping_address":"JLU1","status":1,"total_amount":4148.56,"userPhone":"17708659389"}
[2025-10-13 21:03:28][INFO] Server SERaddSettledOrder: 减库存 good_id=5 -> 14901
[2025-10-13 21:03:28][INFO] Server SERaddSettledOrder: 减库存 good_id=4 -> 348
[2025-10-13 21:03:28][INFO] Server SERaddSettledOrder: 减库存 good_id=2 -> 113969
[2025-10-13 21:03:28][INFO] Server sending response (len=67): {"order_id":"c20251013205153719_a4590f3ea09b6146","result":"added"}
[2025-10-13 21:03:28][INFO] UserWindow::onCheckout CLTaddSettledOrder returned true
[2025-10-13 21:03:28][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:03:28][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:03:28][INFO] Server sending response (len=66): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","result":"saved"}
[2025-10-13 21:03:28][INFO] UserWindow::onCheckout CLTsaveCartForUser returned true
[2025-10-13 21:03:29][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:03:29][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:03:29][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:03:29][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:03:29][INFO] Server sending response (len=214): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:03:29][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:03:29][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=0
[2025-10-13 21:03:29][INFO] UserWindow::refreshCart: got cart_id=c20251013210328472_9c6f7b4a1411aefc, items=0
[2025-10-13 21:03:30][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:03:30][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:03:30][INFO] Server sending response (len=1226): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?88!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":7},{"discount":0.88,"min_qty":10}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600...(truncated)
[2025-10-13 21:03:30][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:03:30][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:03:30][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:03:30][INFO] Server sending response (len=434): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":2312.71,"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1,"user_phone":"17708659389"},{"final_amount":702.0,"order_id":"c1760358692649_17a144cd341f2cbe","status":1,"user_phone":"17708659389"},{"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:03:36][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:03:36][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:03:36][INFO] Server sending response (len=337): {"final_amount":3650.73,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"order_id":"c20251013205153719_a4590f3ea09b6146","status":1}
[2025-10-13 21:04:11][INFO] DatabaseManager::disconnect() called.

[2025-10-13 21:04:11][INFO] 应用退出

[2025-10-13 21:04:11][INFO] DatabaseManager::disconnect() called.

[2025-10-13 21:10:44][INFO] 应用启动
[2025-10-13 21:10:44][INFO] Server: DatabaseManager 已连接。
[2025-10-13 21:10:44][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 21:10:44][INFO] Client 已连接到 Server
[2025-10-13 21:10:44][INFO] DatabaseManager::connect() called.

[2025-10-13 21:10:44][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 21:10:51][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 21:10:51][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 21:10:51][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 21:10:51][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 21:10:52][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:10:52][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:10:52][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:10:52][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:10:52][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:10:52][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:10:52][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:10:52][INFO] Server SERgetAllGoods: dbManager ptr = 2492411672592, DTBisConnected=true
[2025-10-13 21:10:52][INFO] DTBloadAllGoods: this=000002444F4FF810 connection_=000002444F588070 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:10:52][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:10:52][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:10:52][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:10:52][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:10:52][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:10:52][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:10:52][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:10:52][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:10:52][INFO] Server sending response (len=214): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:10:52][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:10:52][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=0
[2025-10-13 21:10:52][INFO] UserWindow::refreshCart: got cart_id=c20251013210328472_9c6f7b4a1411aefc, items=0
[2025-10-13 21:10:53][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:10:53][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:10:53][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:10:53][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:10:53][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:10:53][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:10:53][INFO] Server sending response (len=434): [{"final_amount":287.54,"order_id":"c1760355502885_11e5c8e260d0a5f5","status":1,"user_phone":"17708659389"},{"final_amount":2312.71,"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1,"user_phone":"17708659389"},{"final_amount":702.0,"order_id":"c1760358692649_17a144cd341f2cbe","status":1,"user_phone":"17708659389"},{"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:10:53][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:10:53][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:10:53][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:10:53][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:10:59][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:10:59][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:10:59][INFO] Server sending response (len=468): {"discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"order_id":"c20251013205153719_a4590f3ea09b6146","shipping_address":"JLU1","status":1,"total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:11:03][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760358692649_17a144cd341f2cbe","userPhone":"17708659389"}
[2025-10-13 21:11:03][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760358692649_17a144cd341f2cbe","userPhone":"17708659389"}
[2025-10-13 21:11:03][INFO] Server sending response (len=291): {"discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"order_id":"c1760358692649_17a144cd341f2cbe","shipping_address":"","status":1,"total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 21:11:54][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760355502885_11e5c8e260d0a5f5","userPhone":"17708659389"}
[2025-10-13 21:11:54][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760355502885_11e5c8e260d0a5f5","userPhone":"17708659389"}
[2025-10-13 21:11:54][INFO] Server sending response (len=522): {"discount_amount":39.21,"discount_policy":"98?95?88!","final_amount":287.54,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99},{"good_id":2,"good_name":"manbo","price":28.88,"quantity":2,"subtotal":57.76},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":10,"subtotal":25.0},{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":3,"subtotal":234.0}],"order_id":"c1760355502885_11e5c8e260d0a5f5","shipping_address":"","status":1,"total_amount":326.75,"user_phone":"17708659389"}
[2025-10-13 21:11:55][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"c1760355502885_11e5c8e260d0a5f5","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 21:11:55][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"c1760355502885_11e5c8e260d0a5f5","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 21:11:55][INFO] Server SERdeleteSettledOrder: deleted order c1760355502885_11e5c8e260d0a5f5
[2025-10-13 21:11:55][INFO] Server sending response (len=65): {"order_id":"c1760355502885_11e5c8e260d0a5f5","result":"deleted"}
[2025-10-13 21:11:56][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:11:56][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:11:56][INFO] Server sending response (len=327): [{"final_amount":2312.71,"order_id":"c1760357190185_eb6f7f9b8965e2df","status":1,"user_phone":"17708659389"},{"final_amount":702.0,"order_id":"c1760358692649_17a144cd341f2cbe","status":1,"user_phone":"17708659389"},{"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:11:58][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760357190185_eb6f7f9b8965e2df","userPhone":"17708659389"}
[2025-10-13 21:11:58][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760357190185_eb6f7f9b8965e2df","userPhone":"17708659389"}
[2025-10-13 21:11:58][INFO] Server sending response (len=298): {"discount_amount":315.37,"discount_policy":"98?95?88!","final_amount":2312.71,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":91,"subtotal":2628.08}],"order_id":"c1760357190185_eb6f7f9b8965e2df","shipping_address":"","status":1,"total_amount":2628.08,"user_phone":"17708659389"}
[2025-10-13 21:11:59][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"c1760357190185_eb6f7f9b8965e2df","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 21:11:59][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"c1760357190185_eb6f7f9b8965e2df","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 21:11:59][INFO] Server SERdeleteSettledOrder: deleted order c1760357190185_eb6f7f9b8965e2df
[2025-10-13 21:11:59][INFO] Server sending response (len=65): {"order_id":"c1760357190185_eb6f7f9b8965e2df","result":"deleted"}
[2025-10-13 21:12:00][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:12:00][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:12:00][INFO] Server sending response (len=219): [{"final_amount":702.0,"order_id":"c1760358692649_17a144cd341f2cbe","status":1,"user_phone":"17708659389"},{"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:12:03][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c1760358692649_17a144cd341f2cbe","userPhone":"17708659389"}
[2025-10-13 21:12:03][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c1760358692649_17a144cd341f2cbe","userPhone":"17708659389"}
[2025-10-13 21:12:03][INFO] Server sending response (len=291): {"discount_amount":78.0,"discount_policy":"1919810","final_amount":702.0,"items":[{"good_id":7,"good_name":"ハチミ","price":78.0,"quantity":10,"subtotal":780.0}],"order_id":"c1760358692649_17a144cd341f2cbe","shipping_address":"","status":1,"total_amount":780.0,"user_phone":"17708659389"}
[2025-10-13 21:12:03][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"c1760358692649_17a144cd341f2cbe","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 21:12:03][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"c1760358692649_17a144cd341f2cbe","shipping_address":"","userPhone":"17708659389"}
[2025-10-13 21:12:03][INFO] Server SERdeleteSettledOrder: deleted order c1760358692649_17a144cd341f2cbe
[2025-10-13 21:12:03][INFO] Server sending response (len=65): {"order_id":"c1760358692649_17a144cd341f2cbe","result":"deleted"}
[2025-10-13 21:12:04][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:12:04][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:12:04][INFO] Server sending response (len=113): [{"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:12:06][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:12:06][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:12:06][INFO] Server sending response (len=468): {"discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"order_id":"c20251013205153719_a4590f3ea09b6146","shipping_address":"JLU1","status":1,"total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:12:38][INFO] UserWindow::onReturnToIdentitySelection called
[2025-10-13 21:12:38][INFO] 收到 UserWindow::backRequested，返回登录界面
[2025-10-13 21:12:38][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 21:12:47][INFO] 管理员登录成功，打开管理员窗口
[2025-10-13 21:12:48][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:12:48][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:12:48][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:12:48][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:12:48][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:12:48][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:12:48][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:12:48][INFO] Server SERgetAllGoods: dbManager ptr = 2492411672592, DTBisConnected=true
[2025-10-13 21:12:48][INFO] DTBloadAllGoods: this=000002444F4FF810 connection_=000002444F588070 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:12:48][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:12:48][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:12:48][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:12:48][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:12:48][INFO] Server received request: GET_ALL_ORDERS {}
[2025-10-13 21:12:48][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={}
[2025-10-13 21:12:48][INFO] Server sending response (len=113): [{"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:12:49][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:12:49][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:12:49][INFO] Server sending response (len=468): {"discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"order_id":"c20251013205153719_a4590f3ea09b6146","shipping_address":"JLU1","status":1,"total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:12:49][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:12:49][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:12:49][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:12:49][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:12:49][INFO] AdminWindow::refreshPromotions loaded 10 promotions
[2025-10-13 21:12:54][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:12:54][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:12:54][INFO] Server sending response (len=468): {"discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"order_id":"c20251013205153719_a4590f3ea09b6146","shipping_address":"JLU1","status":1,"total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:13:10][INFO] AdminWindow::onLoadCartForUser: request for userPhone=17708659389
[2025-10-13 21:13:10][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:13:10][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:13:10][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:13:10][INFO] Server sending response (len=214): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:13:11][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:13:11][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=0
[2025-10-13 21:13:11][INFO] AdminWindow::onLoadCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=0
[2025-10-13 21:18:04][INFO] 应用启动
[2025-10-13 21:18:04][INFO] Server: DatabaseManager 已连接。
[2025-10-13 21:18:04][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 21:18:04][INFO] Client 已连接到 Server
[2025-10-13 21:18:04][INFO] DatabaseManager::connect() called.

[2025-10-13 21:18:04][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 21:18:10][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 21:18:10][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 21:18:10][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 21:18:10][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 21:18:11][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:18:11][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:18:11][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:18:11][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:18:11][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:18:11][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:18:11][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:18:11][INFO] Server SERgetAllGoods: dbManager ptr = 1686802996448, DTBisConnected=true
[2025-10-13 21:18:11][INFO] DTBloadAllGoods: this=00000188BD4B1CE0 connection_=00000188BD539900 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:18:11][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:18:11][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:18:11][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:18:11][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:18:11][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:18:11][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:18:11][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:18:11][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:18:11][INFO] Server sending response (len=214): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:18:12][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:18:12][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=0
[2025-10-13 21:18:12][INFO] UserWindow::refreshCart: got cart_id=c20251013210328472_9c6f7b4a1411aefc, items=0
[2025-10-13 21:18:12][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:18:12][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:18:12][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:18:12][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:18:12][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:18:12][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:18:12][INFO] Server sending response (len=113): [{"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:18:12][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:18:12][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:18:12][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:18:12][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:18:19][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:18:19][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:18:19][INFO] Server sending response (len=113): [{"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:18:22][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:18:22][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:18:22][INFO] Server sending response (len=468): {"discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"order_id":"c20251013205153719_a4590f3ea09b6146","shipping_address":"JLU1","status":1,"total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:19:28][INFO] 应用启动
[2025-10-13 21:19:28][INFO] Server: DatabaseManager 已连接。
[2025-10-13 21:19:28][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 21:19:28][INFO] Client 已连接到 Server
[2025-10-13 21:19:28][INFO] DatabaseManager::connect() called.

[2025-10-13 21:19:28][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 21:19:35][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 21:19:35][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 21:19:35][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 21:19:35][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 21:19:36][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:19:36][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:19:36][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:19:36][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:19:36][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:19:36][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:19:36][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:19:36][INFO] Server SERgetAllGoods: dbManager ptr = 2679524173136, DTBisConnected=true
[2025-10-13 21:19:36][INFO] DTBloadAllGoods: this=0000026FE0162550 connection_=0000026FE0205FD0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:19:36][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:19:36][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:19:36][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:19:36][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":784},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:19:36][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:19:36][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:19:36][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:19:36][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:19:36][INFO] Server sending response (len=214): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:19:36][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:19:36][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=0
[2025-10-13 21:19:36][INFO] UserWindow::refreshCart: got cart_id=c20251013210328472_9c6f7b4a1411aefc, items=0
[2025-10-13 21:19:37][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:19:37][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:19:37][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:19:37][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:19:37][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:19:37][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:19:37][INFO] Server sending response (len=113): [{"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:19:37][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:19:37][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:19:37][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:19:37][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:19:54][INFO] UserWindow::onAddToCart params: phone=17708659389, goodId=1, name=hyw, price=9.990000, qty=1
[2025-10-13 21:19:54][INFO] Server received request: ADD_TO_CART {"price":9.99,"productId":1,"productName":"hyw","quantity":1,"userPhone":"17708659389"}
[2025-10-13 21:19:54][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":9.99,"productId":1,"productName":"hyw","quantity":1,"userPhone":"17708659389"}
[2025-10-13 21:19:54][INFO] Server sending response (len=63): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","result":"ok"}
[2025-10-13 21:19:54][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 21:19:55][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:19:55][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:19:55][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:19:55][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:19:55][INFO] Server sending response (len=289): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:19:56][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:19:56][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:19:56][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:19:56][INFO] UserWindow::refreshCart: got cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:19:56][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 21:19:56][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:19:56][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:19:56][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:19:56][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:20:01][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:01][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:01][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:01][INFO] Server sending response (len=289): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:01][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:01][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:01][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:01][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.49950000000000117,"discount_policy":"95%off","final_amount":9.490499999999999,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:20:01][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.49950000000000117,"discount_policy":"95%off","final_amount":9.490499999999999,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:20:01][INFO] Server sending response (len=66): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","result":"saved"}
[2025-10-13 21:20:02][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:20:02][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:02][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:02][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:02][INFO] Server sending response (len=295): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:02][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:02][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:02][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:02][INFO] UserWindow::refreshCart: got cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:02][INFO] UserWindow::refreshCart: item 0 good_id=1, name=hyw, qty=1, subtotal=9.990000
[2025-10-13 21:20:03][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:20:03][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:20:03][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:20:03][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:20:03][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:03][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:03][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:03][INFO] Server sending response (len=295): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:03][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:03][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:03][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:05][INFO] UserWindow::onCheckout called
[2025-10-13 21:20:05][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:05][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:05][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:05][INFO] Server sending response (len=295): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:05][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:05][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:05][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:05][INFO] UserWindow::onCheckout: cart already has discount_policy="95%off" -> using existing policy
[2025-10-13 21:20:05][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:06][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:06][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:06][INFO] Server sending response (len=295): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:06][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:06][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:06][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:06][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:06][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:06][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:06][INFO] Server sending response (len=295): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:06][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:06][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:06][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:06][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:06][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:06][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:06][INFO] Server sending response (len=295): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:07][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:07][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:07][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:07][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:07][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:07][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:07][INFO] Server sending response (len=295): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:07][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:07][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:07][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:07][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:07][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:07][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:07][INFO] Server sending response (len=295): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:07][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:07][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:07][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:08][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:08][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:08][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:08][INFO] Server sending response (len=295): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:08][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:08][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:08][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:08][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:08][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:08][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:08][INFO] Server sending response (len=295): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:08][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:08][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:08][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:08][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:09][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:09][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:09][INFO] Server sending response (len=295): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:09][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:09][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:09][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:09][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:09][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:09][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:09][INFO] Server sending response (len=295): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:09][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:09][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:09][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:09][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:10][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:10][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:10][INFO] Server sending response (len=295): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:10][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:10][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:10][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:11][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:11][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:11][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:11][INFO] Server sending response (len=295): {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:11][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013210328472_9c6f7b4a1411aefc","discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"is_converted":true,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"shipping_address":"JLU1","total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:20:11][INFO] CLTgetCartForUser: parsed cart_id=c20251013210328472_9c6f7b4a1411aefc, items=1
[2025-10-13 21:20:11][INFO] CLTgetCartForUser: item[0] good_id=1, name=hyw, price=9.990000, qty=1, subtotal=9.990000
[2025-10-13 21:20:11][INFO] UserWindow::onCheckout: refreshed cart_id from server -> c20251013210328472_9c6f7b4a1411aefc
[2025-10-13 21:20:11][INFO] UserWindow::onCheckout: using cart.cart_id as order id: c20251013210328472_9c6f7b4a1411aefc
[2025-10-13 21:20:11][INFO] UserWindow::onCheckout: sending order c20251013210328472_9c6f7b4a1411aefc for user 17708659389
[2025-10-13 21:20:12][INFO] Server received request: ADD_SETTLED_ORDER {"discountPolicy":"95%off","discount_amount":0.5,"final_amount":9.49,"items":[{"price":9.99,"productId":1,"productName":"hyw","quantity":1,"subtotal":9.99}],"orderId":"c20251013210328472_9c6f7b4a1411aefc","shipping_address":"JLU1","status":1,"total_amount":9.99,"userPhone":"17708659389"}
[2025-10-13 21:20:12][INFO] Server::SERprocessRequest: cmd=ADD_SETTLED_ORDER payload={"discountPolicy":"95%off","discount_amount":0.5,"final_amount":9.49,"items":[{"price":9.99,"productId":1,"productName":"hyw","quantity":1,"subtotal":9.99}],"orderId":"c20251013210328472_9c6f7b4a1411aefc","shipping_address":"JLU1","status":1,"total_amount":9.99,"userPhone":"17708659389"}
[2025-10-13 21:20:12][INFO] Server SERaddSettledOrder: 减库存 good_id=1 -> 783
[2025-10-13 21:20:12][INFO] Server sending response (len=67): {"order_id":"c20251013210328472_9c6f7b4a1411aefc","result":"added"}
[2025-10-13 21:20:12][INFO] UserWindow::onCheckout CLTaddSettledOrder returned true
[2025-10-13 21:20:12][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:20:12][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"},"userPhone":"17708659389"}
[2025-10-13 21:20:12][INFO] Server sending response (len=66): {"cart_id":"c20251013212012566_fafe846c913b001d","result":"saved"}
[2025-10-13 21:20:12][INFO] UserWindow::onCheckout CLTsaveCartForUser returned true
[2025-10-13 21:20:13][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:20:13][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:20:13][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:20:13][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:20:13][INFO] Server sending response (len=214): {"cart_id":"c20251013212012566_fafe846c913b001d","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:20:13][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013212012566_fafe846c913b001d","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:20:13][INFO] CLTgetCartForUser: parsed cart_id=c20251013212012566_fafe846c913b001d, items=0
[2025-10-13 21:20:13][INFO] UserWindow::refreshCart: got cart_id=c20251013212012566_fafe846c913b001d, items=0
[2025-10-13 21:20:14][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:20:14][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:20:14][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:20:14][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:20:14][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:20:14][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:20:14][INFO] Server sending response (len=222): [{"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","status":1,"user_phone":"17708659389"},{"final_amount":9.49,"order_id":"c20251013210328472_9c6f7b4a1411aefc","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:20:44][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:20:44][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:20:44][INFO] Server sending response (len=222): [{"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","status":1,"user_phone":"17708659389"},{"final_amount":9.49,"order_id":"c20251013210328472_9c6f7b4a1411aefc","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:22:36][INFO] 应用启动
[2025-10-13 21:22:36][INFO] Server: DatabaseManager 已连接。
[2025-10-13 21:22:36][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 21:22:36][INFO] Client 已连接到 Server
[2025-10-13 21:22:36][INFO] DatabaseManager::connect() called.

[2025-10-13 21:22:36][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 21:22:43][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 21:22:43][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 21:22:43][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 21:22:43][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 21:22:43][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:22:43][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:22:43][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:22:43][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:22:43][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:22:43][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:22:43][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:22:43][INFO] Server SERgetAllGoods: dbManager ptr = 1449107518704, DTBisConnected=true
[2025-10-13 21:22:43][INFO] DTBloadAllGoods: this=000001516589F4F0 connection_=000001516593FFF0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:22:43][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:22:43][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:22:43][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:22:43][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:22:44][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:22:44][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:22:44][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:22:44][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:22:44][INFO] Server sending response (len=214): {"cart_id":"c20251013212012566_fafe846c913b001d","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:22:44][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013212012566_fafe846c913b001d","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:22:44][INFO] CLTgetCartForUser: parsed cart_id=c20251013212012566_fafe846c913b001d, items=0
[2025-10-13 21:22:44][INFO] UserWindow::refreshCart: got cart_id=c20251013212012566_fafe846c913b001d, items=0
[2025-10-13 21:22:44][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:22:44][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:22:44][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:22:44][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:22:44][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:22:44][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:22:44][INFO] Server sending response (len=222): [{"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","status":1,"user_phone":"17708659389"},{"final_amount":9.49,"order_id":"c20251013210328472_9c6f7b4a1411aefc","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:22:45][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:22:45][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:22:45][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:22:45][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:22:59][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013210328472_9c6f7b4a1411aefc","userPhone":"17708659389"}
[2025-10-13 21:22:59][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013210328472_9c6f7b4a1411aefc","userPhone":"17708659389"}
[2025-10-13 21:22:59][INFO] Server sending response (len=287): {"discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"order_id":"c20251013210328472_9c6f7b4a1411aefc","shipping_address":"JLU1","status":1,"total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:26:35][INFO] 应用启动
[2025-10-13 21:26:35][INFO] Server: DatabaseManager 已连接。
[2025-10-13 21:26:35][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 21:26:35][INFO] Client 已连接到 Server
[2025-10-13 21:26:35][INFO] DatabaseManager::connect() called.

[2025-10-13 21:26:35][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 21:26:42][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 21:26:42][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 21:26:42][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 21:26:42][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 21:26:42][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:26:42][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:26:42][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:26:43][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:26:43][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:26:43][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:26:43][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:26:43][INFO] Server SERgetAllGoods: dbManager ptr = 2551862008176, DTBisConnected=true
[2025-10-13 21:26:43][INFO] DTBloadAllGoods: this=0000025226D41970 connection_=0000025226DC1220 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:26:43][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:26:43][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:26:43][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:26:43][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:26:43][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:26:43][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:26:43][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:26:43][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:26:43][INFO] Server sending response (len=214): {"cart_id":"c20251013212012566_fafe846c913b001d","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:26:43][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013212012566_fafe846c913b001d","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:26:43][INFO] CLTgetCartForUser: parsed cart_id=c20251013212012566_fafe846c913b001d, items=0
[2025-10-13 21:26:43][INFO] UserWindow::refreshCart: got cart_id=c20251013212012566_fafe846c913b001d, items=0
[2025-10-13 21:26:44][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:26:44][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:26:44][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:26:44][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:26:44][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:26:44][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:26:44][INFO] Server sending response (len=222): [{"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","status":1,"user_phone":"17708659389"},{"final_amount":9.49,"order_id":"c20251013210328472_9c6f7b4a1411aefc","status":1,"user_phone":"17708659389"}]
[2025-10-13 21:26:44][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:26:44][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:26:44][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:26:44][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:26:50][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:26:50][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:26:50][INFO] Server sending response (len=468): {"discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"order_id":"c20251013205153719_a4590f3ea09b6146","shipping_address":"JLU1","status":1,"total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:27:42][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:27:42][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:27:42][INFO] Server sending response (len=468): {"discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"order_id":"c20251013205153719_a4590f3ea09b6146","shipping_address":"JLU1","status":1,"total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:31:37][INFO] 应用启动
[2025-10-13 21:31:37][INFO] Server: DatabaseManager 已连接。
[2025-10-13 21:31:37][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 21:31:37][INFO] Client 已连接到 Server
[2025-10-13 21:31:37][INFO] DatabaseManager::connect() called.

[2025-10-13 21:31:37][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 21:31:46][INFO] Server received request: LOGIN {"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 21:31:46][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"AUVpbb","phone":"17708659389"}
[2025-10-13 21:31:46][INFO] Server sending response (len=37): {"phone":"17708659389","result":"ok"}
[2025-10-13 21:31:46][INFO] 用户登录成功，手机号: 17708659389
[2025-10-13 21:31:46][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:31:46][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:31:46][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:31:46][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:31:47][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:31:47][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:31:47][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:31:47][INFO] Server SERgetAllGoods: dbManager ptr = 2357128120624, DTBisConnected=true
[2025-10-13 21:31:47][INFO] DTBloadAllGoods: this=00000224CFC8C930 connection_=00000224CFD2C830 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:31:47][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:31:47][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:31:47][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:31:47][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:31:47][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:31:47][INFO] CLTgetCartForUser: request for userPhone=17708659389
[2025-10-13 21:31:47][INFO] Server received request: GET_CART 17708659389
[2025-10-13 21:31:47][INFO] Server::SERprocessRequest: cmd=GET_CART payload=17708659389
[2025-10-13 21:31:47][INFO] Server sending response (len=214): {"cart_id":"c20251013212012566_fafe846c913b001d","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:31:47][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013212012566_fafe846c913b001d","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"JLU1","total_amount":0.0,"user_phone":"17708659389"}
[2025-10-13 21:31:47][INFO] CLTgetCartForUser: parsed cart_id=c20251013212012566_fafe846c913b001d, items=0
[2025-10-13 21:31:47][INFO] UserWindow::refreshCart: got cart_id=c20251013212012566_fafe846c913b001d, items=0
[2025-10-13 21:31:47][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:31:47][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:31:47][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:31:47][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:31:48][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"17708659389"}
[2025-10-13 21:31:48][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"17708659389"}
[2025-10-13 21:31:48][INFO] Server sending response (len=364): [{"discount_amount":497.83,"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","shipping_address":"JLU1","status":1,"total_amount":4148.56,"user_phone":"17708659389"},{"discount_amount":0.5,"final_amount":9.49,"order_id":"c20251013210328472_9c6f7b4a1411aefc","shipping_address":"JLU1","status":1,"total_amount":9.99,"user_phone":"17708659389"}]
[2025-10-13 21:31:48][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:31:48][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:31:48][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:31:48][INFO] Server sending response (len=319): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:31:54][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013210328472_9c6f7b4a1411aefc","userPhone":"17708659389"}
[2025-10-13 21:31:54][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013210328472_9c6f7b4a1411aefc","userPhone":"17708659389"}
[2025-10-13 21:31:54][INFO] Server sending response (len=287): {"discount_amount":0.5,"discount_policy":"95%off","final_amount":9.49,"items":[{"good_id":1,"good_name":"hyw","price":9.99,"quantity":1,"subtotal":9.99}],"order_id":"c20251013210328472_9c6f7b4a1411aefc","shipping_address":"JLU1","status":1,"total_amount":9.99,"user_phone":"17708659389"}
[2025-10-13 21:33:26][INFO] 应用启动
[2025-10-13 21:33:26][INFO] Server: DatabaseManager 已连接。
[2025-10-13 21:33:26][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 21:33:26][INFO] Client 已连接到 Server
[2025-10-13 21:33:27][INFO] DatabaseManager::connect() called.

[2025-10-13 21:33:27][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 21:34:47][INFO] Server received request: LOGIN {"password":"21859641561","phone":"12346253333"}
[2025-10-13 21:34:47][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"21859641561","phone":"12346253333"}
[2025-10-13 21:34:47][INFO] Server sending response (len=27): {"error":"用户不存在"}
[2025-10-13 21:34:47][FAIL] LOGIN 返回错误: {"error":"用户不存在"}
[2025-10-13 21:36:01][INFO] 用户取消登录，退出应用
[2025-10-13 21:36:01][INFO] DatabaseManager::disconnect() called.

[2025-10-13 21:36:01][INFO] DatabaseManager::disconnect() called.

[2025-10-13 21:37:40][INFO] 应用启动
[2025-10-13 21:37:40][INFO] Server: DatabaseManager 已连接。
[2025-10-13 21:37:40][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 21:37:40][INFO] Client 已连接到 Server
[2025-10-13 21:37:40][INFO] DatabaseManager::connect() called.

[2025-10-13 21:37:40][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 21:39:00][INFO] Server received request: LOGIN {"password":"999999","phone":"12345678901"}
[2025-10-13 21:39:00][INFO] Server::SERprocessRequest: cmd=LOGIN payload={"password":"999999","phone":"12345678901"}
[2025-10-13 21:39:00][INFO] Server sending response (len=37): {"phone":"12345678901","result":"ok"}
[2025-10-13 21:39:00][INFO] 用户登录成功，手机号: 12345678901
[2025-10-13 21:39:00][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:39:00][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:39:00][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:39:00][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:39:01][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:39:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:39:01][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:39:01][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:39:01][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:39:01][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:39:01][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:39:01][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:39:01][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:39:01][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:39:01][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:39:01][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:39:01][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:39:01][INFO] Server sending response (len=30): {"error":"未找到购物车"}
[2025-10-13 21:39:01][INFO] CLTgetCartForUser: raw response: {"error":"未找到购物车"}
[2025-10-13 21:39:01][WARN] CLTgetCartForUser: server returned error: {"error":"未找到购物车"}
[2025-10-13 21:39:01][INFO] UserWindow::refreshCart: got cart_id=, items=0
[2025-10-13 21:39:01][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:39:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:39:01][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:39:01][INFO] Server sending response (len=445): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"?","password":"awdaw","phone":"12345678908"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"??|?|/|?|???","password":"/|/|/|","phone":"12345678911"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:39:01][INFO] UserWindow::refreshCart: filled shipping_address from account: 何意味
[2025-10-13 21:39:02][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:39:02][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:39:02][INFO] Server sending response (len=24): {"error":"参数缺失"}
[2025-10-13 21:39:02][INFO] UserWindow::refreshCart: saved cart with filled address returned false
[2025-10-13 21:39:02][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:39:02][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:39:02][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:39:02][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:39:02][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:39:02][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"12345678901"}
[2025-10-13 21:39:02][INFO] Server sending response (len=2): []
[2025-10-13 21:39:03][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:39:03][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:39:03][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:39:03][INFO] Server sending response (len=445): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"?","password":"awdaw","phone":"12345678908"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"??|?|/|?|???","password":"/|/|/|","phone":"12345678911"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:39:12][INFO] UserWindow::onSaveUserInfo called
[2025-10-13 21:39:12][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:39:12][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:39:12][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:39:12][INFO] Server sending response (len=445): [{"address":"何意味","password":"999999","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"?","password":"awdaw","phone":"12345678908"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"??|?|/|?|???","password":"/|/|/|","phone":"12345678911"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:39:18][INFO] Server received request: UPDATE_ACCOUNT_PASSWORD {"newPassword":"111111","oldPassword":"999999","userId":"12345678901"}
[2025-10-13 21:39:18][INFO] Server::SERprocessRequest: cmd=UPDATE_ACCOUNT_PASSWORD payload={"newPassword":"111111","oldPassword":"999999","userId":"12345678901"}
[2025-10-13 21:39:18][INFO] Server sending response (len=42): {"phone":"12345678901","result":"updated"}
[2025-10-13 21:39:18][INFO] UserWindow::onSaveUserInfo CLTupdateAccountPassword returned true
[2025-10-13 21:39:31][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:39:31][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:39:31][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:39:31][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:39:31][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:39:31][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:39:31][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:39:31][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:39:31][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:39:31][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:39:31][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:39:31][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:39:31][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:39:31][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:39:31][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:39:31][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:39:31][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:39:31][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:39:31][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:39:31][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:39:31][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:39:31][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:39:31][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:39:31][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:39:31][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:39:31][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:39:31][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:39:37][INFO] UserWindow::onAddToCart params: phone=12345678901, goodId=6, name=野火哈基米, price=66.400000, qty=9999
[2025-10-13 21:39:37][INFO] Server received request: ADD_TO_CART {"price":66.4,"productId":6,"productName":"野火哈基米","quantity":9999,"userPhone":"12345678901"}
[2025-10-13 21:39:37][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":66.4,"productId":6,"productName":"野火哈基米","quantity":9999,"userPhone":"12345678901"}
[2025-10-13 21:39:37][INFO] Server sending response (len=59): {"available":200,"error":"stock_exceeded","requested":9999}
[2025-10-13 21:39:37][FAIL] ADD_TO_CART 返回错误: {"available":200,"error":"stock_exceeded","requested":9999}
[2025-10-13 21:39:37][INFO] UserWindow::onAddToCart CLTaddToCart returned false
[2025-10-13 21:39:45][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:39:45][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:39:46][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:39:46][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:39:46][INFO] Server sending response (len=30): {"error":"未找到购物车"}
[2025-10-13 21:39:46][INFO] CLTgetCartForUser: raw response: {"error":"未找到购物车"}
[2025-10-13 21:39:46][WARN] CLTgetCartForUser: server returned error: {"error":"未找到购物车"}
[2025-10-13 21:39:46][INFO] UserWindow::refreshCart: got cart_id=, items=0
[2025-10-13 21:39:46][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:39:46][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:39:46][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:39:46][INFO] Server sending response (len=445): [{"address":"何意味","password":"111111","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"?","password":"awdaw","phone":"12345678908"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"??|?|/|?|???","password":"/|/|/|","phone":"12345678911"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:39:46][INFO] UserWindow::refreshCart: filled shipping_address from account: 何意味
[2025-10-13 21:39:47][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:39:47][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:39:47][INFO] Server sending response (len=24): {"error":"参数缺失"}
[2025-10-13 21:39:47][INFO] UserWindow::refreshCart: saved cart with filled address returned false
[2025-10-13 21:39:47][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:39:47][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:39:47][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:39:47][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:39:53][INFO] UserWindow::onAddToCart params: phone=12345678901, goodId=6, name=野火哈基米, price=66.400000, qty=200
[2025-10-13 21:39:53][INFO] Server received request: ADD_TO_CART {"price":66.4,"productId":6,"productName":"野火哈基米","quantity":200,"userPhone":"12345678901"}
[2025-10-13 21:39:53][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":66.4,"productId":6,"productName":"野火哈基米","quantity":200,"userPhone":"12345678901"}
[2025-10-13 21:39:53][INFO] Server sending response (len=63): {"cart_id":"c20251013213953495_72ec6222a3b6694e","result":"ok"}
[2025-10-13 21:39:53][INFO] UserWindow::onAddToCart CLTaddToCart returned true
[2025-10-13 21:39:54][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:39:54][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:39:54][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:39:54][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:39:54][INFO] Server sending response (len=311): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:39:54][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:39:54][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:39:54][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:39:54][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:39:55][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:39:55][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:39:55][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:39:55][INFO] Server sending response (len=445): [{"address":"何意味","password":"111111","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"?","password":"awdaw","phone":"12345678908"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"??|?|/|?|???","password":"/|/|/|","phone":"12345678911"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:39:55][INFO] UserWindow::refreshCart: filled shipping_address from account: 何意味
[2025-10-13 21:39:55][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:39:55][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:39:55][INFO] Server sending response (len=66): {"cart_id":"c20251013213953495_72ec6222a3b6694e","result":"saved"}
[2025-10-13 21:39:55][INFO] UserWindow::refreshCart: saved cart with filled address returned true
[2025-10-13 21:39:55][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:39:55][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:39:55][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:39:55][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:39:56][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:39:57][INFO] UserWindow::onAddToCart params: phone=12345678901, goodId=6, name=野火哈基米, price=66.400000, qty=1
[2025-10-13 21:39:57][INFO] Server received request: ADD_TO_CART {"price":66.4,"productId":6,"productName":"野火哈基米","quantity":1,"userPhone":"12345678901"}
[2025-10-13 21:39:57][INFO] Server::SERprocessRequest: cmd=ADD_TO_CART payload={"price":66.4,"productId":6,"productName":"野火哈基米","quantity":1,"userPhone":"12345678901"}
[2025-10-13 21:39:57][INFO] Server sending response (len=58): {"available":200,"error":"stock_exceeded","requested":201}
[2025-10-13 21:39:57][FAIL] ADD_TO_CART 返回错误: {"available":200,"error":"stock_exceeded","requested":201}
[2025-10-13 21:39:57][INFO] UserWindow::onAddToCart CLTaddToCart returned false
[2025-10-13 21:39:58][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:39:58][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:39:58][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:39:58][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:39:58][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:39:59][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:39:59][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:39:59][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:39:59][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:39:59][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:39:59][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:39:59][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:39:59][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:39:59][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:40:01][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:40:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:40:01][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:40:01][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:40:01][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:40:01][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:40:01][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:40:01][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:40:01][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:40:03][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:40:03][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:40:03][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:40:03][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:40:03][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:40:03][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:40:03][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:40:03][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:40:03][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:40:59][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:40:59][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:40:59][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:40:59][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:40:59][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:40:59][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:40:59][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:41:02][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:41:02][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:41:02][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:41:02][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:02][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:02][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:41:02][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:41:17][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:41:17][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:41:17][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:41:17][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:17][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:17][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:41:17][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:41:20][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:41:21][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:41:21][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:41:21][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:21][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:21][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:41:21][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:41:23][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:41:24][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:41:24][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:41:24][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:24][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:24][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:41:24][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:41:27][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:41:27][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:41:27][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:41:27][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:28][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:28][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:41:28][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:41:33][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:41:33][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:41:33][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:41:33][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:33][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:33][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:41:33][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:41:38][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:41:38][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:41:38][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:41:38][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:38][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:38][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:41:38][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:41:39][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"95%off","final_amount":12616.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:41:39][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"95%off","final_amount":12616.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"discount":0.95,"scope":"global","type":"discount"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:41:39][INFO] Server sending response (len=66): {"cart_id":"c20251013213953495_72ec6222a3b6694e","result":"saved"}
[2025-10-13 21:41:40][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:41:40][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:41:40][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:41:40][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:41:40][INFO] Server sending response (len=326): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"95%off","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:40][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"95%off","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:40][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:41:40][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:41:40][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:41:40][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:41:41][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:41:41][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:41:41][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:41:41][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:41:42][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:41:43][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:41:43][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:41:43][INFO] Server sending response (len=326): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"95%off","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:43][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"95%off","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:43][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:41:43][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:41:44][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:41:44][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:41:44][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:41:44][INFO] Server sending response (len=326): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"95%off","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:44][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"95%off","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:44][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:41:44][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:41:45][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":40.0,"discount_policy":"350-40","final_amount":13240.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:41:45][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":40.0,"discount_policy":"350-40","final_amount":13240.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:41:45][INFO] Server sending response (len=66): {"cart_id":"c20251013213953495_72ec6222a3b6694e","result":"saved"}
[2025-10-13 21:41:46][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:41:46][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:41:46][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:41:46][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:41:46][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":40.0,"discount_policy":"350-40","final_amount":13240.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:46][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":40.0,"discount_policy":"350-40","final_amount":13240.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:46][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:41:46][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:41:46][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:41:46][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:41:47][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:41:47][INFO] Server received request: GET_ALL_PROMOTIONS
GET_CART 12345678901
[2025-10-13 21:41:47][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS
GET_CART payload=12345678901
[2025-10-13 21:41:47][WARN] Server 收到未知请求: GET_ALL_PROMOTIONS
GET_CART 12345678901
[2025-10-13 21:41:47][INFO] Server sending response (len=80): {"error":"UNKNOWN_COMMAND","request":"GET_ALL_PROMOTIONS\nGET_CART 12345678901"}
[2025-10-13 21:41:47][INFO] CLTgetCartForUser: raw response: {"error":"UNKNOWN_COMMAND","request":"GET_ALL_PROMOTIONS\nGET_CART 12345678901"}
[2025-10-13 21:41:47][WARN] CLTgetCartForUser: server returned error: {"error":"UNKNOWN_COMMAND","request":"GET_ALL_PROMOTIONS\nGET_CART 12345678901"}
[2025-10-13 21:41:51][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:41:51][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:41:51][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:41:51][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":40.0,"discount_policy":"350-40","final_amount":13240.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:51][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":40.0,"discount_policy":"350-40","final_amount":13240.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:41:51][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:41:51][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:41:54][INFO] CLTgetAllPromotionsRaw: empty response
[2025-10-13 21:42:06][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:42:06][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:06][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:06][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:06][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":40.0,"discount_policy":"350-40","final_amount":13240.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:06][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":40.0,"discount_policy":"350-40","final_amount":13240.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:06][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:06][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:06][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:06][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:42:06][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:42:06][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:42:06][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:42:06][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:42:09][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:09][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:09][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:09][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":40.0,"discount_policy":"350-40","final_amount":13240.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:09][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":40.0,"discount_policy":"350-40","final_amount":13240.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:09][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:09][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:09][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":11.0,"discount_policy":"230-11","final_amount":13269.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:42:09][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":11.0,"discount_policy":"230-11","final_amount":13269.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:42:09][INFO] Server sending response (len=66): {"cart_id":"c20251013213953495_72ec6222a3b6694e","result":"saved"}
[2025-10-13 21:42:10][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:42:10][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:11][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:11][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:11][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":11.0,"discount_policy":"230-11","final_amount":13269.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:11][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":11.0,"discount_policy":"230-11","final_amount":13269.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:11][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:11][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:11][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:11][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:42:11][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:42:11][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:42:11][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:42:11][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:42:11][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:12][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:12][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:12][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":11.0,"discount_policy":"230-11","final_amount":13269.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:12][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":11.0,"discount_policy":"230-11","final_amount":13269.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:12][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:12][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:18][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:18][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:18][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:18][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":11.0,"discount_policy":"230-11","final_amount":13269.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:19][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":11.0,"discount_policy":"230-11","final_amount":13269.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:19][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:19][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:19][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:42:19][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:42:19][INFO] Server sending response (len=66): {"cart_id":"c20251013213953495_72ec6222a3b6694e","result":"saved"}
[2025-10-13 21:42:19][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:42:19][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:20][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:20][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:20][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:20][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:20][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:20][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:20][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:20][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:42:20][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:42:20][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:42:20][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:42:20][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:42:20][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:20][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:20][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:20][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:21][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:21][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:21][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:24][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:25][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:25][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:25][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:25][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:25][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:25][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:25][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:42:25][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:42:25][INFO] Server sending response (len=66): {"cart_id":"c20251013213953495_72ec6222a3b6694e","result":"saved"}
[2025-10-13 21:42:26][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:42:26][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:26][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:26][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:26][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:26][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:26][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:26][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:26][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:26][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:42:26][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:42:26][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:42:26][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:42:27][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:42:27][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:27][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:27][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:27][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:27][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:27][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:27][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:31][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:31][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:31][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:31][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:31][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:31][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:31][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:32][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:42:32][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:42:32][INFO] Server sending response (len=66): {"cart_id":"c20251013213953495_72ec6222a3b6694e","result":"saved"}
[2025-10-13 21:42:32][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:42:32][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:33][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:33][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:33][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:33][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:33][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:33][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:33][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:33][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:42:33][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:42:33][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:42:33][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:42:33][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:42:34][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:34][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:34][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:34][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:34][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:34][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:34][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:41][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:41][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:41][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:41][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:41][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:41][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:41][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:41][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":87.0,"discount_policy":"600-67","final_amount":13193.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"reduce":87.0,"scope":"global","threshold":600.0,"type":"full_reduction"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:42:41][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":87.0,"discount_policy":"600-67","final_amount":13193.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"reduce":87.0,"scope":"global","threshold":600.0,"type":"full_reduction"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:42:41][INFO] Server sending response (len=66): {"cart_id":"c20251013213953495_72ec6222a3b6694e","result":"saved"}
[2025-10-13 21:42:42][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:42:42][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:43][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:43][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:43][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":87.0,"discount_policy":"600-67","final_amount":13193.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:43][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":87.0,"discount_policy":"600-67","final_amount":13193.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:43][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:43][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:43][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:43][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:42:43][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:42:43][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:42:43][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:42:43][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:42:43][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:43][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:43][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:43][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":87.0,"discount_policy":"600-67","final_amount":13193.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:44][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":87.0,"discount_policy":"600-67","final_amount":13193.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:44][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:44][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:49][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:50][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:50][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:50][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":87.0,"discount_policy":"600-67","final_amount":13193.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:50][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":87.0,"discount_policy":"600-67","final_amount":13193.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:50][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:50][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:50][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":0.0,"discount_policy":"","final_amount":13280.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:42:50][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":0.0,"discount_policy":"","final_amount":13280.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:42:50][INFO] Server sending response (len=66): {"cart_id":"c20251013213953495_72ec6222a3b6694e","result":"saved"}
[2025-10-13 21:42:51][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:42:51][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:52][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:52][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:52][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:52][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:52][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:52][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:42:52][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:52][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:42:52][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:42:52][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:42:52][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:42:52][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:42:52][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:42:52][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:42:52][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:42:52][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:52][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:42:52][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:42:52][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:00][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:00][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:00][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:00][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:00][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:00][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:00][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:00][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:43:00][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:43:00][INFO] Server sending response (len=66): {"cart_id":"c20251013213953495_72ec6222a3b6694e","result":"saved"}
[2025-10-13 21:43:02][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:43:02][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:02][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:02][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:02][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:02][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:02][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:02][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:02][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:02][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:43:02][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:03][INFO] Server received request: GET_ALL_PROMOTIONS
GET_CART 12345678901
[2025-10-13 21:43:03][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS
GET_CART payload=12345678901
[2025-10-13 21:43:03][WARN] Server 收到未知请求: GET_ALL_PROMOTIONS
GET_CART 12345678901
[2025-10-13 21:43:03][INFO] Server sending response (len=80): {"error":"UNKNOWN_COMMAND","request":"GET_ALL_PROMOTIONS\nGET_CART 12345678901"}
[2025-10-13 21:43:03][INFO] CLTgetCartForUser: raw response: {"error":"UNKNOWN_COMMAND","request":"GET_ALL_PROMOTIONS\nGET_CART 12345678901"}
[2025-10-13 21:43:03][WARN] CLTgetCartForUser: server returned error: {"error":"UNKNOWN_COMMAND","request":"GET_ALL_PROMOTIONS\nGET_CART 12345678901"}
[2025-10-13 21:43:08][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:09][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:09][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:09][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:09][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:09][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:09][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:11][INFO] CLTgetAllPromotionsRaw: empty response
[2025-10-13 21:43:17][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:43:17][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:17][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:17][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:17][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:18][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:18][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:18][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:18][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:18][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:43:18][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:43:18][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:43:18][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:43:18][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:43:21][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:21][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:21][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:21][INFO] Server sending response (len=325): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:21][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":66.0,"discount_policy":"950-66","final_amount":13214.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:21][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:21][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:21][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":1328.0,"discount_policy":"1919810","final_amount":11952.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":1},{"discount":0.95,"min_qty":2},{"discount":0.9,"min_qty":10}],"type":"tiered"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:43:21][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":1328.0,"discount_policy":"1919810","final_amount":11952.000000000002,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":1},{"discount":0.95,"min_qty":2},{"discount":0.9,"min_qty":10}],"type":"tiered"},"shipping_address":"何意味","total_amount":13280.000000000002,"user_phone":"12345678901"},"userPhon...(truncated)
[2025-10-13 21:43:21][INFO] Server sending response (len=66): {"cart_id":"c20251013213953495_72ec6222a3b6694e","result":"saved"}
[2025-10-13 21:43:22][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:43:22][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:23][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:23][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:23][INFO] Server sending response (len=328): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":1328.0,"discount_policy":"1919810","final_amount":11952.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:23][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":1328.0,"discount_policy":"1919810","final_amount":11952.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:23][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:23][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:23][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:23][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:43:23][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:43:23][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:43:23][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:43:23][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:43:23][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:23][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:23][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:23][INFO] Server sending response (len=328): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":1328.0,"discount_policy":"1919810","final_amount":11952.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:23][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":1328.0,"discount_policy":"1919810","final_amount":11952.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:23][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:23][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:24][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":0.0,"discount_policy":"","final_amount":13280.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:43:24][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":0.0,"discount_policy":"","final_amount":13280.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:43:24][INFO] Server sending response (len=66): {"cart_id":"c20251013213953495_72ec6222a3b6694e","result":"saved"}
[2025-10-13 21:43:26][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:43:26][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:26][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:26][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:26][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:26][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:26][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:26][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:26][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:26][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:43:26][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:43:26][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:43:26][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:43:26][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:43:28][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:28][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:28][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:28][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:28][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:28][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:28][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:28][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:28][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:28][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:28][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:29][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:29][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:29][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:36][INFO] UserWindow::onCheckout called
[2025-10-13 21:43:36][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:36][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:36][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:36][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:37][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:37][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:37][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:37][INFO] UserWindow::onCheckout: skipping server auto-promote (configured to not request server evaluation)
[2025-10-13 21:43:37][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:37][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:37][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:37][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:37][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:37][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:37][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:37][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:37][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:37][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:37][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:37][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:38][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:38][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:38][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:38][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:38][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:38][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:38][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:38][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:38][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:38][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:38][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:38][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:38][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:38][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:38][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:38][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:38][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:39][INFO] UserWindow::onCheckout called
[2025-10-13 21:43:39][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:39][INFO] UserWindow::onCheckout called
[2025-10-13 21:43:39][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:39][INFO] Server received request: GET_CART 12345678901
GET_CART 12345678901
GET_CART 12345678901
[2025-10-13 21:43:39][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
GET_CART 12345678901
GET_CART 12345678901
[2025-10-13 21:43:39][INFO] Server sending response (len=30): {"error":"未找到购物车"}
[2025-10-13 21:43:39][INFO] UserWindow::onCheckout called
[2025-10-13 21:43:39][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:39][INFO] CLTgetCartForUser: raw response: {"error":"未找到购物车"}
[2025-10-13 21:43:39][WARN] CLTgetCartForUser: server returned error: {"error":"未找到购物车"}
[2025-10-13 21:43:39][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:39][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:39][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:41][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:41][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:41][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:41][INFO] UserWindow::onCheckout: skipping server auto-promote (configured to not request server evaluation)
[2025-10-13 21:43:41][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:41][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:41][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:41][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:41][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:41][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:41][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:41][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:42][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:42][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:42][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:42][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:42][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:42][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:42][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:42][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:42][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:42][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:42][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:42][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:42][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:42][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:42][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:42][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:42][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:43][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:43][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:43][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:43][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:43][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:43][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:43][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:43][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:43][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:43][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:43][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:43][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:43][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:43][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:43][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:43][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:43][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:44][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:44][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:43:44][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:43:44][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:44][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:43:44][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:44][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:43:44][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:44][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:43:44][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:43:44][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:43:44][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:43:44][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:44][INFO] Server received request: GET_CART 12345678901
GET_ALL_PROMOTIONS
GET_CART 12345678901
[2025-10-13 21:43:44][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
GET_ALL_PROMOTIONS
GET_CART 12345678901
[2025-10-13 21:43:44][INFO] Server sending response (len=30): {"error":"未找到购物车"}
[2025-10-13 21:43:44][INFO] CLTgetCartForUser: raw response: {"error":"未找到购物车"}
[2025-10-13 21:43:44][WARN] CLTgetCartForUser: server returned error: {"error":"未找到购物车"}
[2025-10-13 21:43:44][INFO] UserWindow::refreshCart: got cart_id=, items=0
[2025-10-13 21:43:45][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:43:45][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:45][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:43:45][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:45][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:43:45][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:45][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:43:45][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:46][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:43:46][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:46][INFO] Server received request: GET_ALL_ACCOUNTS
GET_CART 12345678901
GET_CART 12345678901
GET_CART 12345678901
GET_CART 12345678901
GET_CART 12345678901
[2025-10-13 21:43:46][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS
GET_CART payload=12345678901
GET_CART 12345678901
GET_CART 12345678901
GET_CART 12345678901
GET_CART 12345678901
[2025-10-13 21:43:46][WARN] Server 收到未知请求: GET_ALL_ACCOUNTS
GET_CART 12345678901
GET_CART 12345678901
GET_CART 12345678901
GET_CART 12345678901
GET_CART 12345678901
[2025-10-13 21:43:46][INFO] Server sending response (len=166): {"error":"UNKNOWN_COMMAND","request":"GET_ALL_ACCOUNTS\nGET_CART 12345678901\nGET_CART 12345678901\nGET_CART 12345678901\nGET_CART 12345678901\nGET_CART 12345678901"}
[2025-10-13 21:43:46][INFO] CLTgetCartForUser: raw response: {"error":"UNKNOWN_COMMAND","request":"GET_ALL_ACCOUNTS\nGET_CART 12345678901\nGET_CART 12345678901\nGET_CART 12345678901\nGET_CART 12345678901\nGET_CART 12345678901"}
[2025-10-13 21:43:46][WARN] CLTgetCartForUser: server returned error: {"error":"UNKNOWN_COMMAND","request":"GET_ALL_ACCOUNTS\nGET_CART 12345678901\nGET_CART 12345678901\nGET_CART 12345678901\nGET_CART 12345678901\nGET_CART 12345678901"}
[2025-10-13 21:43:46][INFO] UserWindow::refreshCart: got cart_id=, items=0
[2025-10-13 21:43:46][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:43:46][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:46][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:43:46][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:43:47][INFO] Server received request: GET_ALL_ACCOUNTS
GET_CART 12345678901
GET_CART 12345678901
[2025-10-13 21:43:47][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS
GET_CART payload=12345678901
GET_CART 12345678901
[2025-10-13 21:43:47][WARN] Server 收到未知请求: GET_ALL_ACCOUNTS
GET_CART 12345678901
GET_CART 12345678901
[2025-10-13 21:43:47][INFO] Server sending response (len=100): {"error":"UNKNOWN_COMMAND","request":"GET_ALL_ACCOUNTS\nGET_CART 12345678901\nGET_CART 12345678901"}
[2025-10-13 21:43:47][INFO] UserWindow::onModifyCartItem called
[2025-10-13 21:43:47][WARN] UserWindow::onModifyCartItem: no selection
[2025-10-13 21:43:48][INFO] CLTgetCartForUser: raw response: {"error":"UNKNOWN_COMMAND","request":"GET_ALL_ACCOUNTS\nGET_CART 12345678901\nGET_CART 12345678901"}
[2025-10-13 21:43:48][WARN] CLTgetCartForUser: server returned error: {"error":"UNKNOWN_COMMAND","request":"GET_ALL_ACCOUNTS\nGET_CART 12345678901\nGET_CART 12345678901"}
[2025-10-13 21:43:48][INFO] UserWindow::refreshCart: got cart_id=, items=0
[2025-10-13 21:43:48][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:43:48][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:43:48][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:43:48][INFO] Server sending response (len=445): [{"address":"何意味","password":"111111","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"?","password":"awdaw","phone":"12345678908"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"??|?|/|?|???","password":"/|/|/|","phone":"12345678911"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:43:48][INFO] UserWindow::refreshCart: filled shipping_address from account: 何意味
[2025-10-13 21:43:49][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:43:49][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:43:49][INFO] Server sending response (len=24): {"error":"参数缺失"}
[2025-10-13 21:43:49][INFO] UserWindow::refreshCart: saved cart with filled address returned false
[2025-10-13 21:43:49][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:43:49][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:43:49][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:43:49][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:43:53][INFO] Server received request: GET_ALL_GOODS
GET_ALL_GOODS
[2025-10-13 21:43:53][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS
GET_ALL_GOODS payload=<none>
[2025-10-13 21:43:53][WARN] Server 收到未知请求: GET_ALL_GOODS
GET_ALL_GOODS
[2025-10-13 21:43:53][INFO] Server sending response (len=68): {"error":"UNKNOWN_COMMAND","request":"GET_ALL_GOODS\nGET_ALL_GOODS"}
[2025-10-13 21:43:53][FAIL] GET_ALL_GOODS 返回错误: {"error":"UNKNOWN_COMMAND","request":"GET_ALL_GOODS\nGET_ALL_GOODS"}
[2025-10-13 21:43:53][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:43:53][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:43:53][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:43:53][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:43:53][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:43:53][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:43:53][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:43:53][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:43:53][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:43:54][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:43:54][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:43:54][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:43:54][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:43:54][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:43:54][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:43:54][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:43:54][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:43:54][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:43:54][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:43:54][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:43:54][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:43:54][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:43:54][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:43:54][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:43:54][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:43:54][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:43:54][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:44:01][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:44:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"12345678901"}
[2025-10-13 21:44:01][INFO] Server sending response (len=2): []
[2025-10-13 21:44:01][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:44:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"12345678901"}
[2025-10-13 21:44:01][INFO] Server sending response (len=2): []
[2025-10-13 21:44:01][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:44:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"12345678901"}
[2025-10-13 21:44:01][INFO] Server sending response (len=2): []
[2025-10-13 21:44:01][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:44:01][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"12345678901"}
[2025-10-13 21:44:01][INFO] Server sending response (len=2): []
[2025-10-13 21:44:02][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"12345678901"}
GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:44:02][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"12345678901"}
GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:44:02][FAIL] Server 处理请求异常: [json.exception.parse_error.101] parse error at line 2, column 1: syntax error while parsing value - invalid literal; last read: '"12345678901"}<U+000A>G'; expected end of input, 请求内容: GET_ALL_ORDERS {"userPhone":"12345678901"}
GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:44:02][INFO] Server sending response (len=213): {"error":"exception","message":"[json.exception.parse_error.101] parse error at line 2, column 1: syntax error while parsing value - invalid literal; last read: '\"12345678901\"}<U+000A>G'; expected end of input"}
[2025-10-13 21:44:02][FAIL] GET_ALL_ORDERS 响应不是数组
[2025-10-13 21:44:02][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"12345678901"}
GET_ALL_ORDERS {"userPhone":"12345678901"}
GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:44:02][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"12345678901"}
GET_ALL_ORDERS {"userPhone":"12345678901"}
GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:44:02][FAIL] Server 处理请求异常: [json.exception.parse_error.101] parse error at line 2, column 1: syntax error while parsing value - invalid literal; last read: '"12345678901"}<U+000A>G'; expected end of input, 请求内容: GET_ALL_ORDERS {"userPhone":"12345678901"}
GET_ALL_ORDERS {"userPhone":"12345678901"}
GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:44:02][INFO] Server sending response (len=213): {"error":"exception","message":"[json.exception.parse_error.101] parse error at line 2, column 1: syntax error while parsing value - invalid literal; last read: '\"12345678901\"}<U+000A>G'; expected end of input"}
[2025-10-13 21:44:03][FAIL] GET_ALL_ORDERS 响应不是数组
[2025-10-13 21:44:03][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"12345678901"}
GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:44:03][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"12345678901"}
GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:44:03][FAIL] Server 处理请求异常: [json.exception.parse_error.101] parse error at line 2, column 1: syntax error while parsing value - invalid literal; last read: '"12345678901"}<U+000A>G'; expected end of input, 请求内容: GET_ALL_ORDERS {"userPhone":"12345678901"}
GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:44:03][INFO] Server sending response (len=213): {"error":"exception","message":"[json.exception.parse_error.101] parse error at line 2, column 1: syntax error while parsing value - invalid literal; last read: '\"12345678901\"}<U+000A>G'; expected end of input"}
[2025-10-13 21:44:03][FAIL] GET_ALL_ORDERS 响应不是数组
[2025-10-13 21:44:07][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:44:07][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:44:07][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:44:07][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:44:07][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:44:07][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:44:07][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:44:07][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:44:07][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:44:08][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:44:08][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:44:08][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:44:08][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:44:08][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:44:08][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:44:08][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:44:08][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:44:08][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:44:09][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:44:09][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:44:09][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:44:09][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:44:09][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:44:09][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:44:09][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:44:09][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:44:09][INFO] UserWindow::refreshCart: got cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:44:09][INFO] UserWindow::refreshCart: item 0 good_id=6, name=野火哈基米, qty=200, subtotal=13280.000000
[2025-10-13 21:44:09][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:44:09][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:44:09][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:44:09][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:44:10][INFO] CLTgetCartForUser: empty response for userPhone=12345678901
[2025-10-13 21:44:10][INFO] UserWindow::refreshCart: got cart_id=, items=0
[2025-10-13 21:44:11][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:44:11][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:44:11][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:44:11][INFO] Server sending response (len=445): [{"address":"何意味","password":"111111","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"?","password":"awdaw","phone":"12345678908"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"??|?|/|?|???","password":"/|/|/|","phone":"12345678911"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:44:11][INFO] UserWindow::refreshCart: filled shipping_address from account: 何意味
[2025-10-13 21:44:11][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:44:11][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:44:11][INFO] Server sending response (len=24): {"error":"参数缺失"}
[2025-10-13 21:44:11][INFO] UserWindow::refreshCart: saved cart with filled address returned false
[2025-10-13 21:44:11][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:44:11][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:44:11][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:44:11][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:44:12][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:44:12][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:44:12][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:44:12][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:44:12][INFO] CLTgetCartForUser: empty response for userPhone=12345678901
[2025-10-13 21:44:12][INFO] UserWindow::refreshCart: got cart_id=, items=0
[2025-10-13 21:44:12][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:44:12][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:44:12][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:44:12][INFO] Server sending response (len=445): [{"address":"何意味","password":"111111","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"?","password":"awdaw","phone":"12345678908"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"??|?|/|?|???","password":"/|/|/|","phone":"12345678911"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:44:12][INFO] UserWindow::refreshCart: filled shipping_address from account: 何意味
[2025-10-13 21:44:12][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:44:12][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:44:12][INFO] Server sending response (len=24): {"error":"参数缺失"}
[2025-10-13 21:44:12][INFO] UserWindow::refreshCart: saved cart with filled address returned false
[2025-10-13 21:44:13][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:44:13][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:44:13][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:44:13][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:44:13][INFO] CLTgetCartForUser: empty response for userPhone=12345678901
[2025-10-13 21:44:13][INFO] UserWindow::refreshCart: got cart_id=, items=0
[2025-10-13 21:44:13][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:44:13][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:44:13][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:44:13][INFO] Server sending response (len=445): [{"address":"何意味","password":"111111","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"?","password":"awdaw","phone":"12345678908"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"??|?|/|?|???","password":"/|/|/|","phone":"12345678911"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:44:13][INFO] UserWindow::refreshCart: filled shipping_address from account: 何意味
[2025-10-13 21:44:13][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:44:13][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:44:13][INFO] Server sending response (len=24): {"error":"参数缺失"}
[2025-10-13 21:44:13][INFO] UserWindow::refreshCart: saved cart with filled address returned false
[2025-10-13 21:44:14][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:44:14][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:44:14][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:44:14][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:44:14][INFO] CLTgetCartForUser: empty response for userPhone=12345678901
[2025-10-13 21:44:14][INFO] UserWindow::refreshCart: got cart_id=, items=0
[2025-10-13 21:44:14][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:44:14][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:44:14][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:44:14][INFO] Server sending response (len=445): [{"address":"何意味","password":"111111","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"?","password":"awdaw","phone":"12345678908"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"??|?|/|?|???","password":"/|/|/|","phone":"12345678911"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:44:14][INFO] UserWindow::refreshCart: filled shipping_address from account: 何意味
[2025-10-13 21:44:14][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:44:14][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:44:14][INFO] Server sending response (len=24): {"error":"参数缺失"}
[2025-10-13 21:44:15][INFO] UserWindow::refreshCart: saved cart with filled address returned false
[2025-10-13 21:44:15][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:44:15][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:44:15][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:44:15][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:44:15][INFO] CLTgetCartForUser: empty response for userPhone=12345678901
[2025-10-13 21:44:15][INFO] UserWindow::refreshCart: got cart_id=, items=0
[2025-10-13 21:44:15][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:44:15][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:44:15][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:44:15][INFO] Server sending response (len=445): [{"address":"何意味","password":"111111","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"?","password":"awdaw","phone":"12345678908"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"??|?|/|?|???","password":"/|/|/|","phone":"12345678911"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:44:15][INFO] UserWindow::refreshCart: filled shipping_address from account: 何意味
[2025-10-13 21:44:15][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:44:15][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":false,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":""},"userPhone":""}
[2025-10-13 21:44:15][INFO] Server sending response (len=24): {"error":"参数缺失"}
[2025-10-13 21:44:16][INFO] UserWindow::refreshCart: saved cart with filled address returned false
[2025-10-13 21:44:16][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:44:16][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:44:16][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:44:16][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:44:16][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:44:16][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:44:16][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:44:16][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:44:16][INFO] CLTgetAllPromotionsRaw: empty response
[2025-10-13 21:44:16][INFO] CLTgetCartForUser: empty response for userPhone=12345678901
[2025-10-13 21:44:16][INFO] UserWindow::onCheckout: detected updated cart from server
[2025-10-13 21:44:24][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:44:24][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:44:24][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:44:24][INFO] Server sending response (len=320): {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:44:24][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013213953495_72ec6222a3b6694e","discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"is_converted":false,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"shipping_address":"何意味","total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:44:24][INFO] CLTgetCartForUser: parsed cart_id=c20251013213953495_72ec6222a3b6694e, items=1
[2025-10-13 21:44:24][INFO] CLTgetCartForUser: item[0] good_id=6, name=野火哈基米, price=66.400000, qty=200, subtotal=13280.000000
[2025-10-13 21:44:24][INFO] UserWindow::onCheckout: refreshed cart_id from server -> c20251013213953495_72ec6222a3b6694e
[2025-10-13 21:44:24][INFO] UserWindow::onCheckout: using cart.cart_id as order id: c20251013213953495_72ec6222a3b6694e
[2025-10-13 21:44:24][INFO] UserWindow::onCheckout: sending order c20251013213953495_72ec6222a3b6694e for user 12345678901
[2025-10-13 21:44:24][INFO] Server received request: ADD_SETTLED_ORDER {"discountPolicy":"","discount_amount":664.0,"final_amount":12616.0,"items":[{"price":66.4,"productId":6,"productName":"野火哈基米","quantity":200,"subtotal":13280.0}],"orderId":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","status":1,"total_amount":13280.0,"userPhone":"12345678901"}
[2025-10-13 21:44:24][INFO] Server::SERprocessRequest: cmd=ADD_SETTLED_ORDER payload={"discountPolicy":"","discount_amount":664.0,"final_amount":12616.0,"items":[{"price":66.4,"productId":6,"productName":"野火哈基米","quantity":200,"subtotal":13280.0}],"orderId":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","status":1,"total_amount":13280.0,"userPhone":"12345678901"}
[2025-10-13 21:44:24][INFO] Server SERaddSettledOrder: 减库存 good_id=6 -> 0
[2025-10-13 21:44:24][INFO] Server sending response (len=67): {"order_id":"c20251013213953495_72ec6222a3b6694e","result":"added"}
[2025-10-13 21:44:24][INFO] UserWindow::onCheckout CLTaddSettledOrder returned true
[2025-10-13 21:44:25][INFO] Server received request: SAVE_CART {"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:44:25][INFO] Server::SERprocessRequest: cmd=SAVE_CART payload={"cart":{"cart_id":"","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":"12345678901"},"userPhone":"12345678901"}
[2025-10-13 21:44:25][INFO] Server sending response (len=66): {"cart_id":"c20251013214425210_d9a4e037eb481641","result":"saved"}
[2025-10-13 21:44:25][INFO] UserWindow::onCheckout CLTsaveCartForUser returned true
[2025-10-13 21:44:26][INFO] UserWindow::refreshCart: client connection active? true
[2025-10-13 21:44:26][INFO] CLTgetCartForUser: request for userPhone=12345678901
[2025-10-13 21:44:26][INFO] Server received request: GET_CART 12345678901
[2025-10-13 21:44:26][INFO] Server::SERprocessRequest: cmd=GET_CART payload=12345678901
[2025-10-13 21:44:26][INFO] Server sending response (len=219): {"cart_id":"c20251013214425210_d9a4e037eb481641","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":"12345678901"}
[2025-10-13 21:44:26][INFO] CLTgetCartForUser: raw response: {"cart_id":"c20251013214425210_d9a4e037eb481641","discount_amount":0.0,"discount_policy":"","final_amount":0.0,"is_converted":true,"items":[],"shipping_address":"何意味","total_amount":0.0,"user_phone":"12345678901"}
[2025-10-13 21:44:26][INFO] CLTgetCartForUser: parsed cart_id=c20251013214425210_d9a4e037eb481641, items=0
[2025-10-13 21:44:26][INFO] UserWindow::refreshCart: got cart_id=c20251013214425210_d9a4e037eb481641, items=0
[2025-10-13 21:44:27][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:44:27][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:44:27][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:44:27][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:44:27][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:44:27][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"12345678901"}
[2025-10-13 21:44:27][INFO] Server sending response (len=191): [{"discount_amount":664.0,"final_amount":12616.0,"order_id":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","status":1,"total_amount":13280.0,"user_phone":"12345678901"}]
[2025-10-13 21:44:27][INFO] CLTgetCartForUser: empty response for userPhone=12345678901
[2025-10-13 21:44:28][INFO] CLTgetCartForUser: empty response for userPhone=12345678901
[2025-10-13 21:44:28][INFO] UserWindow::onCheckout: detected updated cart from server
[2025-10-13 21:44:29][INFO] UserWindow::onCheckout: user cancelled checkout
[2025-10-13 21:44:37][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013213953495_72ec6222a3b6694e","userPhone":"12345678901"}
[2025-10-13 21:44:37][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013213953495_72ec6222a3b6694e","userPhone":"12345678901"}
[2025-10-13 21:44:37][INFO] Server sending response (len=311): {"discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"order_id":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","status":1,"total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:44:46][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:44:46][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:44:46][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:44:46][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:44:46][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:44:46][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:44:46][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":0},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:44:46][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:44:46][INFO] Server sending response (len=419): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":0},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:45:10][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013213953495_72ec6222a3b6694e","userPhone":"12345678901"}
[2025-10-13 21:45:10][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013213953495_72ec6222a3b6694e","userPhone":"12345678901"}
[2025-10-13 21:45:10][INFO] Server sending response (len=311): {"discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"order_id":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","status":1,"total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:45:11][INFO] Server received request: RETURN_SETTLED_ORDER {"orderId":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","userPhone":"12345678901"}
[2025-10-13 21:45:11][INFO] Server::SERprocessRequest: cmd=RETURN_SETTLED_ORDER payload={"orderId":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","userPhone":"12345678901"}
[2025-10-13 21:45:11][INFO] Server SERreturnSettledOrder: 恢复库存 good_id=6 -> 200
[2025-10-13 21:45:11][INFO] Server SERreturnSettledOrder: set status to RETURNED for order c20251013213953495_72ec6222a3b6694e
[2025-10-13 21:45:11][INFO] Server sending response (len=80): {"order_id":"c20251013213953495_72ec6222a3b6694e","result":"updated","status":3}
[2025-10-13 21:45:12][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:45:12][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"12345678901"}
[2025-10-13 21:45:12][INFO] Server sending response (len=191): [{"discount_amount":664.0,"final_amount":12616.0,"order_id":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","status":3,"total_amount":13280.0,"user_phone":"12345678901"}]
[2025-10-13 21:45:17][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013213953495_72ec6222a3b6694e","userPhone":"12345678901"}
[2025-10-13 21:45:17][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013213953495_72ec6222a3b6694e","userPhone":"12345678901"}
[2025-10-13 21:45:17][INFO] Server sending response (len=311): {"discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"order_id":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","status":3,"total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:45:17][INFO] Server received request: REPAIR_SETTLED_ORDER {"orderId":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","userPhone":"12345678901"}
[2025-10-13 21:45:17][INFO] Server::SERprocessRequest: cmd=REPAIR_SETTLED_ORDER payload={"orderId":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","userPhone":"12345678901"}
[2025-10-13 21:45:17][INFO] Server SERrepairSettledOrder: set status to REPAIR for order c20251013213953495_72ec6222a3b6694e
[2025-10-13 21:45:17][INFO] Server sending response (len=80): {"order_id":"c20251013213953495_72ec6222a3b6694e","result":"updated","status":4}
[2025-10-13 21:45:18][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:45:18][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"12345678901"}
[2025-10-13 21:45:18][INFO] Server sending response (len=191): [{"discount_amount":664.0,"final_amount":12616.0,"order_id":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","status":4,"total_amount":13280.0,"user_phone":"12345678901"}]
[2025-10-13 21:45:24][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013213953495_72ec6222a3b6694e","userPhone":"12345678901"}
[2025-10-13 21:45:24][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013213953495_72ec6222a3b6694e","userPhone":"12345678901"}
[2025-10-13 21:45:24][INFO] Server sending response (len=311): {"discount_amount":664.0,"discount_policy":"","final_amount":12616.0,"items":[{"good_id":6,"good_name":"野火哈基米","price":66.4,"quantity":200,"subtotal":13280.0}],"order_id":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","status":4,"total_amount":13280.0,"user_phone":"12345678901"}
[2025-10-13 21:45:25][INFO] Server received request: DELETE_SETTLED_ORDER {"orderId":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","userPhone":"12345678901"}
[2025-10-13 21:45:25][INFO] Server::SERprocessRequest: cmd=DELETE_SETTLED_ORDER payload={"orderId":"c20251013213953495_72ec6222a3b6694e","shipping_address":"何意味","userPhone":"12345678901"}
[2025-10-13 21:45:25][INFO] Server SERdeleteSettledOrder: deleted order c20251013213953495_72ec6222a3b6694e
[2025-10-13 21:45:25][INFO] Server sending response (len=69): {"order_id":"c20251013213953495_72ec6222a3b6694e","result":"deleted"}
[2025-10-13 21:45:26][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:45:26][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"12345678901"}
[2025-10-13 21:45:26][INFO] Server sending response (len=2): []
[2025-10-13 21:45:27][INFO] Server received request: GET_ALL_ORDERS {"userPhone":"12345678901"}
[2025-10-13 21:45:27][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={"userPhone":"12345678901"}
[2025-10-13 21:45:27][INFO] Server sending response (len=2): []
[2025-10-13 21:45:29][INFO] UserWindow::onReturnToIdentitySelection called
[2025-10-13 21:45:29][INFO] 收到 UserWindow::backRequested，返回登录界面
[2025-10-13 21:45:29][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 21:45:53][INFO] 管理员登录成功，打开管理员窗口
[2025-10-13 21:45:53][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:45:53][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:45:53][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:45:53][INFO] Server sending response (len=445): [{"address":"何意味","password":"111111","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"?","password":"awdaw","phone":"12345678908"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"??|?|/|?|???","password":"/|/|/|","phone":"12345678911"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:45:53][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:45:53][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:45:53][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:45:53][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:45:53][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:45:53][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:45:53][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:45:53][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:45:53][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:45:54][INFO] Server received request: GET_ALL_ORDERS {}
[2025-10-13 21:45:54][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={}
[2025-10-13 21:45:54][INFO] Server sending response (len=364): [{"discount_amount":0.5,"final_amount":9.49,"order_id":"c20251013210328472_9c6f7b4a1411aefc","shipping_address":"JLU1","status":1,"total_amount":9.99,"user_phone":"17708659389"},{"discount_amount":497.83,"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","shipping_address":"JLU1","status":1,"total_amount":4148.56,"user_phone":"17708659389"}]
[2025-10-13 21:45:54][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:45:54][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:45:54][INFO] Server sending response (len=1225): [{"id":"2","name":"95%off","policy":{"discount":0.95,"scope":"global","type":"discount"}},{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600....(truncated)
[2025-10-13 21:45:54][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:45:54][INFO] AdminWindow::refreshPromotions loaded 10 promotions
[2025-10-13 21:46:18][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:46:18][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:46:18][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:46:18][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:46:18][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:46:18][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:46:18][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:46:18][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:46:18][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:46:19][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:46:19][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:46:19][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:46:19][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:46:19][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:46:19][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:46:19][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:46:19][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:46:19][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:46:19][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:46:19][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:46:19][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:46:19][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:46:19][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:46:19][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:46:19][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:46:19][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:46:19][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:48:04][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:48:04][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:48:04][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:48:04][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:48:04][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:48:04][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:48:04][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:48:04][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:48:04][INFO] Server sending response (len=421): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"ikun","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:48:29][INFO] Server received request: UPDATE_GOOD {"category":"ji","id":5,"name":"","price":2.5,"stock":14901}
[2025-10-13 21:48:29][INFO] Server::SERprocessRequest: cmd=UPDATE_GOOD payload={"category":"ji","id":5,"name":"","price":2.5,"stock":14901}
[2025-10-13 21:48:29][INFO] Server SERupdateGoods: 更新成功，返回JSON内容: {"category":"ji","id":5,"name":"","price":2.5,"stock":14901}
[2025-10-13 21:48:29][INFO] Server SERupdateGoods: 已写入 localJSONOutPut.json
[2025-10-13 21:48:29][INFO] Server sending response (len=60): {"category":"ji","id":5,"name":"","price":2.5,"stock":14901}
[2025-10-13 21:48:30][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:48:30][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:48:30][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:48:30][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:48:30][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:48:30][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:48:30][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:48:30][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:48:30][INFO] Server sending response (len=417): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"","price":2.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:48:42][INFO] Server received request: UPDATE_GOOD {"category":"ji","id":5,"name":"","price":3.5,"stock":14901}
[2025-10-13 21:48:42][INFO] Server::SERprocessRequest: cmd=UPDATE_GOOD payload={"category":"ji","id":5,"name":"","price":3.5,"stock":14901}
[2025-10-13 21:48:42][INFO] Server SERupdateGoods: 更新成功，返回JSON内容: {"category":"ji","id":5,"name":"","price":3.5,"stock":14901}
[2025-10-13 21:48:42][INFO] Server SERupdateGoods: 已写入 localJSONOutPut.json
[2025-10-13 21:48:42][INFO] Server sending response (len=60): {"category":"ji","id":5,"name":"","price":3.5,"stock":14901}
[2025-10-13 21:48:43][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:48:43][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:48:43][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:48:43][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:48:43][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:48:43][INFO] DTBloadAllGoods: mysql_num_rows = 6

[2025-10-13 21:48:43][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"","price":3.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:48:43][INFO] Server SERgetAllGoods: 查询到 6 个商品
[2025-10-13 21:48:43][INFO] Server sending response (len=417): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":5,"name":"","price":3.5,"stock":14901},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:48:47][INFO] Server received request: DELETE_GOOD 5
[2025-10-13 21:48:47][INFO] Server::SERprocessRequest: cmd=DELETE_GOOD payload=5
[2025-10-13 21:48:47][INFO] Server SERdeleteGood: 删除商品 id=5
[2025-10-13 21:48:47][INFO] Server sending response (len=27): {"id":5,"result":"deleted"}
[2025-10-13 21:48:48][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:48:48][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:48:48][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:48:48][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:48:48][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:48:48][INFO] DTBloadAllGoods: mysql_num_rows = 5

[2025-10-13 21:48:48][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:48:48][INFO] Server SERgetAllGoods: 查询到 5 个商品
[2025-10-13 21:48:48][INFO] Server sending response (len=356): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:48:49][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:48:49][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:48:49][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:48:49][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:48:49][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:48:49][INFO] DTBloadAllGoods: mysql_num_rows = 5

[2025-10-13 21:48:49][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:48:49][INFO] Server SERgetAllGoods: 查询到 5 个商品
[2025-10-13 21:48:49][INFO] Server sending response (len=356): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:48:50][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:48:50][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:48:50][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:48:50][INFO] Server SERgetAllGoods: dbManager ptr = 1812248814464, DTBisConnected=true
[2025-10-13 21:48:50][INFO] DTBloadAllGoods: this=000001A5F2726380 connection_=000001A5F27A1D40 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:48:50][INFO] DTBloadAllGoods: mysql_num_rows = 5

[2025-10-13 21:48:50][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:48:50][INFO] Server SERgetAllGoods: 查询到 5 个商品
[2025-10-13 21:48:50][INFO] Server sending response (len=356): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:49:14][INFO] Server received request: GET_ORDER_DETAIL {"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:49:14][INFO] Server::SERprocessRequest: cmd=GET_ORDER_DETAIL payload={"orderId":"c20251013205153719_a4590f3ea09b6146","userPhone":"17708659389"}
[2025-10-13 21:49:14][INFO] Server sending response (len=468): {"discount_amount":497.83,"discount_policy":"98?95?88!","final_amount":3650.73,"items":[{"good_id":2,"good_name":"manbo","price":28.88,"quantity":111,"subtotal":3205.68},{"good_id":4,"good_name":"dingdongji","price":8.11,"quantity":58,"subtotal":470.38},{"good_id":5,"good_name":"ikun","price":2.5,"quantity":189,"subtotal":472.5}],"order_id":"c20251013205153719_a4590f3ea09b6146","shipping_address":"JLU1","status":1,"total_amount":4148.56,"user_phone":"17708659389"}
[2025-10-13 21:50:05][INFO] Server received request: DELETE_PROMOTION {"name":"95%off"}
[2025-10-13 21:50:05][INFO] Server::SERprocessRequest: cmd=DELETE_PROMOTION payload={"name":"95%off"}
[2025-10-13 21:50:05][INFO] Server sending response (len=36): {"name":"95%off","result":"deleted"}
[2025-10-13 21:50:07][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:50:07][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:50:07][INFO] Server sending response (len=1136): [{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600.0,"type":"full_reduction"}},{"id":"15","name":"1919810","policy":{"scope":"global","tiers...(truncated)
[2025-10-13 21:50:07][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 21:50:07][INFO] AdminWindow::refreshPromotions loaded 9 promotions
[2025-10-13 21:50:16][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:50:16][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:50:16][INFO] Server sending response (len=1136): [{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600.0,"type":"full_reduction"}},{"id":"15","name":"1919810","policy":{"scope":"global","tiers...(truncated)
[2025-10-13 21:50:16][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 21:50:16][INFO] AdminWindow::refreshPromotions loaded 9 promotions
[2025-10-13 21:52:49][INFO] 应用启动
[2025-10-13 21:52:49][INFO] Server: DatabaseManager 已连接。
[2025-10-13 21:52:49][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 21:52:49][INFO] Client 已连接到 Server
[2025-10-13 21:52:49][INFO] DatabaseManager::connect() called.

[2025-10-13 21:52:49][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 21:52:53][INFO] 管理员登录成功，打开管理员窗口
[2025-10-13 21:52:54][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:52:54][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:52:54][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:52:54][INFO] Server sending response (len=445): [{"address":"何意味","password":"111111","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"?","password":"awdaw","phone":"12345678908"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"??|?|/|?|???","password":"/|/|/|","phone":"12345678911"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:52:54][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:52:54][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:52:54][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:52:54][INFO] Server SERgetAllGoods: dbManager ptr = 2310292773344, DTBisConnected=true
[2025-10-13 21:52:54][INFO] DTBloadAllGoods: this=00000219E82E19E0 connection_=00000219E83832C0 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:52:54][INFO] DTBloadAllGoods: mysql_num_rows = 5

[2025-10-13 21:52:54][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:52:54][INFO] Server SERgetAllGoods: 查询到 5 个商品
[2025-10-13 21:52:54][INFO] Server sending response (len=356): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:52:54][INFO] Server received request: GET_ALL_ORDERS {}
[2025-10-13 21:52:54][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={}
[2025-10-13 21:52:54][INFO] Server sending response (len=364): [{"discount_amount":0.5,"final_amount":9.49,"order_id":"c20251013210328472_9c6f7b4a1411aefc","shipping_address":"JLU1","status":1,"total_amount":9.99,"user_phone":"17708659389"},{"discount_amount":497.83,"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","shipping_address":"JLU1","status":1,"total_amount":4148.56,"user_phone":"17708659389"}]
[2025-10-13 21:52:55][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:52:55][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:52:55][INFO] Server sending response (len=1136): [{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600.0,"type":"full_reduction"}},{"id":"15","name":"1919810","policy":{"scope":"global","tiers...(truncated)
[2025-10-13 21:52:55][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 21:52:55][INFO] AdminWindow::refreshPromotions loaded 9 promotions
[2025-10-13 21:53:59][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:53:59][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:53:59][INFO] Server sending response (len=1136): [{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600.0,"type":"full_reduction"}},{"id":"15","name":"1919810","policy":{"scope":"global","tiers...(truncated)
[2025-10-13 21:53:59][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 21:53:59][INFO] AdminWindow::refreshPromotions loaded 9 promotions
[2025-10-13 21:54:10][INFO] Server received request: ADD_PROMOTION {"name":"1","policy":{"scope":"global","tiers":[{"discount":3.0,"min_qty":1},{"discount":3.0,"min_qty":2},{"discount":3.0,"min_qty":3}],"type":"tiered"},"type":"tiered"}
[2025-10-13 21:54:10][INFO] Server::SERprocessRequest: cmd=ADD_PROMOTION payload={"name":"1","policy":{"scope":"global","tiers":[{"discount":3.0,"min_qty":1},{"discount":3.0,"min_qty":2},{"discount":3.0,"min_qty":3}],"type":"tiered"},"type":"tiered"}
[2025-10-13 21:54:10][INFO] Server sending response (len=29): {"name":"1","result":"added"}
[2025-10-13 21:54:12][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:54:12][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:54:12][INFO] Server sending response (len=1300): [{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600.0,"type":"full_reduction"}},{"id":"15","name":"1919810","policy":{"scope":"global","tiers...(truncated)
[2025-10-13 21:54:12][INFO] CLTgetAllPromotionsRaw: loaded 10 promotions
[2025-10-13 21:54:12][INFO] AdminWindow::refreshPromotions loaded 10 promotions
[2025-10-13 21:54:25][INFO] Server received request: DELETE_PROMOTION {"name":"1"}
[2025-10-13 21:54:25][INFO] Server::SERprocessRequest: cmd=DELETE_PROMOTION payload={"name":"1"}
[2025-10-13 21:54:25][INFO] Server sending response (len=31): {"name":"1","result":"deleted"}
[2025-10-13 21:54:26][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:54:26][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:54:26][INFO] Server sending response (len=1136): [{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600.0,"type":"full_reduction"}},{"id":"15","name":"1919810","policy":{"scope":"global","tiers...(truncated)
[2025-10-13 21:54:26][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 21:54:26][INFO] AdminWindow::refreshPromotions loaded 9 promotions
[2025-10-13 21:54:49][INFO] DatabaseManager::disconnect() called.

[2025-10-13 21:54:49][INFO] 应用退出

[2025-10-13 21:54:49][INFO] DatabaseManager::disconnect() called.

[2025-10-13 21:55:24][INFO] 应用启动
[2025-10-13 21:55:24][INFO] Server: DatabaseManager 已连接。
[2025-10-13 21:55:24][INFO] 本地 Server 已启动 (127.0.0.1:8888)
[2025-10-13 21:55:24][INFO] Client 已连接到 Server
[2025-10-13 21:55:24][INFO] DatabaseManager::connect() called.

[2025-10-13 21:55:24][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 21:55:30][INFO] 管理员登录成功，打开管理员窗口
[2025-10-13 21:55:30][INFO] Server received request: GET_ALL_ACCOUNTS
[2025-10-13 21:55:30][INFO] Server::SERprocessRequest: cmd=GET_ALL_ACCOUNTS payload=<none>
[2025-10-13 21:55:30][INFO] Server 收到请求: GET_ALL_ACCOUNTS
[2025-10-13 21:55:30][INFO] Server sending response (len=445): [{"address":"何意味","password":"111111","phone":"12345678901"},{"address":"xiaobaishoutao","password":"ccbccb","phone":"12345678902"},{"address":"cbcb","password":"777777","phone":"12345678903"},{"address":"?","password":"awdaw","phone":"12345678908"},{"address":"dk","password":"AUVAUV","phone":"12345678909"},{"address":"??|?|/|?|???","password":"/|/|/|","phone":"12345678911"},{"address":"JLU1","password":"AUVpbb","phone":"17708659389"}]
[2025-10-13 21:55:31][INFO] Server received request: GET_ALL_GOODS
[2025-10-13 21:55:31][INFO] Server::SERprocessRequest: cmd=GET_ALL_GOODS payload=<none>
[2025-10-13 21:55:31][INFO] Server 收到请求: GET_ALL_GOODS
[2025-10-13 21:55:31][INFO] Server SERgetAllGoods: dbManager ptr = 2031254242720, DTBisConnected=true
[2025-10-13 21:55:31][INFO] DTBloadAllGoods: this=000001D8F03005A0 connection_=000001D8F038B290 Query="SELECT id, name, price, stock, category FROM good"

[2025-10-13 21:55:31][INFO] DTBloadAllGoods: mysql_num_rows = 5

[2025-10-13 21:55:31][INFO] Server SERgetAllGoods: 返回JSON内容: [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:55:31][INFO] Server SERgetAllGoods: 查询到 5 个商品
[2025-10-13 21:55:31][INFO] Server sending response (len=356): [{"category":"HYW","id":1,"name":"hyw","price":9.99,"stock":783},{"category":"umamusume","id":2,"name":"manbo","price":28.88,"stock":113969},{"category":"ji","id":4,"name":"dingdongji","price":8.11,"stock":348},{"category":"ji","id":6,"name":"野火哈基米","price":66.4,"stock":200},{"category":"ji","id":7,"name":"ハチミ","price":78.0,"stock":1106}]
[2025-10-13 21:55:31][INFO] Server received request: GET_ALL_ORDERS {}
[2025-10-13 21:55:31][INFO] Server::SERprocessRequest: cmd=GET_ALL_ORDERS payload={}
[2025-10-13 21:55:31][INFO] Server sending response (len=364): [{"discount_amount":0.5,"final_amount":9.49,"order_id":"c20251013210328472_9c6f7b4a1411aefc","shipping_address":"JLU1","status":1,"total_amount":9.99,"user_phone":"17708659389"},{"discount_amount":497.83,"final_amount":3650.73,"order_id":"c20251013205153719_a4590f3ea09b6146","shipping_address":"JLU1","status":1,"total_amount":4148.56,"user_phone":"17708659389"}]
[2025-10-13 21:55:31][INFO] Server received request: GET_ALL_PROMOTIONS
[2025-10-13 21:55:31][INFO] Server::SERprocessRequest: cmd=GET_ALL_PROMOTIONS payload=<none>
[2025-10-13 21:55:31][INFO] Server sending response (len=1136): [{"id":"4","name":"满1999减288","policy":{"reduce":188.0,"scope":"global","threshold":1999.0,"type":"full_reduction"}},{"id":"5","name":"98?95?92!","policy":{"scope":"global","tiers":[{"discount":0.98,"min_qty":3},{"discount":0.95,"min_qty":3},{"discount":0.92,"min_qty":5}],"type":"tiered"}},{"id":"6","name":"230-11","policy":{"reduce":11.0,"scope":"global","threshold":230.0,"type":"full_reduction"}},{"id":"7","name":"330-20","policy":{"reduce":20.0,"scope":"global","threshold":330.0,"type":"full_reduction"}},{"id":"8","name":"350-40","policy":{"reduce":40.0,"scope":"global","threshold":350.0,"type":"full_reduction"}},{"id":"9","name":"950-66","policy":{"reduce":66.0,"scope":"global","threshold":950.0,"type":"full_reduction"}},{"id":"11","name":"500-48","policy":{"reduce":48.0,"scope":"global","threshold":500.0,"type":"full_reduction"}},{"id":"12","name":"600-67","policy":{"reduce":87.0,"scope":"global","threshold":600.0,"type":"full_reduction"}},{"id":"15","name":"1919810","policy":{"scope":"global","tiers...(truncated)
[2025-10-13 21:55:31][INFO] CLTgetAllPromotionsRaw: loaded 9 promotions
[2025-10-13 21:55:31][INFO] AdminWindow::refreshPromotions loaded 9 promotions
[2025-10-13 21:55:43][INFO] AdminWindow::onReturnToIdentitySelection called
[2025-10-13 21:55:43][INFO] 收到 AdminWindow::backRequested，返回登录界面
[2025-10-13 21:55:43][INFO] 已从数据库刷新用户列表用于登录对话框
[2025-10-13 21:55:45][INFO] 用户取消登录，退出应用
[2025-10-13 21:55:45][INFO] DatabaseManager::disconnect() called.

[2025-10-13 21:55:45][INFO] DatabaseManager::disconnect() called.

